function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _defineProperty2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,s=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"Ju5/":function(e,t,n){"use strict";var r=n("XqMk"),i="object"==typeof self&&self&&self.Object===Object&&self,s=r.a||i||Function("return this")();t.a=s},L3Qv:function(e,t,n){"use strict";t.a=function(){return!1}},VLs4:function(e,t,n){var r,i,s;!function(o){if("object"==typeof e.exports){var a=o(0,t);void 0!==a&&(e.exports=a)}else i=[n,t],void 0===(s="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=s)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=void 0;t.default=["de",[["vm.","nm."],["vorm.","nachm."],n],[["vorm.","nachm."],n,n],[["S","M","D","M","D","F","S"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["S","M","D","M","D","F","S"],["So","Mo","Di","Mi","Do","Fr","Sa"],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan.","Feb.","M\xe4rz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["v. Chr.","n. Chr."],n,n],1,[6,0],["dd.MM.yy","dd.MM.y","d. MMMM y","EEEE, d. MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",n,"{1} 'um' {0}",n],[",",".",";","%","+","-","E","\xb7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"\u20ac","Euro",{ATS:["\xf6S"],AUD:["AU$","$"],BGM:["BGK"],BGO:["BGJ"],CUC:[n,"Cub$"],DEM:["DM"],FKP:[n,"Fl\xa3"],GNF:[n,"F.G."],KMF:[n,"FC"],RON:[n,"L"],RWF:[n,"F.Rw"],SYP:[],THB:["\u0e3f"],TWD:["NT$"],ZMW:[n,"K"]},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}]}))},WOAq:function(e,t,n){"use strict";(function(e){var r=n("Ju5/"),i=n("L3Qv"),s="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=s&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===s?r.a.Buffer:void 0;t.a=(a?a.isBuffer:void 0)||i.a}).call(this,n("3UD+")(e))},XqMk:function(e,t,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global;t.a=r},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},gfpf:function(e,t){var n={userAgent:!1},r={};if(void 0===i)var i={};i.lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var i=function(){};if(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){var s;for(s in r)e.prototype[s]=r[s];var a=function(){},u=["toString","valueOf"];try{/MSIE/.test(n.userAgent)&&(a=function(e,t){for(s=0;s<u.length;s+=1){var n=u[s],r=t[n];"function"==typeof r&&r!=Object.prototype[n]&&(e[n]=r)}})}catch(o){}a(e.prototype,r)}}};var s,o,a,u,l,c,h,f,d,p,v,g=g||(s=Math,a=(o={}).lib={},u=a.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=a.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++)t[r+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(r+s)%4*8;else for(s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new l.init(t,e)}}),c=o.enc={},h=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},f=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},d=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,o=r/(4*i),a=(o=e?s.ceil(o):s.max((0|o)-this._minBufferSize,0))*i,u=s.min(4*a,r);if(a){for(var c=0;c<a;c+=i)this._doProcessBlock(n,c);var h=n.splice(0,a);t.sigBytes-=u}return new l.init(h,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),a.Hasher=p.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new v.HMAC.init(e,n).finalize(t)}}}),v=o.algo={},o);!function(e){var t,n=(t=g).lib,r=n.Base,i=n.WordArray;(t=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var s=e[r];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),g.lib.Cipher||function(e){var t=(d=g).lib,n=t.Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,s=d.enc.Base64,o=d.algo.EvpKDF,a=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?p:f).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?p:f).decrypt(e,t,n,r)}}}});t.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=d.mode={},l=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},c=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=i}}),u=u.CBC=c,c=(d.pad={}).Pkcs7={pad:function(e,t){for(var n,i=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(i);n=r.create(s,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=a.extend({cfg:a.cfg.extend({mode:u,padding:c}),reset:function(){a.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(u=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),h.create({ciphertext:t,key:n,iv:(i=i.cfg).iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=r.random(8)),e=o.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:i})}},p=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:d}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=f.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,f.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=g,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],s=[],o=[],a=[],u=[],l=[],c=[],h=[],f=[],d=[],p=0;256>p;p++)d[p]=128>p?p<<1:p<<1^283;var v=0,y=0;for(p=0;256>p;p++){var m;r[v]=m=(m=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&m^99,i[m]=v;var _=d[v],b=d[_],k=d[b],w=257*d[m]^16843008*m;s[v]=w<<24|w>>>8,o[v]=w<<16|w>>>16,a[v]=w<<8|w>>>24,u[v]=w,l[m]=(w=16843009*k^65537*b^257*_^16843008*v)<<24|w>>>8,c[m]=w<<16|w>>>16,h[m]=w<<8|w>>>24,f[m]=w,v?(v=_^d[d[d[k^_]]],y^=d[d[y]]):v=y=1}var C=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],s=0;s<n;s++)if(s<t)i[s]=e[s];else{var o=i[s-1];s%t?6<t&&4==s%t&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=C[s/t|0]<<24),i[s]=i[s-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)s=n-t,o=t%4?i[s]:i[s-4],e[t]=4>t||4>=s?o:l[r[o>>>24]]^c[r[o>>>16&255]]^h[r[o>>>8&255]]^f[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,a,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,c,h,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,a){for(var u=this._nRounds,l=e[t]^n[0],c=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],d=4,p=1;p<u;p++){var v=r[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[255&f]^n[d++],g=r[c>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[255&l]^n[d++],y=r[h>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[255&c]^n[d++];f=r[f>>>24]^i[l>>>16&255]^s[c>>>8&255]^o[255&h]^n[d++],l=v,c=g,h=y}v=(a[l>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],g=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[d++],y=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&c])^n[d++],f=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^n[d++],e[t]=v,e[t+1]=g,e[t+2]=y,e[t+3]=f},keySize:8}),e.AES=t._createHelper(n)}(),function(){function e(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function t(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var n,r=g,i=(n=r.lib).WordArray,s=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;56>n;n++){var r=o[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(e=this._subKeys=[],r=0;16>r;r++){var i=e[r]=[],s=u[r];for(n=0;24>n;n++)i[n/6|0]|=t[(a[n]-1+s)%28]<<31-n%6,i[4+(n/6|0)]|=t[28+(a[n+24]-1+s)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(t=this._invSubKeys=[],n=0;16>n;n++)t[n]=e[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var s=0;16>s;s++){for(var o=i[s],a=this._lBlock,u=this._rBlock,h=0,f=0;8>f;f++)h|=l[f][((u^o[f])&c[f])>>>0];this._lBlock=u,this._rBlock=a^h}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=n._createHelper(h),s=s.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(i.create(e.slice(0,2))),this._des2=h.createEncryptor(i.create(e.slice(2,4))),this._des3=h.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=n._createHelper(s)}(),function(){var e=g.lib.WordArray;g.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(t){var n=t.length,r=this._map;(i=r.charAt(64))&&-1!=(i=t.indexOf(i))&&(n=i);for(var i=[],s=0,o=0;o<n;o++)if(o%4){var a=r.indexOf(t.charAt(o-1))<<o%4*2,u=r.indexOf(t.charAt(o))>>>6-o%4*2;i[s>>>2]|=(a|u)<<24-s%4*8,s++}return e.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,s,o){return((e=e+(t&n|~t&r)+i+o)<<s|e>>>32-s)+t}function n(e,t,n,r,i,s,o){return((e=e+(t&r|n&~r)+i+o)<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return((e=e+(t^n^r)+i+o)<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return((e=e+(n^(t|~r))+i+o)<<s|e>>>32-s)+t}for(var s=g,o=(u=s.lib).WordArray,a=u.Hasher,u=s.algo,l=[],c=0;64>c;c++)l[c]=4294967296*e.abs(e.sin(c+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var o=0;16>o;o++)e[a=s+o]=16711935&((u=e[a])<<8|u>>>24)|4278255360&(u<<24|u>>>8);var a,u=e[s+1],c=e[s+2],h=e[s+3],f=e[s+4],d=e[s+5],p=e[s+6],v=e[s+7],g=e[s+8],y=e[s+9],m=e[s+10],_=e[s+11],b=e[s+12],k=e[s+13],w=e[s+14],C=e[s+15],S=t(S=(o=this._hash.words)[0],A=o[1],x=o[2],E=o[3],a=e[s+0],7,l[0]),E=t(E,S,A,x,u,12,l[1]),x=t(x,E,S,A,c,17,l[2]),A=t(A,x,E,S,h,22,l[3]);S=t(S,A,x,E,f,7,l[4]),E=t(E,S,A,x,d,12,l[5]),x=t(x,E,S,A,p,17,l[6]),A=t(A,x,E,S,v,22,l[7]),S=t(S,A,x,E,g,7,l[8]),E=t(E,S,A,x,y,12,l[9]),x=t(x,E,S,A,m,17,l[10]),A=t(A,x,E,S,_,22,l[11]),S=t(S,A,x,E,b,7,l[12]),E=t(E,S,A,x,k,12,l[13]),x=t(x,E,S,A,w,17,l[14]),S=n(S,A=t(A,x,E,S,C,22,l[15]),x,E,u,5,l[16]),E=n(E,S,A,x,p,9,l[17]),x=n(x,E,S,A,_,14,l[18]),A=n(A,x,E,S,a,20,l[19]),S=n(S,A,x,E,d,5,l[20]),E=n(E,S,A,x,m,9,l[21]),x=n(x,E,S,A,C,14,l[22]),A=n(A,x,E,S,f,20,l[23]),S=n(S,A,x,E,y,5,l[24]),E=n(E,S,A,x,w,9,l[25]),x=n(x,E,S,A,h,14,l[26]),A=n(A,x,E,S,g,20,l[27]),S=n(S,A,x,E,k,5,l[28]),E=n(E,S,A,x,c,9,l[29]),x=n(x,E,S,A,v,14,l[30]),S=r(S,A=n(A,x,E,S,b,20,l[31]),x,E,d,4,l[32]),E=r(E,S,A,x,g,11,l[33]),x=r(x,E,S,A,_,16,l[34]),A=r(A,x,E,S,w,23,l[35]),S=r(S,A,x,E,u,4,l[36]),E=r(E,S,A,x,f,11,l[37]),x=r(x,E,S,A,v,16,l[38]),A=r(A,x,E,S,m,23,l[39]),S=r(S,A,x,E,k,4,l[40]),E=r(E,S,A,x,a,11,l[41]),x=r(x,E,S,A,h,16,l[42]),A=r(A,x,E,S,p,23,l[43]),S=r(S,A,x,E,y,4,l[44]),E=r(E,S,A,x,b,11,l[45]),x=r(x,E,S,A,C,16,l[46]),S=i(S,A=r(A,x,E,S,c,23,l[47]),x,E,a,6,l[48]),E=i(E,S,A,x,v,10,l[49]),x=i(x,E,S,A,w,15,l[50]),A=i(A,x,E,S,d,21,l[51]),S=i(S,A,x,E,b,6,l[52]),E=i(E,S,A,x,h,10,l[53]),x=i(x,E,S,A,m,15,l[54]),A=i(A,x,E,S,u,21,l[55]),S=i(S,A,x,E,g,6,l[56]),E=i(E,S,A,x,C,10,l[57]),x=i(x,E,S,A,p,15,l[58]),A=i(A,x,E,S,k,21,l[59]),S=i(S,A,x,E,f,6,l[60]),E=i(E,S,A,x,_,10,l[61]),x=i(x,E,S,A,c,15,l[62]),A=i(A,x,E,S,y,21,l[63]),o[0]=o[0]+S|0,o[1]=o[1]+A|0,o[2]=o[2]+x|0,o[3]=o[3]+E|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)n[r]=16711935&((i=n[r])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)}(Math),function(){var e=g,t=(i=e.lib).WordArray,n=i.Hasher,r=[],i=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],s=n[1],o=n[2],a=n[3],u=n[4],l=0;80>l;l++){if(16>l)r[l]=0|e[t+l];else{var c=r[l-3]^r[l-8]^r[l-14]^r[l-16];r[l]=c<<1|c>>>31}c=(i<<5|i>>>27)+u+r[l],c=20>l?c+(1518500249+(s&o|~s&a)):40>l?c+(1859775393+(s^o^a)):60>l?c+((s&o|s&a|o&a)-1894007588):c+((s^o^a)-899497514),u=a,a=o,o=s<<30|s>>>2,s=i,i=c}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(i),e.HmacSHA1=n._createHmacHelper(i)}(),function(e){for(var t=g,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,s=[],o=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var c;e:{for(var h=e.sqrt(c=u),f=2;f<=h;f++)if(!(c%f)){c=!1;break e}c=!0}c&&(8>l&&(s[l]=a(e.pow(u,.5))),o[l]=a(e.pow(u,1/3)),l++),u++}var d=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|e[t+f];else{var p=d[f-15],v=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+d[f-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&c)+o[f]+d[f],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),h=c,c=l,l=u,u=a+p|0,a=s,s=i,i=r,r=p+v|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+l|0,n[6]=n[6]+c|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),function(){var e=g,t=e.lib.WordArray,n=(r=e.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(r),e.HmacSHA224=n._createHmacHelper(r)}(),function(){function e(){return r.create.apply(r,arguments)}for(var t=g,n=t.lib.Hasher,r=(s=t.x64).Word,i=s.WordArray,s=t.algo,o=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=e();s=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n,r=(n=this._hash.words)[0],i=n[1],s=n[2],u=n[3],l=n[4],c=n[5],h=n[6],f=r.high,d=r.low,p=i.high,v=i.low,g=s.high,y=s.low,m=u.high,_=u.low,b=l.high,k=l.low,w=c.high,C=c.low,S=h.high,E=h.low,x=(n=n[7]).high,A=n.low,T=f,F=d,I=p,P=v,O=g,R=y,D=m,N=_,j=b,L=k,M=w,H=C,B=S,V=E,U=x,K=A,z=0;80>z;z++){var q=a[z];if(16>z)var W=q.high=0|e[t+2*z],G=q.low=0|e[t+2*z+1];else{W=((G=(W=a[z-15]).high)>>>1|(Z=W.low)<<31)^(G>>>8|Z<<24)^G>>>7;var Z=(Z>>>1|G<<31)^(Z>>>8|G<<24)^(Z>>>7|G<<25),Q=((G=(Q=a[z-2]).high)>>>19|($=Q.low)<<13)^(G<<3|$>>>29)^G>>>6,$=($>>>19|G<<13)^($<<3|G>>>29)^($>>>6|G<<26);q.high=W=(W=(W=W+(J=(G=a[z-7]).high)+((G=Z+G.low)>>>0<Z>>>0?1:0))+Q+((G+=$)>>>0<$>>>0?1:0))+(ne=(Y=a[z-16]).high)+((G+=Y=Y.low)>>>0<Y>>>0?1:0),q.low=G}var J=j&M^~j&B,Y=L&H^~L&V,X=(q=T&I^T&O^I&O,F&P^F&R^P&R),ee=($=o[z]).high,te=$.low,ne=U+((j>>>14|L<<18)^(j>>>18|L<<14)^(j<<23|L>>>9))+(($=K+((L>>>14|j<<18)^(L>>>18|j<<14)^(L<<23|j>>>9)))>>>0<K>>>0?1:0);U=B,K=V,B=M,V=H,M=j,H=L,j=D+(ne=(ne=(ne=ne+J+(($+=Y)>>>0<Y>>>0?1:0))+ee+(($+=te)>>>0<te>>>0?1:0))+W+(($+=G)>>>0<G>>>0?1:0))+((L=N+$|0)>>>0<N>>>0?1:0)|0,D=O,N=R,O=I,R=P,I=T,P=F,T=ne+(q=(Z=(T>>>28|F<<4)^(T<<30|F>>>2)^(T<<25|F>>>7))+q+((G=(Q=(F>>>28|T<<4)^(F<<30|T>>>2)^(F<<25|T>>>7))+X)>>>0<Q>>>0?1:0))+((F=$+G|0)>>>0<$>>>0?1:0)|0}d=r.low=d+F,r.high=f+T+(d>>>0<F>>>0?1:0),v=i.low=v+P,i.high=p+I+(v>>>0<P>>>0?1:0),y=s.low=y+R,s.high=g+O+(y>>>0<R>>>0?1:0),_=u.low=_+N,u.high=m+D+(_>>>0<N>>>0?1:0),k=l.low=k+L,l.high=b+j+(k>>>0<L>>>0?1:0),C=c.low=C+H,c.high=w+M+(C>>>0<H>>>0?1:0),E=h.low=E+V,h.high=S+B+(E>>>0<V>>>0?1:0),A=n.low=A+K,n.high=x+U+(A>>>0<K>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(s),t.HmacSHA512=n._createHmacHelper(s)}(),function(){var e=g,t=(i=e.x64).Word,n=i.WordArray,r=(i=e.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(i),e.HmacSHA384=r._createHmacHelper(i)}(),function(){var e=g,t=(r=e.lib).WordArray,n=r.Hasher,r=e.algo,i=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=t.create([0,1518500249,1859775393,2400959708,2840853838]),l=t.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++)e[r=t+n]=16711935&((k=e[r])<<8|k>>>24)|4278255360&(k<<24|k>>>8);var r,c,h,f,d,p,v,g,y,m,_,b,k=u.words,w=l.words,C=i.words,S=s.words,E=o.words,x=a.words;for(v=c=(r=this._hash.words)[0],g=h=r[1],y=f=r[2],m=d=r[3],_=p=r[4],n=0;80>n;n+=1)b=c+e[t+C[n]]|0,b=16>n?b+((h^f^d)+k[0]):32>n?b+((h&f|~h&d)+k[1]):48>n?b+(((h|~f)^d)+k[2]):64>n?b+((h&d|f&~d)+k[3]):b+((h^(f|~d))+k[4]),b=(b=(b|=0)<<E[n]|b>>>32-E[n])+p|0,c=p,p=d,d=f<<10|f>>>22,f=h,h=b,b=v+e[t+S[n]]|0,b=16>n?b+((g^(y|~m))+w[0]):32>n?b+((g&m|y&~m)+w[1]):48>n?b+(((g|~y)^m)+w[2]):64>n?b+((g&y|~g&m)+w[3]):b+((g^y^m)+w[4]),b=(b=(b|=0)<<x[n]|b>>>32-x[n])+_|0,v=_,_=m,m=y<<10|y>>>22,y=g,g=b;b=r[1]+f+m|0,r[1]=r[2]+d+_|0,r[2]=r[3]+p+v|0,r[3]=r[4]+c+g|0,r[4]=r[0]+h+y|0,r[0]=b},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;for(t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;5>n;n++)t[n]=16711935&((r=t[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.RIPEMD160=n._createHelper(r),e.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var e=g.enc.Utf8;g.algo.HMAC=g.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,u=o.words,l=0;l<r;l++)a[l]^=1549556828,u[l]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=g,n=(e=t.lib).Base,r=e.WordArray,i=(e=t.algo).HMAC,s=e.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=i.create((c=this.cfg).hasher,e),s=r.create(),o=r.create([1]),a=s.words,u=o.words,l=c.keySize,c=c.iterations;a.length<l;){var h=n.update(t).finalize(o);n.reset();for(var f=h.words,d=f.length,p=h,v=1;v<c;v++){p=n.finalize(p),n.reset();for(var g=p.words,y=0;y<d;y++)f[y]^=g[y]}s.concat(h),u[0]++}return s.sigBytes=4*l,s}});t.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)}}();var y,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_="=";function b(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=m.charAt(n>>6)+m.charAt(63&n);if(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=m.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=m.charAt(n>>2)+m.charAt((3&n)<<4)),_)for(;(3&r.length)>0;)r+=_;return r}function k(e){var t,n,r,i="",s=0;for(t=0;t<e.length&&e.charAt(t)!=_;++t)(r=m.indexOf(e.charAt(t)))<0||(0==s?(i+=F(r>>2),n=3&r,s=1):1==s?(i+=F(n<<2|r>>4),n=15&r,s=2):2==s?(i+=F(n),i+=F(r>>2),n=3&r,s=3):(i+=F(n<<2|r>>4),i+=F(15&r),s=0));return 1==s&&(i+=F(n<<2)),i}function w(e){var t,n=k(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function C(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):this.fromString(e,null==t&&"string"!=typeof e?256:t))}function S(){return new C(null)}"Microsoft Internet Explorer"==n.appName?(C.prototype.am=function(e,t,n,r,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var u=32767&this[e],l=this[e++]>>15,c=a*u+l*o;i=((u=o*u+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+a*l+(i>>>30),n[r++]=1073741823&u}return i},y=30):"Netscape"!=n.appName?(C.prototype.am=function(e,t,n,r,i,s){for(;--s>=0;){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},y=26):(C.prototype.am=function(e,t,n,r,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var u=16383&this[e],l=this[e++]>>14,c=a*u+l*o;i=((u=o*u+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+a*l,n[r++]=268435455&u}return i},y=28),C.prototype.DB=y,C.prototype.DM=(1<<y)-1,C.prototype.DV=1<<y,C.prototype.FV=Math.pow(2,52),C.prototype.F1=52-y,C.prototype.F2=2*y-52;var E,x,A="0123456789abcdefghijklmnopqrstuvwxyz",T=new Array;for(E="0".charCodeAt(0),x=0;x<=9;++x)T[E++]=x;for(E="a".charCodeAt(0),x=10;x<36;++x)T[E++]=x;for(E="A".charCodeAt(0),x=10;x<36;++x)T[E++]=x;function F(e){return A.charAt(e)}function I(e,t){var n=T[e.charCodeAt(t)];return null==n?-1:n}function P(e){var t=S();return t.fromInt(e),t}function O(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function R(e){this.m=e}function D(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function N(e,t){return e&t}function j(e,t){return e|t}function L(e,t){return e^t}function M(e,t){return e&~t}function H(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function B(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function V(){}function U(e){return e}function K(e){this.r2=S(),this.q3=S(),C.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}R.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},R.prototype.revert=function(e){return e},R.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},R.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},R.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},D.prototype.convert=function(e){var t=S();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(C.ZERO)>0&&this.m.subTo(t,t),t},D.prototype.revert=function(e){var t=S();return e.copyTo(t),this.reduce(t),t},D.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},D.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},D.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},C.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},C.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},C.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,s=0;--r>=0;){var o=8==n?255&e[r]:I(e,r);o<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&C.ZERO.subTo(this,this)},C.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},C.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},C.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},C.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|a,a=(this[n]&s)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},C.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}},C.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},C.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&C.ZERO.subTo(t,t)},C.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},C.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=S());var s=S(),o=this.s,a=e.s,u=this.DB-O(r[r.t-1]);u>0?(r.lShiftTo(u,s),i.lShiftTo(u,n)):(r.copyTo(s),i.copyTo(n));var l=s.t,c=s[l-1];if(0!=c){var h=c*(1<<this.F1)+(l>1?s[l-2]>>this.F2:0),f=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,v=n.t,g=v-l,y=null==t?S():t;for(s.dlShiftTo(g,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),C.ONE.dlShiftTo(l,y),y.subTo(s,s);s.t<l;)s[s.t++]=0;for(;--g>=0;){var m=n[--v]==c?this.DM:Math.floor(n[v]*f+(n[v-1]+p)*d);if((n[v]+=s.am(0,m,n,g,0,l))<m)for(s.dlShiftTo(g,y),n.subTo(y,n);n[v]<--m;)n.subTo(y,n)}null!=t&&(n.drShiftTo(l,t),o!=a&&C.ZERO.subTo(t,t)),n.t=l,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&C.ZERO.subTo(n,n)}}},C.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},C.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},C.prototype.exp=function(e,t){if(e>4294967295||e<1)return C.ONE;var n=S(),r=S(),i=t.convert(this),s=O(e)-1;for(i.copyTo(n);--s>=0;)if(t.sqrTo(n,r),(e&1<<s)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}return t.revert(n)},C.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=F(n));o>=0;)a<t?(n=(this[o]&(1<<a)-1)<<t-a,n|=this[--o]>>(a+=this.DB-t)):(n=this[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=F(n));return i?s:"0"},C.prototype.negate=function(){var e=S();return C.ZERO.subTo(this,e),e},C.prototype.abs=function(){return this.s<0?this.negate():this},C.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},C.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+O(this[this.t-1]^this.s&this.DM)},C.prototype.mod=function(e){var t=S();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(C.ZERO)>0&&e.subTo(t,t),t},C.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new R(t):new D(t),this.exp(e,n)},C.ZERO=P(0),C.ONE=P(1),V.prototype.convert=U,V.prototype.revert=U,V.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},V.prototype.sqrTo=function(e,t){e.squareTo(t)},K.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=S();return e.copyTo(t),this.reduce(t),t},K.prototype.revert=function(e){return e},K.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},K.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},K.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],q=(1<<26)/z[z.length-1];function W(){this.i=0,this.j=0,this.S=new Array}C.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},C.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=P(n),i=S(),s=S(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(e).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(e)+o},C.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,s=0,o=0,a=0;a<e.length;++a){var u=I(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(o=t*o+u,++s>=n&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&C.ZERO.subTo(this,this)},C.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(C.ONE.shiftLeft(e-1),j,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(C.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},C.prototype.bitwiseTo=function(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=s;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},C.prototype.changeBit=function(e,t){var n=C.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},C.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},C.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},C.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},C.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},C.prototype.multiplyUpperTo=function(e,t,n){var r=n.t=this.t+e.t- --t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},C.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},C.prototype.millerRabin=function(e){var t=this.subtract(C.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>z.length&&(e=z.length);for(var i=S(),s=0;s<e;++s){i.fromInt(z[Math.floor(Math.random()*z.length)]);var o=i.modPow(r,this);if(0!=o.compareTo(C.ONE)&&0!=o.compareTo(t)){for(var a=1;a++<n&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(C.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},C.prototype.clone=function(){var e=S();return this.copyTo(e),e},C.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},C.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},C.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},C.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},C.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},C.prototype.equals=function(e){return 0==this.compareTo(e)},C.prototype.min=function(e){return this.compareTo(e)<0?this:e},C.prototype.max=function(e){return this.compareTo(e)>0?this:e},C.prototype.and=function(e){var t=S();return this.bitwiseTo(e,N,t),t},C.prototype.or=function(e){var t=S();return this.bitwiseTo(e,j,t),t},C.prototype.xor=function(e){var t=S();return this.bitwiseTo(e,L,t),t},C.prototype.andNot=function(e){var t=S();return this.bitwiseTo(e,M,t),t},C.prototype.not=function(){for(var e=S(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},C.prototype.shiftLeft=function(e){var t=S();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},C.prototype.shiftRight=function(e){var t=S();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},C.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+H(this[e]);return this.s<0?this.t*this.DB:-1},C.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=B(this[n]^t);return e},C.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},C.prototype.setBit=function(e){return this.changeBit(e,j)},C.prototype.clearBit=function(e){return this.changeBit(e,M)},C.prototype.flipBit=function(e){return this.changeBit(e,L)},C.prototype.add=function(e){var t=S();return this.addTo(e,t),t},C.prototype.subtract=function(e){var t=S();return this.subTo(e,t),t},C.prototype.multiply=function(e){var t=S();return this.multiplyTo(e,t),t},C.prototype.divide=function(e){var t=S();return this.divRemTo(e,t,null),t},C.prototype.remainder=function(e){var t=S();return this.divRemTo(e,null,t),t},C.prototype.divideAndRemainder=function(e){var t=S(),n=S();return this.divRemTo(e,t,n),new Array(t,n)},C.prototype.modPow=function(e,t){var n,r,i=e.bitLength(),s=P(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new R(t):t.isEven()?new K(t):new D(t);var o=new Array,a=3,u=n-1,l=(1<<n)-1;if(o[1]=r.convert(this),n>1){var c=S();for(r.sqrTo(o[1],c);a<=l;)o[a]=S(),r.mulTo(c,o[a-2],o[a]),a+=2}var h,f,d=e.t-1,p=!0,v=S();for(i=O(e[d])-1;d>=0;){for(i>=u?h=e[d]>>i-u&l:(h=(e[d]&(1<<i+1)-1)<<u-i,d>0&&(h|=e[d-1]>>this.DB+i-u)),a=n;0==(1&h);)h>>=1,--a;if((i-=a)<0&&(i+=this.DB,--d),p)o[h].copyTo(s),p=!1;else{for(;a>1;)r.sqrTo(s,v),r.sqrTo(v,s),a-=2;a>0?r.sqrTo(s,v):(f=s,s=v,v=f),r.mulTo(v,o[h],s)}for(;d>=0&&0==(e[d]&1<<i);)r.sqrTo(s,v),f=s,s=v,v=f,--i<0&&(i=this.DB-1,--d)}return r.revert(s)},C.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return C.ZERO;for(var n=e.clone(),r=this.clone(),i=P(1),s=P(0),o=P(0),a=P(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(o,i),s.subTo(a,s)):(r.subTo(n,r),t&&o.subTo(i,o),a.subTo(s,a))}return 0!=r.compareTo(C.ONE)?C.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},C.prototype.pow=function(e){return this.exp(e,new V)},C.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},C.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=z[z.length-1]){for(t=0;t<z.length;++t)if(n[0]==z[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<z.length;){for(var r=z[t],i=t+1;i<z.length&&r<q;)r*=z[i++];for(r=n.modInt(r);t<i;)if(r%z[t++]==0)return!1}return n.millerRabin(e)},C.prototype.square=function(){var e=S();return this.squareTo(e),e},W.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)r=this.S[t],this.S[t]=this.S[n=n+this.S[t]+e[t%e.length]&255],this.S[n]=r;this.i=0,this.j=0},W.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var G,Z,Q,$=256;function J(){!function(e){Z[Q++]^=255&e,Z[Q++]^=e>>8&255,Z[Q++]^=e>>16&255,Z[Q++]^=e>>24&255,Q>=$&&(Q-=$)}((new Date).getTime())}if(null==Z){var Y;if(Z=new Array,Q=0,void 0!==r&&(void 0!==r.crypto||void 0!==r.msCrypto)){var X=r.crypto||r.msCrypto;if(X.getRandomValues){var ee=new Uint8Array(32);for(X.getRandomValues(ee),Y=0;Y<32;++Y)Z[Q++]=ee[Y]}else if("Netscape"==n.appName&&n.appVersion<"5"){var te=r.crypto.random(32);for(Y=0;Y<te.length;++Y)Z[Q++]=255&te.charCodeAt(Y)}}for(;Q<$;)Y=Math.floor(65536*Math.random()),Z[Q++]=Y>>>8,Z[Q++]=255&Y;Q=0,J()}function ne(){if(null==G){for(J(),(G=new W).init(Z),Q=0;Q<Z.length;++Q)Z[Q]=0;Q=0}return G.next()}function re(){}function ie(e,t){return new C(e,t)}function se(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function oe(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ae(e,t,n){for(var r="",i=0;r.length<t;)r+=n(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function ue(e,t){this.x=t,this.q=e}function le(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?C.ONE:r,this.zinv=null}function ce(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new le(this,null,null)}re.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=ne()},oe.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},oe.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=ie(e,16),this.e=parseInt(t,16)}},oe.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var s=new re,o=new Array;t>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new C(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},oe.prototype.encryptOAEP=function(e,t,n){var r=function(e,t,n,r){var i=fe.crypto.MessageDigest,s=fe.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(e){return xe(s.hashHex(Ae(e),o))}),e.length+2*r+2>t)throw"Message too long for RSA";var a,u="";for(a=0;a<t-e.length-2*r-2;a+=1)u+="\0";var l=n("")+u+"\x01"+e,c=new Array(r);(new re).nextBytes(c);var h=se(c,l.length,n),f=[];for(a=0;a<l.length;a+=1)f[a]=l.charCodeAt(a)^h.charCodeAt(a);var d=se(f,c.length,n),p=[0];for(a=0;a<c.length;a+=1)p[a+1]=c[a]^d.charCodeAt(a);return new C(p.concat(f))}(e,this.n.bitLength()+7>>3,t,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},oe.prototype.type="RSA",oe.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},oe.prototype.setPrivate=function(e,t,n){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=n;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=ie(e,16),this.e=parseInt(t,16),this.d=ie(n,16)}},oe.prototype.setPrivateEx=function(e,t,n,r,i,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=ie(e,16),this.e=parseInt(t,16),this.d=ie(n,16),this.p=ie(r,16),this.q=ie(i,16),this.dmp1=ie(s,16),this.dmq1=ie(o,16),this.coeff=ie(a,16)},oe.prototype.generate=function(e,t){var n=new re,r=e>>1;this.e=parseInt(t,16);for(var i=new C(t,16);;){for(;this.p=new C(e-r,1,n),0!=this.p.subtract(C.ONE).gcd(i).compareTo(C.ONE)||!this.p.isProbablePrime(10););for(;this.q=new C(r,1,n),0!=this.q.subtract(C.ONE).gcd(i).compareTo(C.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(C.ONE),a=this.q.subtract(C.ONE),u=o.multiply(a);if(0==u.gcd(i).compareTo(C.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(u),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},oe.prototype.decrypt=function(e){var t=ie(e,16),n=this.doPrivate(t);return null==n?null:function(e,t){for(var n=e.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},oe.prototype.decryptOAEP=function(e,t,n){var r=ie(e,16),i=this.doPrivate(r);return null==i?null:function(e,t,n,r){var i=fe.crypto.MessageDigest,s=fe.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(e){return xe(s.hashHex(Ae(e),o))}),e=e.toByteArray(),a=0;a<e.length;a+=1)e[a]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*r+2)throw"Cipher too short";var a,u=e.substr(1,r),l=e.substr(r+1),c=ae(l,r,n),h=[];for(a=0;a<u.length;a+=1)h[a]=u.charCodeAt(a)^c.charCodeAt(a);var f=ae(String.fromCharCode.apply(String,h),e.length-r,n),d=[];for(a=0;a<l.length;a+=1)d[a]=l.charCodeAt(a)^f.charCodeAt(a);if((d=String.fromCharCode.apply(String,d)).substr(0,r)!==n(""))throw"Hash mismatch";var p=(d=d.substr(r)).indexOf("\x01");if((-1!=p?d.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return d.substr(p+1)}(i,this.n.bitLength()+7>>3,t,n)},ue.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ue.prototype.toBigInteger=function(){return this.x},ue.prototype.negate=function(){return new ue(this.q,this.x.negate().mod(this.q))},ue.prototype.add=function(e){return new ue(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ue.prototype.subtract=function(e){return new ue(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ue.prototype.multiply=function(e){return new ue(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ue.prototype.square=function(){return new ue(this.q,this.x.square().mod(this.q))},ue.prototype.divide=function(e){return new ue(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},le.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},le.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},le.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(C.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(C.ZERO))},le.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(C.ZERO)&&!this.y.toBigInteger().equals(C.ZERO)},le.prototype.negate=function(){return new le(this.curve,this.x,this.y.negate(),this.z)},le.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(C.ZERO.equals(n))return C.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new C("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),a=o.multiply(n),u=i.multiply(o),l=t.square().multiply(this.z),c=l.subtract(u.shiftLeft(1)).multiply(e.z).subtract(a).multiply(n).mod(this.curve.q),h=u.multiply(r).multiply(t).subtract(s.multiply(a)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new le(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(h),f)},le.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new C("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=t.square().multiply(e);C.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),l=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new le(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),l)},le.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new C("3")),i=this.negate(),s=this;for(t=r.bitLength()-2;t>0;--t){s=s.twice();var o=r.testBit(t);o!=n.testBit(t)&&(s=s.add(o?this:i))}return s},le.prototype.multiplyTwo=function(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(s):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i},ce.prototype.getQ=function(){return this.q},ce.prototype.getA=function(){return this.a},ce.prototype.getB=function(){return this.b},ce.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ce.prototype.getInfinity=function(){return this.infinity},ce.prototype.fromBigInteger=function(e){return new ue(this.q,e)},ce.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new le(this,this.fromBigInteger(new C(n,16)),this.fromBigInteger(new C(r,16)));default:return null}},ue.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},le.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i},le.decodeFrom=function(e,t){var n=t.length-1,r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new C(r),o=new C(i);return new le(e,e.fromBigInteger(s),e.fromBigInteger(o))},le.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),s=new C(r,16),o=new C(i,16);return new le(e,e.fromBigInteger(s),e.fromBigInteger(o))},le.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),r=n.square().subtract(this.x).subtract(e.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new le(this.curve,r,i)},le.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(C.valueOf(2)),t=this.curve.fromBigInteger(C.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new le(this.curve,r,i)},le.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new C("3")),i=this.negate(),s=this;for(t=r.bitLength()-2;t>0;--t){s=s.twice();var o=r.testBit(t);o!=n.testBit(t)&&(s=s.add2D(o?this:i))}return s},le.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=t.multiply(t).mod(i),o=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return s.equals(o)},le.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},le.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(C.ONE)<0||t.compareTo(e.subtract(C.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(C.ONE)<0||n.compareTo(e.subtract(C.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var he=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(e,t,r){return t?n[t]:String.fromCharCode(parseInt(r,16))}var i=new String(""),s=(Object,Array,Object.hasOwnProperty);return function(n,o){var a,u,l=n.match(e),c=l[0],h=!1;"{"===c?a={}:"["===c?a=[]:(a=[],h=!0);for(var f=[a],d=1-h,p=l.length;d<p;++d){var v;switch((c=l[d]).charCodeAt(0)){default:(v=f[0])[u||v.length]=+c,u=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(t,r)),v=f[0],!u){if(!(v instanceof Array)){u=c||i;break}u=v.length}v[u]=c,u=void 0;break;case 91:f.unshift((v=f[0])[u||v.length]=[]),u=void 0;break;case 93:f.shift();break;case 102:(v=f[0])[u||v.length]=!1,u=void 0;break;case 110:(v=f[0])[u||v.length]=null,u=void 0;break;case 116:(v=f[0])[u||v.length]=!0,u=void 0;break;case 123:f.unshift((v=f[0])[u||v.length]={}),u=void 0;break;case 125:f.shift()}}if(h){if(1!==f.length)throw new Error;a=a[0]}else if(f.length)throw new Error;if(o){a=function e(t,n){var r=t[n];if(r&&"object"==typeof r){var i=null;for(var a in r)if(s.call(r,a)&&r!==t){var u=e(r,a);void 0!==u?r[a]=u:(i||(i=[]),i.push(a))}if(i)for(var l=i.length;--l>=0;)delete r[i[l]]}return o.call(t,n,r)}({"":a},"")}return a}}();void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),fe.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";t=new C(r,16).xor(e).add(C.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Pe(e,t)},this.newObject=function(e){var t=fe.asn1,n=t.DERBoolean,r=t.DERInteger,i=t.DERBitString,s=t.DEROctetString,o=t.DERNull,a=t.DERObjectIdentifier,u=t.DEREnumerated,l=t.DERUTF8String,c=t.DERNumericString,h=t.DERPrintableString,f=t.DERTeletexString,d=t.DERIA5String,p=t.DERUTCTime,v=t.DERGeneralizedTime,g=t.DERSequence,y=t.DERSet,m=t.DERTaggedObject,_=t.ASN1Util.newObject,b=Object.keys(e);if(1!=b.length)throw"key of param shall be only one.";var k=b[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+k+":"))throw"undefined key: "+k;if("bool"==k)return new n(e[k]);if("int"==k)return new r(e[k]);if("bitstr"==k)return new i(e[k]);if("octstr"==k)return new s(e[k]);if("null"==k)return new o(e[k]);if("oid"==k)return new a(e[k]);if("enum"==k)return new u(e[k]);if("utf8str"==k)return new l(e[k]);if("numstr"==k)return new c(e[k]);if("prnstr"==k)return new h(e[k]);if("telstr"==k)return new f(e[k]);if("ia5str"==k)return new d(e[k]);if("utctime"==k)return new p(e[k]);if("gentime"==k)return new v(e[k]);if("seq"==k){for(var w=e[k],C=[],S=0;S<w.length;S++){var E=_(w[S]);C.push(E)}return new g({array:C})}if("set"==k){for(w=e[k],C=[],S=0;S<w.length;S++)E=_(w[S]),C.push(E);return new y({array:C})}if("tag"==k){var x=e[k];if("[object Array]"===Object.prototype.toString.call(x)&&3==x.length){var A=_(x[2]);return new m({tag:x[0],explicit:x[1],obj:A})}var T={};if(void 0!==x.explicit&&(T.explicit=x.explicit),void 0!==x.tag&&(T.tag=x.tag),void 0===x.obj)throw"obj shall be specified for 'tag'.";return T.obj=_(x.obj),new m(T)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},fe.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),i=2;i<e.length;i+=2){var s=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(t=t+"."+new C(r,2).toString(10),r="")}return t},fe.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new C(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=t(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},fe.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},fe.asn1.DERAbstractString=function(e){fe.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=Se(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},i.lang.extend(fe.asn1.DERAbstractString,fe.asn1.ASN1Object),fe.asn1.DERAbstractTime=function(e){fe.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),s=String(i.getFullYear());"utc"==t&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var u=r(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=_e(e)},this.setByDateValue=function(e,t,n,r,i,s){var o=new Date(Date.UTC(e,t-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},i.lang.extend(fe.asn1.DERAbstractTime,fe.asn1.ASN1Object),fe.asn1.DERAbstractStructured=function(e){fe.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},i.lang.extend(fe.asn1.DERAbstractStructured,fe.asn1.ASN1Object),fe.asn1.DERBoolean=function(){fe.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},i.lang.extend(fe.asn1.DERBoolean,fe.asn1.ASN1Object),fe.asn1.DERInteger=function(e){fe.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=fe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new C(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},i.lang.extend(fe.asn1.DERInteger,fe.asn1.ASN1Object),fe.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=fe.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}fe.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var i=e.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)t+=1==e[n]?"1":"0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},i.lang.extend(fe.asn1.DERBitString,fe.asn1.ASN1Object),fe.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=fe.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}fe.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},i.lang.extend(fe.asn1.DEROctetString,fe.asn1.DERAbstractString),fe.asn1.DERNull=function(){fe.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},i.lang.extend(fe.asn1.DERNull,fe.asn1.ASN1Object),fe.asn1.DERObjectIdentifier=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new C(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};fe.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=t(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=fe.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},i.lang.extend(fe.asn1.DERObjectIdentifier,fe.asn1.ASN1Object),fe.asn1.DEREnumerated=function(e){fe.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=fe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new C(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},i.lang.extend(fe.asn1.DEREnumerated,fe.asn1.ASN1Object),fe.asn1.DERUTF8String=function(e){fe.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},i.lang.extend(fe.asn1.DERUTF8String,fe.asn1.DERAbstractString),fe.asn1.DERNumericString=function(e){fe.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},i.lang.extend(fe.asn1.DERNumericString,fe.asn1.DERAbstractString),fe.asn1.DERPrintableString=function(e){fe.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},i.lang.extend(fe.asn1.DERPrintableString,fe.asn1.DERAbstractString),fe.asn1.DERTeletexString=function(e){fe.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},i.lang.extend(fe.asn1.DERTeletexString,fe.asn1.DERAbstractString),fe.asn1.DERIA5String=function(e){fe.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},i.lang.extend(fe.asn1.DERIA5String,fe.asn1.DERAbstractString),fe.asn1.DERUTCTime=function(e){fe.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=_e(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=_e(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},i.lang.extend(fe.asn1.DERUTCTime,fe.asn1.DERAbstractTime),fe.asn1.DERGeneralizedTime=function(e){fe.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=_e(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=_e(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},i.lang.extend(fe.asn1.DERGeneralizedTime,fe.asn1.DERAbstractTime),fe.asn1.DERSequence=function(e){fe.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},i.lang.extend(fe.asn1.DERSequence,fe.asn1.DERAbstractStructured),fe.asn1.DERSet=function(e){fe.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++)e.push(this.asn1Array[t].getEncodedHex());return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},i.lang.extend(fe.asn1.DERSet,fe.asn1.DERAbstractStructured),fe.asn1.DERTaggedObject=function(e){fe.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},i.lang.extend(fe.asn1.DERTaggedObject,fe.asn1.ASN1Object);var fe,de,pe,ve=new function(){};function ge(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function ye(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function me(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function _e(e){return me(ge(e))}function be(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ke(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function we(e){return e.length%2==1&&(e="0"+e),be(b(e))}function Ce(e){return k(ke(e))}function Se(e){return Ne(Be(e))}function Ee(e){return decodeURIComponent(je(e))}function xe(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function Ae(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function Te(e){return b(e)}function Fe(e){return Te(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Ie(e){return k(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Pe(e,t){return"-----BEGIN "+t+"-----\r\n"+Fe(e)+"\r\n-----END "+t+"-----\r\n"}function Oe(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Ie(e=void 0!==t?(e=e.replace("-----BEGIN "+t+"-----","")).replace("-----END "+t+"-----",""):(e=e.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function Re(e){var t,n,r,i,s,o,a,u,l,c,h;if(h=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=h[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(h[2])-1,r=parseInt(h[3]),i=parseInt(h[4]),s=parseInt(h[5]),o=parseInt(h[6]),a=0,""!==(l=h[7])&&(c=(l.substr(1)+"00").substr(0,3),a=parseInt(c)),Date.UTC(t,n,r,i,s,o,a);throw"unsupported zulu format: "+e}function De(e){return~~(Re(e)/1e3)}function Ne(e){return e.replace(/%/g,"")}function je(e){return e.replace(/(..)/g,"%$1")}function Le(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2),i=(e=e.replace("::",r)).split(":");if(8!=i.length)throw t;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function Me(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)t[n]=t[n].replace(/^0+/,""),""==t[n]&&(t[n]="0");var r=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===r)return e.slice(1,-1);var i="";for(n=0;n<r.length;n++)r[n].length>i.length&&(i=r[n]);return(e=e.replace(i,"::")).slice(1,-1)}function He(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?Me(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(o){throw t}}function Be(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+_e(t[r]);return n}function Ve(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function Ue(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(o){throw"malformed integer array string: "+o}}ve.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},ve.getL=function(e,t){var n=ve.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},ve.getVblen=function(e,t){var n;return""==(n=ve.getL(e,t))?-1:("8"===n.substr(0,1)?new C(n.substr(2),16):new C(n,16)).intValue()},ve.getVidx=function(e,t){var n=ve.getLblen(e,t);return n<0?n:t+2*(n+1)},ve.getV=function(e,t){var n=ve.getVidx(e,t),r=ve.getVblen(e,t);return e.substr(n,2*r)},ve.getTLV=function(e,t){return e.substr(t,2)+ve.getL(e,t)+ve.getV(e,t)},ve.getNextSiblingIdx=function(e,t){return ve.getVidx(e,t)+2*ve.getVblen(e,t)},ve.getChildIdx=function(e,t){var n=ve,r=new Array,i=n.getVidx(e,t);"03"==e.substr(t,2)?r.push(i+2):r.push(i);for(var s=n.getVblen(e,t),o=i,a=0;;){var u=n.getNextSiblingIdx(e,o);if(null==u||u-i>=2*s)break;if(a>=200)break;r.push(u),o=u,a++}return r},ve.getNthChildIdx=function(e,t,n){return ve.getChildIdx(e,t)[n]},ve.getIdxbyList=function(e,t,n,r){var i,s,o=ve;if(0==n.length){if(void 0!==r&&e.substr(t,2)!==r)throw"checking tag doesn't match: "+e.substr(t,2)+"!="+r;return t}return i=n.shift(),s=o.getChildIdx(e,t),o.getIdxbyList(e,s[i],n,r)},ve.getTLVbyList=function(e,t,n,r){var i=ve,s=i.getIdxbyList(e,t,n);if(void 0===s)throw"can't find nthList object";if(void 0!==r&&e.substr(s,2)!=r)throw"checking tag doesn't match: "+e.substr(s,2)+"!="+r;return i.getTLV(e,s)},ve.getVbyList=function(e,t,n,r,i){var s,o,a=ve;if(void 0===(s=a.getIdxbyList(e,t,n,r)))throw"can't find nthList object";return o=a.getV(e,s),!0===i&&(o=o.substr(2)),o},ve.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=e.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var u=[],l="";for(a=0;a<o.length;a++)128&o[a]?l+=t((127&o[a]).toString(2),7):(l+=t((127&o[a]).toString(2),7),u.push(new String(parseInt(l,2))),l="");var c=n.join(".");return u.length>0&&(c=c+"."+u.join(".")),c},ve.dump=function(e,t,n,r){var i=ve,s=i.getV,o=i.dump,a=i.getChildIdx,u=e;e instanceof fe.asn1.ASN1Object&&(u=e.getEncodedHex());var l=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var c=t.ommit_long_octet;if("01"==u.substr(n,2))return"00"==(h=s(u,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==u.substr(n,2))return r+"INTEGER "+l(h=s(u,n),c)+"\n";if("03"==u.substr(n,2))return r+"BITSTRING "+l(h=s(u,n),c)+"\n";if("04"==u.substr(n,2)){var h=s(u,n);return i.isASN1HEX(h)?(w=r+"OCTETSTRING, encapsulates\n")+o(h,t,0,r+"  "):r+"OCTETSTRING "+l(h,c)+"\n"}if("05"==u.substr(n,2))return r+"NULL\n";if("06"==u.substr(n,2)){var f=s(u,n),d=fe.asn1.ASN1Util.oidHexToInt(f),p=fe.asn1.x509.OID.oid2name(d),v=d.replace(/\./g," ");return""!=p?r+"ObjectIdentifier "+p+" ("+v+")\n":r+"ObjectIdentifier ("+v+")\n"}if("0c"==u.substr(n,2))return r+"UTF8String '"+Ee(s(u,n))+"'\n";if("13"==u.substr(n,2))return r+"PrintableString '"+Ee(s(u,n))+"'\n";if("14"==u.substr(n,2))return r+"TeletexString '"+Ee(s(u,n))+"'\n";if("16"==u.substr(n,2))return r+"IA5String '"+Ee(s(u,n))+"'\n";if("17"==u.substr(n,2))return r+"UTCTime "+Ee(s(u,n))+"\n";if("18"==u.substr(n,2))return r+"GeneralizedTime "+Ee(s(u,n))+"\n";if("30"==u.substr(n,2)){if("3000"==u.substr(n,4))return r+"SEQUENCE {}\n";w=r+"SEQUENCE\n";var g=t;if((2==(_=a(u,n)).length||3==_.length)&&"06"==u.substr(_[0],2)&&"04"==u.substr(_[_.length-1],2)){p=i.oidname(s(u,_[0]));var y=JSON.parse(JSON.stringify(t));y.x509ExtName=p,g=y}for(var m=0;m<_.length;m++)w+=o(u,g,_[m],r+"  ");return w}if("31"==u.substr(n,2)){w=r+"SET\n";var _=a(u,n);for(m=0;m<_.length;m++)w+=o(u,t,_[m],r+"  ");return w}var b=parseInt(u.substr(n,2),16);if(0!=(128&b)){var k=31&b;if(0!=(32&b)){var w=r+"["+k+"]\n";for(_=a(u,n),m=0;m<_.length;m++)w+=o(u,t,_[m],r+"  ");return w}return"68747470"==(h=s(u,n)).substr(0,8)&&(h=Ee(h)),"subjectAltName"===t.x509ExtName&&2==k&&(h=Ee(h)),r+"["+k+"] "+h+"\n"}return r+"UNKNOWN("+u.substr(n,2)+") "+s(u,n)+"\n"},ve.isASN1HEX=function(e){var t=ve;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),i=t.getL(e,0);return e.length-r.length-i.length==2*n},ve.oidname=function(e){var t=fe.asn1;fe.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.x509&&fe.asn1.x509||(fe.asn1.x509={}),fe.asn1.x509.Certificate=function(e){fe.asn1.x509.Certificate.superclass.constructor.call(this);var t=fe.asn1,n=t.DERSequence,r=t.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var e=new fe.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});e.init(this.prvKey),e.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=e.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(e){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=e,this.asn1Sig=new r({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+Fe(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==e&&(void 0!==e.tbscertobj&&(this.asn1TBSCert=e.tbscertobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},i.lang.extend(fe.asn1.x509.Certificate,fe.asn1.ASN1Object),fe.asn1.x509.TBSCertificate=function(e){fe.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=fe.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERTaggedObject,s=t.x509,o=s.Time,a=s.X500Name,u=s.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new i({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(e){this.asn1SerialNumber=new r(e)},this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new s.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new a(e)},this.setNotBeforeByParam=function(e){this.asn1NotBefore=new o(e)},this.setNotAfterByParam=function(e){this.asn1NotAfter=new o(e)},this.setSubjectByParam=function(e){this.asn1Subject=new a(e)},this.setSubjectPublicKey=function(e){this.asn1SubjPKey=new u(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=Ke.getKey(e);this.asn1SubjPKey=new u(t)},this.appendExtension=function(e){this.extensionsArray.push(e)},this.appendExtensionByName=function(e,t){fe.asn1.x509.Extension.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var e=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(e),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new n({array:this.extensionsArray}),r=new i({explicit:!0,tag:"a3",obj:t});this.asn1Array.push(r)}var s=new n({array:this.asn1Array});return this.hTLV=s.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},i.lang.extend(fe.asn1.x509.TBSCertificate,fe.asn1.ASN1Object),fe.asn1.x509.Extension=function(e){fe.asn1.x509.Extension.superclass.constructor.call(this);var t=fe.asn1,n=t.DERObjectIdentifier,r=t.DEROctetString,i=t.DERBoolean,s=t.DERSequence;this.getEncodedHex=function(){var e=new n({oid:this.oid}),t=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(e),this.critical&&o.push(new i),o.push(t),new s({array:o}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},i.lang.extend(fe.asn1.x509.Extension,fe.asn1.ASN1Object),fe.asn1.x509.Extension.appendByNameToArray=function(e,t,n){var r=e.toLowerCase(),i=fe.asn1.x509;if("basicconstraints"==r){var s=new i.BasicConstraints(t);n.push(s)}else if("keyusage"==r)s=new i.KeyUsage(t),n.push(s);else if("crldistributionpoints"==r)s=new i.CRLDistributionPoints(t),n.push(s);else if("extkeyusage"==r)s=new i.ExtKeyUsage(t),n.push(s);else if("authoritykeyidentifier"==r)s=new i.AuthorityKeyIdentifier(t),n.push(s);else if("authorityinfoaccess"==r)s=new i.AuthorityInfoAccess(t),n.push(s);else if("subjectaltname"==r)s=new i.SubjectAltName(t),n.push(s);else{if("issueraltname"!=r)throw"unsupported extension name: "+e;s=new i.IssuerAltName(t),n.push(s)}},fe.asn1.x509.KeyUsage=function(e){fe.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Ze.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new fe.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var n=e.names,r="000000000",i=0;i<n.length;i++)for(var s=0;s<t.length;s++)n[i]===t[s]&&(r=r.substring(0,s)+"1"+r.substring(s+1,r.length));this.asn1ExtnValue=new fe.asn1.DERBitString({bin:r})}},i.lang.extend(fe.asn1.x509.KeyUsage,fe.asn1.x509.Extension),fe.asn1.x509.BasicConstraints=function(e){fe.asn1.x509.BasicConstraints.superclass.constructor.call(this,e),this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new fe.asn1.DERBoolean),this.pathLen>-1&&e.push(new fe.asn1.DERInteger({int:this.pathLen}));var t=new fe.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},i.lang.extend(fe.asn1.x509.BasicConstraints,fe.asn1.x509.Extension),fe.asn1.x509.CRLDistributionPoints=function(e){fe.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=fe.asn1,n=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){this.asn1ExtnValue=new t.DERSequence({array:e})},this.setByOneURI=function(e){var t=new n.GeneralNames([{uri:e}]),r=new n.DistributionPointName(t),i=new n.DistributionPoint({dpobj:r});this.setByDPArray([i])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},i.lang.extend(fe.asn1.x509.CRLDistributionPoints,fe.asn1.x509.Extension),fe.asn1.x509.ExtKeyUsage=function(e){fe.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=fe.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var n=0;n<e.length;n++){var r=new t.DERObjectIdentifier(e[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},i.lang.extend(fe.asn1.x509.ExtKeyUsage,fe.asn1.x509.Extension),fe.asn1.x509.AuthorityKeyIdentifier=function(e){fe.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=fe.asn1,n=t.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var r=new t.DERSequence({array:e});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){this.asn1KID=new fe.asn1.DEROctetString(e)},this.setCertIssuerByParam=function(e){this.asn1CertIssuer=new fe.asn1.x509.X500Name(e)},this.setCertSNByParam=function(e){this.asn1CertSN=new fe.asn1.DERInteger(e)},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn))},i.lang.extend(fe.asn1.x509.AuthorityKeyIdentifier,fe.asn1.x509.Extension),fe.asn1.x509.AuthorityInfoAccess=function(e){fe.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,n=fe.asn1,r=n.DERSequence,i=0;i<e.length;i++){var s=new r({array:[new n.DERObjectIdentifier(e[i].accessMethod),new n.x509.GeneralName(e[i].accessLocation)]});t.push(s)}this.asn1ExtnValue=new r({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},i.lang.extend(fe.asn1.x509.AuthorityInfoAccess,fe.asn1.x509.Extension),fe.asn1.x509.SubjectAltName=function(e){fe.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new fe.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},i.lang.extend(fe.asn1.x509.SubjectAltName,fe.asn1.x509.Extension),fe.asn1.x509.IssuerAltName=function(e){fe.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new fe.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},i.lang.extend(fe.asn1.x509.IssuerAltName,fe.asn1.x509.Extension),fe.asn1.x509.CRL=function(e){fe.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new fe.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new fe.asn1.DERBitString({hex:"00"+this.hexSig});var e=new fe.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+Fe(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==e&&(void 0!==e.tbsobj&&(this.asn1TBSCertList=e.tbsobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},i.lang.extend(fe.asn1.x509.CRL,fe.asn1.ASN1Object),fe.asn1.x509.TBSCertList=function(e){fe.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=fe.asn1,n=t.DERSequence,r=t.x509,i=r.Time;this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new r.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new r.X500Name(e)},this.setThisUpdateByParam=function(e){this.asn1ThisUpdate=new i(e)},this.setNextUpdateByParam=function(e){this.asn1NextUpdate=new i(e)},this.addRevokedCert=function(e,t){var n={};null!=e&&null!=e&&(n.sn=e),null!=t&&null!=t&&(n.time=t);var i=new r.CRLEntry(n);this.aRevokedCert.push(i)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var e=new n({array:this.aRevokedCert});this.asn1Array.push(e)}var t=new n({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},i.lang.extend(fe.asn1.x509.TBSCertList,fe.asn1.ASN1Object),fe.asn1.x509.CRLEntry=function(e){fe.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=fe.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},i.lang.extend(fe.asn1.x509.CRLEntry,fe.asn1.ASN1Object),fe.asn1.x509.X500Name=function(e){fe.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var t,n=fe.asn1,r=n.x509,i=Oe;this.setByString=function(e){var t=e.split("/");t.shift();for(var n=[],i=0;i<t.length;i++)if(t[i].match(/^[^=]+=.+$/))n.push(t[i]);else{var s=n.length-1;n[s]=n[s]+"/"+t[i]}for(i=0;i<n.length;i++)this.asn1Array.push(new r.RDN({str:n[i]}))},this.setByLdapString=function(e){var t=r.X500Name.ldapToOneline(e);this.setByString(t)},this.setByObject=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=new fe.asn1.x509.RDN({str:t+"="+e[t]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new n.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):"object"==typeof e&&this.setByObject(e),void 0!==e.certissuer&&((t=new Ze).hex=i(e.certissuer),this.hTLV=t.getIssuerHex()),void 0!==e.certsubject&&((t=new Ze).hex=i(e.certsubject),this.hTLV=t.getSubjectHex()))},i.lang.extend(fe.asn1.x509.X500Name,fe.asn1.ASN1Object),fe.asn1.x509.X500Name.onelineToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map((function(e){return e.replace(/,/,"\\,")}))).join(",")},fe.asn1.x509.X500Name.ldapToOneline=function(e){for(var t=e.split(","),n=!1,r=[],i=0;t.length>0;i++){var s=t.shift();if(!0===n){var o=(r.pop()+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}return(r=r.map((function(e){return e.replace("/","\\/")}))).reverse(),"/"+r.join("/")},fe.asn1.x509.RDN=function(e){fe.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(e){this.asn1Array.push(new fe.asn1.x509.AttributeTypeAndValue({str:e}))},this.addByMultiValuedString=function(e){for(var t=fe.asn1.x509.RDN.parseString(e),n=0;n<t.length;n++)this.addByString(t[n])},this.getEncodedHex=function(){var e=new fe.asn1.DERSet({array:this.asn1Array});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.addByMultiValuedString(e.str)},i.lang.extend(fe.asn1.x509.RDN,fe.asn1.ASN1Object),fe.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),n=!1,r=[],i=0;t.length>0;i++){var s=t.shift();if(!0===n){var o=(r.pop()+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}var a=!1,u=[];for(i=0;r.length>0;i++){if(s=r.shift(),!0===a){var l=u.pop();s.match(/"$/)?(o=(l+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2"),u.push(o),a=!1):u.push(l+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},fe.asn1.x509.AttributeTypeAndValue=function(e){fe.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var t=fe.asn1;this.setByString=function(e){var t=e.match(/^([^=]+)=(.+)$/);if(!t)throw"malformed attrTypeAndValueStr: "+e;this.setByAttrTypeAndValueStr(t[1],t[2])},this.setByAttrTypeAndValueStr=function(e,t){this.typeObj=fe.asn1.x509.OID.atype2obj(e);var n="utf8";"C"==e&&(n="prn"),this.valueObj=this.getValueObj(n,t)},this.getValueObj=function(e,n){if("utf8"==e)return new t.DERUTF8String({str:n});if("prn"==e)return new t.DERPrintableString({str:n});if("tel"==e)return new t.DERTeletexString({str:n});if("ia5"==e)return new t.DERIA5String({str:n});throw"unsupported directory string type: type="+e+" value="+n},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.setByString(e.str)},i.lang.extend(fe.asn1.x509.AttributeTypeAndValue,fe.asn1.ASN1Object),fe.asn1.x509.SubjectPublicKeyInfo=function(e){fe.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=fe.asn1,n=t.DERInteger,r=t.DERBitString,i=t.DERObjectIdentifier,s=t.DERSequence,o=t.ASN1Util.newObject,a=t.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new s({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this.setPubKey=function(e){try{if(e instanceof oe){var t=o({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).getEncodedHex();this.asn1AlgId=new a({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+t})}}catch(l){}try{if(e instanceof fe.crypto.ECDSA){var s=new i({name:e.curveName});this.asn1AlgId=new a({name:"ecPublicKey",asn1params:s}),this.asn1SubjPKey=new r({hex:"00"+e.pubKeyHex})}}catch(l){}try{if(e instanceof fe.crypto.DSA){s=new o({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}),this.asn1AlgId=new a({name:"dsa",asn1params:s});var u=new n({bigint:e.y});this.asn1SubjPKey=new r({hex:"00"+u.getEncodedHex()})}}catch(l){}},void 0!==e&&this.setPubKey(e)},i.lang.extend(fe.asn1.x509.SubjectPublicKeyInfo,fe.asn1.ASN1Object),fe.asn1.x509.Time=function(e){fe.asn1.x509.Time.superclass.constructor.call(this);var t=fe.asn1,n=t.DERUTCTime,r=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=e.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},i.lang.extend(fe.asn1.x509.Time,fe.asn1.ASN1Object),fe.asn1.x509.AlgorithmIdentifier=function(e){fe.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=fe.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var e=[this.asn1Alg];null!==this.asn1Params&&e.push(this.asn1Params);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},i.lang.extend(fe.asn1.x509.AlgorithmIdentifier,fe.asn1.ASN1Object),fe.asn1.x509.GeneralName=function(e){fe.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=fe.asn1,r=n.DEROctetString,i=n.DERIA5String,s=n.DERTaggedObject,o=n.ASN1Object,a=n.x509.X500Name,u=Oe;this.explicit=!1,this.setByParam=function(e){var n=null;if(void 0!==e){if(void 0!==e.rfc822&&(this.type="rfc822",n=new i({str:e[this.type]})),void 0!==e.dns&&(this.type="dns",n=new i({str:e[this.type]})),void 0!==e.uri&&(this.type="uri",n=new i({str:e[this.type]})),void 0!==e.dn&&(this.type="dn",this.explicit=!0,n=new a({str:e.dn})),void 0!==e.ldapdn&&(this.type="dn",this.explicit=!0,n=new a({ldapstr:e.ldapdn})),void 0!==e.certissuer){this.type="dn",this.explicit=!0;var l=null;if((h=e.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(l=u(h)),null==l)throw"certissuer param not cert";(f=new Ze).hex=l;var c=f.getIssuerHex();(n=new o).hTLV=c}if(void 0!==e.certsubj){var h,f;if(this.type="dn",this.explicit=!0,l=null,(h=e.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(l=u(h)),null==l)throw"certsubj param not cert";(f=new Ze).hex=l,c=f.getSubjectHex(),(n=new o).hTLV=c}if(void 0!==e.ip){this.type="ip",this.explicit=!1;var d,p=e.ip,v="malformed IP address";if(p.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(d=Ue("["+p.split(".").join(",")+"]")).length)throw v}else if(p.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))d=Le(p);else{if(!p.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw v;d=p}n=new r({hex:d})}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new s({explicit:this.explicit,tag:t[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},i.lang.extend(fe.asn1.x509.GeneralName,fe.asn1.ASN1Object),fe.asn1.x509.GeneralNames=function(e){fe.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=fe.asn1;this.setByParamArray=function(e){for(var n=0;n<e.length;n++){var r=new t.x509.GeneralName(e[n]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new t.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},i.lang.extend(fe.asn1.x509.GeneralNames,fe.asn1.ASN1Object),fe.asn1.x509.DistributionPointName=function(e){fe.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=fe.asn1,n=t.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e){if(!t.x509.GeneralNames.prototype.isPrototypeOf(e))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=e}},i.lang.extend(fe.asn1.x509.DistributionPointName,fe.asn1.ASN1Object),fe.asn1.x509.DistributionPoint=function(e){fe.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=fe.asn1;this.getEncodedHex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var n=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(n)}return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.dpobj&&(this.asn1DP=e.dpobj)},i.lang.extend(fe.asn1.x509.DistributionPoint,fe.asn1.ASN1Object),fe.asn1.x509.OID=new function(e){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=new fe.asn1.DERObjectIdentifier({oid:this.name2oidList[e]});return this.objCache[e]=t,t},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.atype2oidList[e])throw"AttributeType name undefined: "+e;var t=new fe.asn1.DERObjectIdentifier({oid:this.atype2oidList[e]});return this.objCache[e]=t,t}},fe.asn1.x509.OID.oid2name=function(e){var t=fe.asn1.x509.OID.name2oidList;for(var n in t)if(t[n]==e)return n;return""},fe.asn1.x509.OID.oid2atype=function(e){var t=fe.asn1.x509.OID.atype2oidList;for(var n in t)if(t[n]==e)return n;return e},fe.asn1.x509.OID.name2oid=function(e){var t=fe.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},fe.asn1.x509.X509Util={},fe.asn1.x509.X509Util.newCertPEM=function(e){var t=fe.asn1.x509,n=t.Certificate,r=new(0,t.TBSCertificate);if(void 0===e.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(e.serial),"string"!=typeof e.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(e.sigalg),void 0===e.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(e.issuer),void 0===e.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(e.notbefore),void 0===e.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(e.notafter),void 0===e.subject)throw"subject name undefined.";if(r.setSubjectByParam(e.subject),void 0===e.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var i=0;i<e.ext.length;i++)for(key in e.ext[i])r.appendExtensionByName(key,e.ext[i][key]);if(void 0===e.cakey&&void 0===e.sighex)throw"param cakey and sighex undefined.";var s=null;return e.cakey&&(s=new n({tbscertobj:r,prvkeyobj:!0===e.cakey.isPrivate?e.cakey:Ke.getKey.apply(null,e.cakey)})).sign(),e.sighex&&(s=new n({tbscertobj:r})).setSignatureHex(e.sighex),s.getPEMString()},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.cms&&fe.asn1.cms||(fe.asn1.cms={}),fe.asn1.cms.Attribute=function(e){var t=fe.asn1;t.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var e,n,r;e=new t.DERObjectIdentifier({oid:this.attrTypeOid}),n=new t.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(i){throw"fail valueSet.getEncodedHex in Attribute(1)/"+i}r=new t.DERSequence({array:[e,n]});try{this.hTLV=r.getEncodedHex()}catch(i){throw"failed seq.getEncodedHex in Attribute(2)/"+i}return this.hTLV}},i.lang.extend(fe.asn1.cms.Attribute,fe.asn1.ASN1Object),fe.asn1.cms.ContentType=function(e){var t=fe.asn1;t.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==e&&(n=new t.DERObjectIdentifier(e),this.valueList=[n])},i.lang.extend(fe.asn1.cms.ContentType,fe.asn1.cms.Attribute),fe.asn1.cms.MessageDigest=function(e){var t,n=fe,r=n.asn1,i=r.DEROctetString,s=r.cms;s.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==e&&(e.eciObj instanceof s.EncapsulatedContentInfo&&"string"==typeof e.hashAlg?((t=new i({hex:n.crypto.Util.hashHex(e.eciObj.eContentValueHex,e.hashAlg)})).getEncodedHex(),this.valueList=[t]):((t=new i(e)).getEncodedHex(),this.valueList=[t]))},i.lang.extend(fe.asn1.cms.MessageDigest,fe.asn1.cms.Attribute),fe.asn1.cms.SigningTime=function(e){var t=fe.asn1;if(t.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==e){var n=new t.x509.Time(e);try{n.getEncodedHex()}catch(a){throw"SigningTime.getEncodedHex() failed/"+a}this.valueList=[n]}},i.lang.extend(fe.asn1.cms.SigningTime,fe.asn1.cms.Attribute),fe.asn1.cms.SigningCertificate=function(e){var t=fe,n=t.asn1,r=n.DERSequence,i=n.cms;i.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(e){for(var s=[],o=0;o<e.length;o++){var a=Oe(e[o]),u=t.crypto.Util.hashHex(a,"sha1"),l=new n.DEROctetString({hex:u});l.getEncodedHex();var c=new i.IssuerAndSerialNumber({cert:e[o]});c.getEncodedHex();var h=new r({array:[l,c]});h.getEncodedHex(),s.push(h)}var f=new r({array:s});f.getEncodedHex(),this.valueList=[f]},void 0!==e&&"object"==typeof e.array&&this.setCerts(e.array)},i.lang.extend(fe.asn1.cms.SigningCertificate,fe.asn1.cms.Attribute),fe.asn1.cms.SigningCertificateV2=function(e){var t=fe.asn1,n=t.DERSequence,r=t.x509,i=t.cms,s=fe.crypto;if(i.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(e,o){for(var a=[],u=0;u<e.length;u++){var l=Oe(e[u]),c=[];"sha256"!==o&&c.push(new r.AlgorithmIdentifier({name:o}));var h=s.Util.hashHex(l,o),f=new t.DEROctetString({hex:h});f.getEncodedHex(),c.push(f);var d=new i.IssuerAndSerialNumber({cert:e[u]});d.getEncodedHex(),c.push(d);var p=new n({array:c});p.getEncodedHex(),a.push(p)}var v=new n({array:a});v.getEncodedHex(),this.valueList=[v]},void 0!==e&&"object"==typeof e.array){var o="sha256";"string"==typeof e.hashAlg&&(o=e.hashAlg),this.setCerts(e.array,o)}},i.lang.extend(fe.asn1.cms.SigningCertificateV2,fe.asn1.cms.Attribute),fe.asn1.cms.IssuerAndSerialNumber=function(e){var t=fe.asn1,n=t.DERInteger,r=t.x509.X500Name,i=Ze;t.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=Oe(e),s=new i;s.hex=t;var o=s.getIssuerHex();this.dIssuer=new r,this.dIssuer.hTLV=o;var a=s.getSerialNumberHex();this.dSerial=new n({hex:a})},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(this.dIssuer=e.issuer instanceof r?e.issuer:new r(e.issuer),this.dSerial=e.serial instanceof n?e.serial:new n(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},i.lang.extend(fe.asn1.cms.IssuerAndSerialNumber,fe.asn1.ASN1Object),fe.asn1.cms.AttributeList=function(e){var t=fe.asn1,n=t.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(e){e instanceof n.Attribute&&this.list.push(e)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},i.lang.extend(fe.asn1.cms.AttributeList,fe.asn1.ASN1Object),fe.asn1.cms.SignerInfo=function(e){var t=fe.asn1,n=t.DERTaggedObject,r=t.cms,i=r.AttributeList,s=r.ContentType,o=r.EncapsulatedContentInfo,a=r.MessageDigest,u=r.SignedData,l=t.x509.AlgorithmIdentifier,c=fe.crypto,h=Ke;r.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new t.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new i,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new i,this.setSignerIdentifier=function(e){"string"==typeof e&&-1!=e.indexOf("CERTIFICATE")&&-1!=e.indexOf("BEGIN")&&-1!=e.indexOf("END")&&(this.dSignerIdentifier=new r.IssuerAndSerialNumber({cert:e}))},this.setForContentAndHash=function(e){void 0!==e&&(e.eciObj instanceof o&&(this.dSignedAttrs.add(new s({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new a({eciObj:e.eciObj,hashAlg:e.hashAlg}))),void 0!==e.sdObj&&e.sdObj instanceof u&&-1==e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)&&e.sdObj.digestAlgNameList.push(e.hashAlg),"string"==typeof e.hashAlg&&(this.dDigestAlgorithm=new l({name:e.hashAlg})))},this.sign=function(e,n){this.dSigAlg=new l({name:n});var r=this.dSignedAttrs.getEncodedHex(),i=h.getKey(e),s=new c.Signature({alg:n});s.init(i),s.updateHex(r);var o=s.sign();this.dSig=new t.DEROctetString({hex:o})},this.addUnsigned=function(e){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(e)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof i&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var e=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),r=null;this.dUnsignedAttrs.length()>0&&(r=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var s=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];null!=r&&s.push(r);var o=new t.DERSequence({array:s});return this.hTLV=o.getEncodedHex(),this.hTLV}},i.lang.extend(fe.asn1.cms.SignerInfo,fe.asn1.ASN1Object),fe.asn1.cms.EncapsulatedContentInfo=function(e){var t=fe.asn1,n=t.DERTaggedObject,r=t.DERSequence,i=t.DERObjectIdentifier,s=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new i({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(e){this.dEContentType=e.match(/^[0-2][.][0-9.]+$/)?new i({oid:e}):new i({name:e})},this.setContentValue=function(e){void 0!==e&&("string"==typeof e.hex?this.eContentValueHex=e.hex:"string"==typeof e.str&&(this.eContentValueHex=Se(e.str)))},this.setContentValueHex=function(e){this.eContentValueHex=e},this.setContentValueStr=function(e){this.eContentValueHex=Se(e)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var e=new s({hex:this.eContentValueHex});this.dEContent=new n({obj:e,tag:"a0",explicit:!0});var t=[this.dEContentType];this.isDetached||t.push(this.dEContent);var i=new r({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV}},i.lang.extend(fe.asn1.cms.EncapsulatedContentInfo,fe.asn1.ASN1Object),fe.asn1.cms.ContentInfo=function(e){var t=fe.asn1,n=t.DERTaggedObject,r=t.DERSequence,i=t.x509;fe.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(e){"string"==typeof e&&(this.dContentType=i.OID.name2obj(e))},this.getEncodedHex=function(){var e=new n({obj:this.dContent,tag:"a0",explicit:!0}),t=new r({array:[this.dContentType,e]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(e.type&&this.setContentType(e.type),e.obj&&e.obj instanceof t.ASN1Object&&(this.dContent=e.obj))},i.lang.extend(fe.asn1.cms.ContentInfo,fe.asn1.ASN1Object),fe.asn1.cms.SignedData=function(e){var t=fe.asn1,n=t.ASN1Object,r=t.DERInteger,i=t.DERSet,s=t.DERSequence,o=t.DERTaggedObject,a=t.cms,u=a.EncapsulatedContentInfo,l=a.SignerInfo,c=a.ContentInfo,h=t.x509.AlgorithmIdentifier;fe.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new u,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new l],this.addCertificatesByPEM=function(e){var t=Oe(e),r=new n;r.hTLV=t,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var e=[],t=0;t<this.digestAlgNameList.length;t++){var n=new h({name:this.digestAlgNameList[t]});e.push(n)}this.dDigestAlgs=new i({array:e})}var r=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var a=new i({array:this.certificateList});this.dCerts=new o({obj:a,tag:"a0",explicit:!1})}null!=this.dCerts&&r.push(this.dCerts);var u=new i({array:this.signerInfoList});r.push(u);var l=new s({array:r});return this.hTLV=l.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new c({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return Pe(this.getContentInfoEncodedHex(),"CMS")}},i.lang.extend(fe.asn1.cms.SignedData,fe.asn1.ASN1Object),fe.asn1.cms.CMSUtil=new function(){},fe.asn1.cms.CMSUtil.newSignedData=function(e){var t=fe.asn1,n=t.cms,r=n.SignerInfo,i=n.SigningTime,s=n.SigningCertificate,o=n.SigningCertificateV2,a=t.cades.SignaturePolicyIdentifier,u=new(0,n.SignedData);if(u.dEncapContentInfo.setContentValue(e.content),"object"==typeof e.certs)for(var l=0;l<e.certs.length;l++)u.addCertificatesByPEM(e.certs[l]);for(u.signerInfoList=[],l=0;l<e.signerInfos.length;l++){var c=e.signerInfos[l],h=new r;for(attrName in h.setSignerIdentifier(c.signerCert),h.setForContentAndHash({sdObj:u,eciObj:u.dEncapContentInfo,hashAlg:c.hashAlg}),c.sAttr){var f=c.sAttr[attrName];if("SigningTime"==attrName){var d=new i(f);h.dSignedAttrs.add(d)}"SigningCertificate"==attrName&&(d=new s(f),h.dSignedAttrs.add(d)),"SigningCertificateV2"==attrName&&(d=new o(f),h.dSignedAttrs.add(d)),"SignaturePolicyIdentifier"==attrName&&(d=new a(f),h.dSignedAttrs.add(d))}h.sign(c.signerPrvKey,c.sigAlg),u.signerInfoList.push(h)}return u},fe.asn1.cms.CMSUtil.verifySignedData=function(e){var t=ve.getVbyList,n=ve.getTLVbyList,r=ve.getIdxbyList,i=ve.getChildIdx,s=ve.getTLV,o=ve.oidname,a=fe.crypto.Util.hashHex;void 0===e.cms&&(0,fe.lang.String.isHex)(e.cms);var u=e.cms,l=function(e,s){var a=s.idx;s.signerid_issuer1=n(e,a,[1,0],"30"),s.signerid_serial1=t(e,a,[1,1],"02"),s.hashalg=o(t(e,a,[2,0],"06"));var u=r(e,a,[3],"a0");s.idxSignedAttrs=u,c(e,s,u);var l=i(e,a).length;if(l<6)throw"malformed SignerInfo";s.sigalg=o(t(e,a,[l-2,0],"06")),s.sigval=t(e,a,[l-1],"04")},c=function(e,n,r){var s=i(e,r);n.signedAttrIdxList=s;for(var o=0;o<s.length;o++){var a,u=s[o],l=t(e,u,[0],"06");"2a864886f70d010905"===l?(a=Ee(t(e,u,[1,0])),n.saSigningTime=a):"2a864886f70d010904"===l&&(a=t(e,u,[1,0],"04"),n.saMessageDigest=a)}},h=function(e,t,n,r){n.verifyDetail={};var o=n.verifyDetail,u=t.parse.econtent,l=n.hashalg,c=n.saMessageDigest;o.validMessageDigest=!1,a(u,l)===c&&(o.validMessageDigest=!0),function(e,t,n,r){var o,a=t.parse.certsIdx;if(void 0===t.certs){o=[],t.certkeys=[];for(var u=i(e,a),l=0;l<u.length;l++){var c=s(e,u[l]),h=new Ze;h.readCertHex(c),o[l]=h,t.certkeys[l]=h.getPublicKey()}t.certs=o}else o=t.certs;for(t.cccc=o.length,t.cccci=u.length,l=0;l<o.length;l++){var f=h.getIssuerHex(),d=h.getSerialNumberHex();n.signerid_issuer1===f&&n.signerid_serial1===d&&(n.certkey_idx=l)}}(e,t,n),o.validSignatureValue=!1;var h=n.sigalg,f="31"+s(e,n.idxSignedAttrs).substr(2);n.signedattrshex=f;var d=t.certs[n.certkey_idx].getPublicKey(),p=new fe.crypto.Signature({alg:h});p.init(d),p.updateHex(f);var v=p.verify(n.sigval);o.validSignatureValue_isValid=v,!0===v&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},f={isValid:!1,parse:{}};return function(e,n){if("2a864886f70d010702"!==t(e,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=t(e,0,[1,0,2,1,0]),function(e,t){for(var n,i=3;i<6;i++)if(void 0!==(n=r(e,0,[1,0,i]))){var s=e.substr(n,2);"a0"===s&&(t.certsIdx=n),"a1"===s&&(t.revinfosIdx=n),"31"===s&&(t.signerinfosIdx=n)}}(e,n),n.signerInfos=[],function(e,t){var n=t.signerinfosIdx;if(void 0!==n){var r=i(e,n);t.signerInfoIdxList=r;for(var s=0;s<r.length;s++){var o={idx:r[s]};l(e,o),t.signerInfos.push(o)}}}(e,n)}(u,f.parse),function(e,t){for(var n=t.parse.signerInfos,r=n.length,i=!0,s=0;s<r;s++){var o=n[s];h(e,t,o),o.isValid||(i=!1)}t.isValid=i}(u,f),f},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.tsp&&fe.asn1.tsp||(fe.asn1.tsp={}),fe.asn1.tsp.Accuracy=function(e){var t=fe.asn1,n=t.DERInteger,r=t.DERSequence,i=t.DERTaggedObject;t.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var e=null,t=null,s=null,o=[];if(null!=this.seconds&&(e=new n({int:this.seconds}),o.push(e)),null!=this.millis){var a=new n({int:this.millis});t=new i({obj:a,tag:"80",explicit:!1}),o.push(t)}if(null!=this.micros){var u=new n({int:this.micros});s=new i({obj:u,tag:"81",explicit:!1}),o.push(s)}var l=new r({array:o});return this.hTLV=l.getEncodedHex(),this.hTLV},void 0!==e&&("number"==typeof e.seconds&&(this.seconds=e.seconds),"number"==typeof e.millis&&(this.millis=e.millis),"number"==typeof e.micros&&(this.micros=e.micros))},i.lang.extend(fe.asn1.tsp.Accuracy,fe.asn1.ASN1Object),fe.asn1.tsp.MessageImprint=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==e&&("string"==typeof e.hashAlg&&(this.dHashAlg=new i({name:e.hashAlg})),"string"==typeof e.hashValue&&(this.dHashValue=new r({hex:e.hashValue})))},i.lang.extend(fe.asn1.tsp.MessageImprint,fe.asn1.ASN1Object),fe.asn1.tsp.TimeStampReq=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERBoolean,s=t.DERObjectIdentifier,o=t.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(e){e instanceof a?this.dMessageImprint=e:"object"==typeof e&&(this.dMessageImprint=new a(e))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var e=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&e.push(this.dPolicy),null!=this.dNonce&&e.push(this.dNonce),this.certReq&&e.push(new i);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.mi&&this.setMessageImprint(e.mi),"object"==typeof e.policy&&(this.dPolicy=new s(e.policy)),"object"==typeof e.nonce&&(this.dNonce=new r(e.nonce)),"boolean"==typeof e.certreq&&(this.certReq=e.certreq))},i.lang.extend(fe.asn1.tsp.TimeStampReq,fe.asn1.ASN1Object),fe.asn1.tsp.TSTInfo=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERBoolean,s=t.DERGeneralizedTime,o=t.DERObjectIdentifier,a=t.tsp,u=a.MessageImprint,l=a.Accuracy,c=t.x509.X500Name;if(a.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(e.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(e.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(e.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new u(e.messageImprint)),void 0!==e.serialNumber&&(this.dSerialNumber=new r(e.serialNumber)),void 0!==e.genTime&&(this.dGenTime=new s(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new l(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new i),void 0!==e.nonce&&(this.dNonce=new r(e.nonce)),void 0!==e.tsa&&(this.dTsa=new c(e.tsa))}},i.lang.extend(fe.asn1.tsp.TSTInfo,fe.asn1.ASN1Object),fe.asn1.tsp.TimeStampResp=function(e){var t=fe.asn1,n=t.DERSequence,r=t.ASN1Object,i=t.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dTST&&e.push(this.dTST);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new s(e.status)),void 0!==e.tst&&e.tst instanceof r&&(this.dTST=e.tst.getContentInfo()))},i.lang.extend(fe.asn1.tsp.TimeStampResp,fe.asn1.ASN1Object),fe.asn1.tsp.PKIStatusInfo=function(e){var t=fe.asn1,n=t.DERSequence,r=t.tsp,i=r.PKIStatus,s=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dStatusString&&e.push(this.dStatusString),null!=this.dFailureInfo&&e.push(this.dFailureInfo);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new i(e.status)),"object"==typeof e.statstr&&(this.dStatusString=new s({array:e.statstr})),"object"==typeof e.failinfo&&(this.dFailureInfo=new o(e.failinfo)))},i.lang.extend(fe.asn1.tsp.PKIStatusInfo,fe.asn1.ASN1Object),fe.asn1.tsp.PKIStatus=function(e){var t=fe.asn1,n=t.DERInteger,r=t.tsp,i=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==e)if(void 0!==e.name){var s=i.valueList;if(void 0===s[e.name])throw"name undefined: "+e.name;this.dStatus=new n({int:s[e.name]})}else this.dStatus=new n(e)},i.lang.extend(fe.asn1.tsp.PKIStatus,fe.asn1.ASN1Object),fe.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},fe.asn1.tsp.PKIFreeText=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DERUTF8String;t.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var e=[],t=0;t<this.textList.length;t++)e.push(new r({str:this.textList[t]}));var i=new n({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==e&&"object"==typeof e.array&&(this.textList=e.array)},i.lang.extend(fe.asn1.tsp.PKIFreeText,fe.asn1.ASN1Object),fe.asn1.tsp.PKIFailureInfo=function(e){var t=fe.asn1,n=t.DERBitString,r=t.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var e=new Number(this.value).toString(2),t=new n;return t.setByBinaryString(e),this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e)if("string"==typeof e.name){var i=r.valueList;if(void 0===i[e.name])throw"name undefined: "+e.name;this.value=i[e.name]}else"number"==typeof e.int&&(this.value=e.int)},i.lang.extend(fe.asn1.tsp.PKIFailureInfo,fe.asn1.ASN1Object),fe.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},fe.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},fe.asn1.tsp.SimpleTSAAdapter=function(e){var t=fe.asn1.tsp,n=fe.crypto.Util.hashHex;t.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,r){var i=n(e,r);this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},this.params.tstInfo.serialNumber={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:s},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(fe.asn1.tsp.SimpleTSAAdapter,fe.asn1.tsp.AbstractTSAAdapter),fe.asn1.tsp.FixedTSAAdapter=function(e){var t=fe.asn1.tsp,n=fe.crypto.Util.hashHex;t.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,r){var i=n(e,r);return this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(fe.asn1.tsp.FixedTSAAdapter,fe.asn1.tsp.AbstractTSAAdapter),fe.asn1.tsp.TSPUtil=new function(){},fe.asn1.tsp.TSPUtil.newTimeStampToken=function(e){var t=fe.asn1,n=t.cms,r=t.tsp.TSTInfo,i=new n.SignedData,s=new r(e.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:s}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof e.certs)for(var o=0;o<e.certs.length;o++)i.addCertificatesByPEM(e.certs[o]);var a=i.signerInfoList[0];a.setSignerIdentifier(e.signerCert),a.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:e.hashAlg});var u=new n.SigningCertificate({array:[e.signerCert]});return a.dSignedAttrs.add(u),a.sign(e.signerPrvKey,e.sigAlg),i},fe.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=ve,n=t.getV,r=t.getTLV,i={certreq:!1},s=(0,t.getChildIdx)(e,0);if(s.length<2)throw"TimeStampReq must have at least 2 items";var o=r(e,s[1]);i.mi=fe.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var a=2;a<s.length;a++){var u=s[a],l=e.substr(u,2);if("06"==l){var c=n(e,u);i.policy=t.hextooidstr(c)}"02"==l&&(i.nonce=n(e,u)),"01"==l&&(i.certreq=!0)}return i},fe.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=ve,n=t.getChildIdx,r=t.getV,i=t.getIdxbyList,s={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";n(e,0);var o=r(e,i(e,0,[0,0])),a=t.hextooidstr(o),u=fe.asn1.x509.OID.oid2name(a);if(""==u)throw"hashAlg name undefined: "+a;var l=u,c=i(e,0,[1]);return s.hashAlg=l,s.hashValue=r(e,c),s},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.cades&&fe.asn1.cades||(fe.asn1.cades={}),fe.asn1.cades.SignaturePolicyIdentifier=function(e){var t=fe.asn1,n=t.DERObjectIdentifier,r=t.DERSequence,i=t.cades,s=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==e&&"string"==typeof e.oid&&"object"==typeof e.hash){var o=new r({array:[new n({oid:e.oid}),new s(e.hash)]});this.valueList=[o]}},i.lang.extend(fe.asn1.cades.SignaturePolicyIdentifier,fe.asn1.cms.Attribute),fe.asn1.cades.OtherHashAlgAndValue=function(e){var t=fe.asn1,n=t.DERSequence,r=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var e=new n({array:[this.dAlg,this.dHash]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&"string"==typeof e.alg&&"string"==typeof e.hash&&(this.dAlg=new i({name:e.alg}),this.dHash=new r({hex:e.hash}))},i.lang.extend(fe.asn1.cades.OtherHashAlgAndValue,fe.asn1.ASN1Object),fe.asn1.cades.SignatureTimeStamp=function(e){var t=fe.asn1,n=t.ASN1Object;if(t.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==e){if(void 0!==e.res)if("string"==typeof e.res&&e.res.match(/^[0-9A-Fa-f]+$/));else if(!(e.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==e.tst)if("string"==typeof e.tst&&e.tst.match(/^[0-9A-Fa-f]+$/)){var r=new n;this.tstHex=e.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(e.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},i.lang.extend(fe.asn1.cades.SignatureTimeStamp,fe.asn1.cms.Attribute),fe.asn1.cades.CompleteCertificateRefs=function(e){var t=fe.asn1.cades;t.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(e){this.valueList=[];for(var n=0;n<e.length;n++){var r=new t.OtherCertID(e[n]);this.valueList.push(r)}},void 0!==e&&"object"==typeof e&&"number"==typeof e.length&&this.setByArray(e)},i.lang.extend(fe.asn1.cades.CompleteCertificateRefs,fe.asn1.cms.Attribute),fe.asn1.cades.OtherCertID=function(e){var t=fe.asn1,n=t.cms,r=t.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(e){this.dOtherCertHash=new r.OtherHash(e),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(e))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var e=[this.dOtherCertHash];null!=this.dIssuerSerial&&e.push(this.dIssuerSerial);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),"object"==typeof e&&(!1===e.hasis&&(this.hasIssuerSerial=!1),"string"==typeof e.cert&&this.setByCertPEM(e.cert)))},i.lang.extend(fe.asn1.cades.OtherCertID,fe.asn1.ASN1Object),fe.asn1.cades.OtherHash=function(e){var t=fe.asn1,n=t.cades,r=n.OtherHashAlgAndValue,i=fe.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(e){if(-1==e.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var t=Oe(e),n=i(t,this.alg);this.dOtherHash=new r({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==e)if("string"==typeof e)if(-1!=e.indexOf("-----BEGIN "))this.setByCertPEM(e);else{if(!e.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new t.DEROctetString({hex:e})}else"object"==typeof e&&("string"==typeof e.cert?("string"==typeof e.alg&&(this.alg=e.alg),this.setByCertPEM(e.cert)):this.dOtherHash=new r(e))},i.lang.extend(fe.asn1.cades.OtherHash,fe.asn1.ASN1Object),fe.asn1.cades.CAdESUtil=new function(){},fe.asn1.cades.CAdESUtil.addSigTS=function(e,t,n){},fe.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=ve.getChildIdx,n=ve.getTLV,r=ve.getIdxbyList,i=fe.asn1,s=i.ASN1Object,o=i.cms.SignedData,a=i.cades.CAdESUtil,u={};if("06092a864886f70d010702"!=(0,ve.getTLVbyList)(e,0,[0]))throw"hex is not CMS SignedData";var l=t(e,r(e,0,[1,0]));if(l.length<4)throw"num of SignedData elem shall be 4 at least";var c=l.shift();u.version=n(e,c);var h=l.shift();u.algs=n(e,h);var f=l.shift();u.encapcontent=n(e,f),u.certs=null,u.revs=null,u.si=[];var d=l.shift();"a0"==e.substr(d,2)&&(u.certs=n(e,d),d=l.shift()),"a1"==e.substr(d,2)&&(u.revs=n(e,d),d=l.shift());var p=d;if("31"!=e.substr(p,2))throw"Can't find signerInfos";for(var v=t(e,p),g=0;g<v.length;g++){var y=a.parseSignerInfoForAddingUnsigned(e,v[g],g);u.si[g]=y}var m=null;for(u.obj=new o,(m=new s).hTLV=u.version,u.obj.dCMSVersion=m,(m=new s).hTLV=u.algs,u.obj.dDigestAlgs=m,(m=new s).hTLV=u.encapcontent,u.obj.dEncapContentInfo=m,(m=new s).hTLV=u.certs,u.obj.dCerts=m,u.obj.signerInfoList=[],g=0;g<u.si.length;g++)u.obj.signerInfoList.push(u.si[g].obj);return u},fe.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,n){var r=ve.getTLV,i=ve.getV,s=fe.asn1,o=s.ASN1Object,a=s.cms,u=a.AttributeList,l=a.SignerInfo,c={},h=(0,ve.getChildIdx)(e,t);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var f=h.shift();c.version=r(e,f);var d=h.shift();c.si=r(e,d);var p=h.shift();c.digalg=r(e,p);var v=h.shift();c.sattrs=r(e,v);var g=h.shift();c.sigalg=r(e,g);var y=h.shift();c.sig=r(e,y),c.sigval=i(e,y);var m=null;return c.obj=new l,(m=new o).hTLV=c.version,c.obj.dCMSVersion=m,(m=new o).hTLV=c.si,c.obj.dSignerIdentifier=m,(m=new o).hTLV=c.digalg,c.obj.dDigestAlgorithm=m,(m=new o).hTLV=c.sattrs,c.obj.dSignedAttrs=m,(m=new o).hTLV=c.sigalg,c.obj.dSigAlg=m,(m=new o).hTLV=c.sig,c.obj.dSig=m,c.obj.dUnsignedAttrs=new u,c},void 0!==fe.asn1.csr&&fe.asn1.csr||(fe.asn1.csr={}),fe.asn1.csr.CertificationRequest=function(e){var t=fe,n=t.asn1,r=n.DERBitString,i=n.DERSequence,s=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(e,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new s.AlgorithmIdentifier({name:e}),sig=new t.crypto.Signature({alg:e}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var o=new i({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=o.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return Pe(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==e&&void 0!==e.csrinfo&&(this.asn1CSRInfo=e.csrinfo)},i.lang.extend(fe.asn1.csr.CertificationRequest,fe.asn1.ASN1Object),fe.asn1.csr.CertificationRequestInfo=function(e){var t=fe.asn1,n=t.DERInteger,r=t.DERSequence,i=t.DERSet,s=t.DERNull,o=t.DERTaggedObject,a=t.DERObjectIdentifier,u=t.x509,l=u.X500Name,c=u.Extension,h=Ke;t.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(e){this.asn1Subject=new l(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=h.getKey(e);this.asn1SubjPKey=new u.SubjectPublicKeyInfo(t)},this.appendExtensionByName=function(e,t){c.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new r({array:this.extensionsArray}),t=new i({array:[e]}),n=new r({array:[new a({oid:"1.2.840.113549.1.9.14"}),t]}),u=new o({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(u)}else u=new o({explicit:!1,tag:"a0",obj:new s}),this.asn1Array.push(u);var l=new r({array:this.asn1Array});return this.hTLV=l.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},i.lang.extend(fe.asn1.csr.CertificationRequestInfo,fe.asn1.ASN1Object),fe.asn1.csr.CSRUtil=new function(){},fe.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=Ke,n=fe.asn1.csr;if(void 0===e.subject)throw"parameter subject undefined";if(void 0===e.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===e.sigalg)throw"parameter sigalg undefined";if(void 0===e.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new n.CertificationRequestInfo;if(r.setSubjectByParam(e.subject),r.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var i=0;i<e.ext.length;i++)for(key in e.ext[i])r.appendExtensionByName(key,e.ext[i][key]);var s=new n.CertificationRequest({csrinfo:r}),o=t.getKey(e.sbjprvkey);return s.sign(e.sigalg,o),s.getPEMString()},fe.asn1.csr.CSRUtil.getInfo=function(e){var t=ve.getTLVbyList,n={subject:{},pubkey:{}};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=Oe(e,"CERTIFICATE REQUEST");return n.subject.hex=t(r,0,[0,1]),n.subject.name=Ze.hex2dn(n.subject.hex),n.pubkey.hex=t(r,0,[0,2]),n.pubkey.obj=Ke.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==fe&&fe||(fe={}),void 0!==fe.asn1&&fe.asn1||(fe.asn1={}),void 0!==fe.asn1.ocsp&&fe.asn1.ocsp||(fe.asn1.ocsp={}),fe.asn1.ocsp.DEFAULT_HASH="sha1",fe.asn1.ocsp.CertID=function(e){var t=fe.asn1,n=t.DEROctetString,r=t.DERInteger,i=t.DERSequence,s=t.x509.AlgorithmIdentifier,o=t.ocsp,a=o.DEFAULT_HASH,u=fe.crypto.Util.hashHex,l=Ze,c=ve;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(e,t,i,o){void 0===o&&(o=a),this.dHashAlg=new s({name:o}),this.dIssuerNameHash=new n({hex:e}),this.dIssuerKeyHash=new n({hex:t}),this.dSerialNumber=new r({hex:i})},this.setByCert=function(e,t,n){void 0===n&&(n=a);var r=new l;r.readCertPEM(t);var i=new l;i.readCertPEM(e);var s=i.getPublicKeyHex(),o=c.getTLVbyList(s,0,[1,0],"30"),h=r.getSerialNumberHex(),f=u(i.getSubjectHex(),n),d=u(o,n);this.setByValue(f,d,h,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var e=new i({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e){var h=e;if(void 0!==h.issuerCert&&void 0!==h.subjectCert){var f=a;void 0===h.alg&&(f=void 0),this.setByCert(h.issuerCert,h.subjectCert,f)}else{if(void 0===h.namehash||void 0===h.keyhash||void 0===h.serial)throw"invalid constructor arguments";f=a,void 0===h.alg&&(f=void 0),this.setByValue(h.namehash,h.keyhash,h.serial,f)}}},i.lang.extend(fe.asn1.ocsp.CertID,fe.asn1.ASN1Object),fe.asn1.ocsp.Request=function(e){var t=fe.asn1,n=t.DERSequence,r=t.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){var i=new r.CertID(e);this.dReqCert=i}},i.lang.extend(fe.asn1.ocsp.Request,fe.asn1.ASN1Object),fe.asn1.ocsp.TBSRequest=function(e){var t=fe.asn1,n=t.DERSequence,r=t.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],n=0;n<e.length;n++){var i=new r.Request(e[0]);t.push(i)}this.dRequestList=t},this.getEncodedHex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new n({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:e});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},i.lang.extend(fe.asn1.ocsp.TBSRequest,fe.asn1.ASN1Object),fe.asn1.ocsp.OCSPRequest=function(e){var t=fe.asn1,n=t.DERSequence,r=t.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList){var i=new r.TBSRequest(e);this.dTbsRequest=i}},i.lang.extend(fe.asn1.ocsp.OCSPRequest,fe.asn1.ASN1Object),fe.asn1.ocsp.OCSPUtil={},fe.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,n){var r=fe.asn1.ocsp;return void 0===n&&(n=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:n,issuerCert:e,subjectCert:t}]}).getEncodedHex()},fe.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=ve.getVbyList,n=ve.getIdxbyList,r=(t=ve.getVbyList,ve.getV),i={};try{var o=t(e,0,[0],"0a");i.responseStatus=parseInt(o,16)}catch(s){}if(0!==i.responseStatus)return i;try{var a=n(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(a,2)?i.certStatus="good":"a1"===e.substr(a,2)?(i.certStatus="revoked",i.revocationTime=Ee(t(e,a,[0]))):"82"===e.substr(a,2)&&(i.certStatus="unknown")}catch(s){}try{var u=n(e,0,[1,0,1,0,0,2,0,2]);i.thisUpdate=Ee(r(e,u))}catch(s){}try{var l=n(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(l,2)&&(i.nextUpdate=Ee(t(e,l,[0])))}catch(s){}return i},void 0!==fe&&fe||(fe={}),void 0!==fe.lang&&fe.lang||(fe.lang={}),fe.lang.String=function(){},"function"==typeof Buffer?(de=function(e){return be(new Buffer(e,"utf8").toString("base64"))},pe=function(e){return new Buffer(ke(e),"base64").toString("utf8")}):(de=function(e){return we(Ne(Be(e)))},pe=function(e){return decodeURIComponent(je(Ce(e)))}),fe.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},fe.lang.String.isHex=function(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))},fe.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},fe.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=ke(e),fe.lang.String.isBase64(e))},fe.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:g.algo.MD5,sha1:g.algo.SHA1,sha224:g.algo.SHA224,sha256:g.algo.SHA256,sha384:g.algo.SHA384,sha512:g.algo.SHA512,ripemd160:g.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var s="0001",o="00"+r,a="",u=i-s.length-o.length,l=0;l<u;l+=2)a+="ff";return s+a+o},this.hashString=function(e,t){return new fe.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new fe.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return new fe.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(e)},this.sha256=function(e){return new fe.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(e)},this.sha256Hex=function(e){return new fe.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(e)},this.sha512=function(e){return new fe.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(e)},this.sha512Hex=function(e){return new fe.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(e)}},fe.crypto.Util.md5=function(e){return new fe.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},fe.crypto.Util.ripemd160=function(e){return new fe.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},fe.crypto.Util.SECURERANDOMGEN=new re,fe.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return fe.crypto.Util.SECURERANDOMGEN.nextBytes(t),me(t)},fe.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new C(fe.crypto.Util.getRandomHexOfNbytes(e),16)},fe.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return fe.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],me(n)},fe.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new C(fe.crypto.Util.getRandomHexOfNbits(e),16)},fe.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=fe.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},fe.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var r=t.subtract(e);return fe.crypto.Util.getRandomBigIntegerZeroToMax(r).add(e)},fe.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=fe.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=fe.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=fe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(s){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+s}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=g.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(g.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(s){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+s}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=fe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},fe.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},fe.crypto.MessageDigest.getHashLength=function(e){var t=fe.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},fe.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},fe.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=fe.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{this.mac=g.algo.HMAC.create(fe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(h){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+h}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=g.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(g.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Ae(e)),void(this.pass=g.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=Se(e.utf8)),void 0!==e.rstr&&(t=Ae(e.rstr)),void 0!==e.b64&&(t=k(e.b64)),void 0!==e.b64u&&(t=Ce(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=g.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=fe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},fe.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase())},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw"provider not supported: "+t;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new fe.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n}this.init=function(e,t){var n=null;try{n=void 0===t?Ke.getKey(e):Ke.getKey(e,t)}catch(r){throw"init failed:"+r}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var e=new fe.crypto.ECDSA({curve:this.eccurvename});this.hSign=e.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof oe&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof oe&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof fe.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof fe.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new fe.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,e,this.ecpubhex);if(this.pubKey instanceof oe&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof oe&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==fe.crypto.ECDSA&&this.pubKey instanceof fe.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==fe.crypto.DSA&&this.pubKey instanceof fe.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,this.provName=void 0===e.prov?fe.crypto.Util.DEFAULTPROVIDER[this.algName]:e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=Ke.getKey(e.prvkeypem),this.init(t)}catch(c){throw"fatal error to load pem private key: "+c}}},fe.crypto.Cipher=function(e){},fe.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof oe&&t.isPublic){var r=fe.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.encrypt(e);if("RSAOAEP"===r)return t.encryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},fe.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof oe&&t.isPrivate){var r=fe.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.decrypt(e);if("RSAOAEP"===r)return t.decryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},fe.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof oe){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},fe.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.ECDSA=function(e){var t=new re;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new C(e.bitLength(),t).mod(e.subtract(C.ONE)).add(C.ONE)},this.setNamedCurve=function(e){this.ecparams=fe.crypto.ECParameterDB.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.getBigRandom(this.ecparams.n),t=this.ecparams.G.multiply(e),n=t.getX().toBigInteger(),r=t.getY().toBigInteger(),i=this.ecparams.keylen/4,s=("0000000000"+e.toString(16)).slice(-i),o="04"+("0000000000"+n.toString(16)).slice(-i)+("0000000000"+r.toString(16)).slice(-i);return this.setPrivateKeyHex(s),this.setPublicKeyHex(o),{ecprvhex:s,ecpubhex:o}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new C(t,16),r=this.ecparams.n,i=new C(e,16);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(C.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return fe.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(e,t){var n=t,r=this.ecparams.n,i=C.fromByteArrayUnsigned(e);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(C.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,n){var r,i,s,o=fe.crypto.ECDSA.parseSigHex(t);r=o.r,i=o.s,s=le.decodeFromHex(this.ecparams.curve,n);var a=new C(e,16);return this.verifyRaw(a,r,i,s)},this.verify=function(e,t,n){var r,i,s;if(Bitcoin.Util.isArray(t)){var o=this.parseSig(t);r=o.r,i=o.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";r=t.r,i=t.s}if(n instanceof le)s=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=le.decodeFrom(this.ecparams.curve,n)}var a=C.fromByteArrayUnsigned(e);return this.verifyRaw(a,r,i,s)},this.verifyRaw=function(e,t,n,r){var i=this.ecparams.n,s=this.ecparams.G;if(t.compareTo(C.ONE)<0||t.compareTo(i)>=0)return!1;if(n.compareTo(C.ONE)<0||n.compareTo(i)>=0)return!1;var o=n.modInverse(i),a=e.multiply(o).mod(i),u=t.multiply(o).mod(i);return s.multiply(a).add(r.multiply(u)).getX().toBigInteger().mod(i).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:C.fromByteArrayUnsigned(n),s:C.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:C.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:C.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){var t,n,r,i=fe.crypto.ECDSA.getName,s=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[2,0],"06"),n=s(e,0,[1],"04");try{r=s(e,0,[3,0],"03").substr(2)}catch(u){}}catch(u){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=i(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){var t,n,r,i=fe.crypto.ECDSA.getName,s=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{s(e,0,[1,0],"06"),t=s(e,0,[1,1],"06"),n=s(e,0,[2,0,1],"04");try{r=s(e,0,[2,0,2,0],"03").substr(2)}catch(o){}}catch(o){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=i(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){var t,n,r=fe.crypto.ECDSA.getName,i=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{i(e,0,[0,0],"06"),t=i(e,0,[0,1],"06"),n=i(e,0,[1],"03").substr(2)}catch(u){throw"malformed PKCS#8 ECC public key"}if(this.curveName=r(t),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(e,t){5!==t&&(t=6);var n,r,i=fe.crypto.ECDSA.getName,s=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{n=s(e,0,[0,t,0,1],"06"),r=s(e,0,[0,t,1],"03").substr(2)}catch(u){throw"malformed X.509 certificate ECC public key"}if(this.curveName=i(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},fe.crypto.ECDSA.parseSigHex=function(e){var t=fe.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new C(t.r,16),s:new C(t.s,16)}},fe.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=ve.getChildIdx,n=ve.getV;if("30"!=e.substr(0,2))throw"signature is not a ASN.1 sequence";var r=t(e,0);if(2!=r.length)throw"number of signature ASN.1 sequence elements seem wrong";var i=r[0],s=r[1];if("02"!=e.substr(i,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=e.substr(s,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(e,i),s:n(e,s)}},fe.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=fe.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},fe.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return fe.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},fe.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new C(e,16),r=new C(t,16);return fe.crypto.ECDSA.biRSSigToASN1Sig(n,r)},fe.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=fe.asn1,r=new n.DERInteger({bigint:e}),i=new n.DERInteger({bigint:t});return new n.DERSequence({array:[r,i]}).getEncodedHex()},fe.crypto.ECDSA.getName=function(e){return"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new C(e,16)}this.getByName=function(n){var r=n;if(void 0!==t[r]&&(r=t[n]),void 0!==e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,s,o,a,u,l,c,h,f,d,p){e[r]={};var v=n(s),g=n(o),y=n(a),m=n(u),_=n(l),b=new ce(v,g,y),k=b.decodePointHex("04"+c+h);e[r].name=r,e[r].keylen=i,e[r].curve=b,e[r].G=k,e[r].n=m,e[r].h=_,e[r].oid=d,e[r].info=p;for(var w=0;w<f.length;w++)t[f[w]]=r}},fe.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),fe.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),fe.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),fe.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),fe.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),fe.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),fe.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),fe.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),fe.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),fe.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==fe&&fe||(fe={}),void 0!==fe.crypto&&fe.crypto||(fe.crypto={}),fe.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,n,r,i){this.isPrivate=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=i},this.setPrivateHex=function(e,t,n,r,i){var s,o,a,u,l;s=new C(e,16),o=new C(t,16),a=new C(n,16),u="string"==typeof r&&r.length>1?new C(r,16):null,l=new C(i,16),this.setPrivate(s,o,a,u,l)},this.setPublic=function(e,t,n,r){this.isPublic=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(e,t,n,r){var i,s,o,a;i=new C(e,16),s=new C(t,16),o=new C(n,16),a=new C(r,16),this.setPublic(i,s,o,a)},this.signWithMessageHash=function(e){var t=this.p,n=this.q,r=this.g,i=this.x,s=fe.crypto.Util.getRandomBigIntegerMinToMax(C.ONE.add(C.ONE),n.subtract(C.ONE)),o=new C(e.substr(0,n.bitLength()/4),16),a=r.modPow(s,t).mod(n),u=s.modInverse(n).multiply(o.add(i.multiply(a))).mod(n);return fe.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(e,t){var n=this.p,r=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(t),a=o[0],u=o[1],l=new C(e.substr(0,r.bitLength()/4),16);if(C.ZERO.compareTo(a)>0||a.compareTo(r)>0)throw"invalid DSA signature";if(C.ZERO.compareTo(u)>=0||u.compareTo(r)>0)throw"invalid DSA signature";var c=u.modInverse(r),h=l.multiply(c).mod(r),f=a.multiply(c).mod(r);return 0==i.modPow(h,n).multiply(s.modPow(f,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(e){try{return[new C(ve.getVbyList(e,0,[0],"02"),16),new C(ve.getVbyList(e,0,[1],"02"),16)]}catch(a){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(e){var t,n,r,i,o,a=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{t=a(e,0,[1],"02"),n=a(e,0,[2],"02"),r=a(e,0,[3],"02"),i=a(e,0,[4],"02"),o=a(e,0,[5],"02")}catch(s){throw console.log("EXCEPTION:"+s),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(t,n,r,i,o)},this.readPKCS8PrvKeyHex=function(e){var t,n,r,i,s=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[1,1,0],"02"),n=s(e,0,[1,1,1],"02"),r=s(e,0,[1,1,2],"02"),i=s(e,0,[2,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(t,n,r,null,i)},this.readPKCS8PubKeyHex=function(e){var t,n,r,i,s=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[0,1,0],"02"),n=s(e,0,[0,1,1],"02"),r=s(e,0,[0,1,2],"02"),i=s(e,0,[1,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 DSA public key"}this.setPublicHex(t,n,r,i)},this.readCertPubKeyHex=function(e,t){var n,r,i,o;5!==t&&(t=6);var a=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{n=a(e,0,[0,t,0,1,0],"02"),r=a(e,0,[0,t,0,1,1],"02"),i=a(e,0,[0,t,0,1,2],"02"),o=a(e,0,[0,t,1,0],"02")}catch(s){throw console.log("EXCEPTION:"+s),"malformed X.509 certificate DSA public key"}this.setPublicHex(n,r,i,o)}};var Ke=function(){var e=function(e,n,r){return t(g.AES,e,n,r)},t=function(e,t,n,r){var i=g.enc.Hex.parse(t),s=g.enc.Hex.parse(n),o=g.enc.Hex.parse(r),a={};a.key=s,a.iv=o,a.ciphertext=i;var u=e.decrypt(a,s,{iv:o});return g.enc.Hex.stringify(u)},n=function(e,t,n){return r(g.AES,e,t,n)},r=function(e,t,n,r){var i=g.enc.Hex.parse(t),s=g.enc.Hex.parse(n),o=g.enc.Hex.parse(r),a=e.encrypt(i,s,{iv:o}),u=g.enc.Hex.parse(a.toString());return g.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,r){return t(g.TripleDES,e,n,r)},eproc:function(e,t,n){return r(g.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,r){return t(g.DES,e,n,r)},eproc:function(e,t,n){return r(g.DES,e,t,n)},keylen:8,ivlen:8}},s=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var r=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(t.type=r[1]);var i=-1,s=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),s=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),s=1);var o=e.indexOf("-----END");if(-1!=i&&-1!=o){var a=e.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),t.data=a}return t},o=function(e,t,n){for(var r=n.substring(0,16),s=g.enc.Hex.parse(r),o=g.enc.Utf8.parse(t),a=i[e].keylen+i[e].ivlen,u="",l=null;;){var c=g.algo.MD5.create();if(null!=l&&c.update(l),c.update(o),c.update(s),l=c.finalize(),(u+=g.enc.Hex.stringify(l)).length>=2*a)break}var h={};return h.keyhex=u.substr(0,2*i[e].keylen),h.ivhex=u.substr(2*i[e].keylen,2*i[e].ivlen),h},a=function(e,t,n,r){var s=g.enc.Base64.parse(e),o=g.enc.Hex.stringify(s);return(0,i[t].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(e){return s(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return o(e,t,n)},decryptKeyB64:function(e,t,n,r){return a(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=s(e),r=n.cipher,i=n.ivsalt,u=n.data,l=o(r,t,i);return a(u,r,l.keyhex,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,s){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==s&&null!=s||(s=function(e){var t=g.lib.WordArray.random(e);return g.enc.Hex.stringify(t)}(i[r].ivlen).toUpperCase());var u=function(e,t,n,r){return(0,i[t].eproc)(e,n,r)}(t,r,o(r,n,s).keyhex,s);return a="-----BEGIN "+e+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+s+"\r\n",a+="\r\n",(a+=u.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=ve.getChildIdx,n=ve.getV,r={},i=t(e,0);if(2!=i.length)throw"malformed format: SEQUENCE(0).items != 2: "+i.length;r.ciphertext=n(e,i[1]);var s=t(e,i[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+s.length;if("2a864886f70d01050d"!=n(e,s[0]))throw"this only supports pkcs5PBES2";var o=t(e,s[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var a=t(e,o[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length;if("2a864886f70d0307"!=n(e,a[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(e,a[1]);var u=t(e,o[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=n(e,u[0]))throw"this only supports pkcs5PBKDF2";var l=t(e,u[1]);if(l.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length;r.pbkdf2Salt=n(e,l[0]);var c=n(e,l[1]);try{r.pbkdf2Iter=parseInt(c,16)}catch(h){throw"malformed format pbkdf2Iter: "+c}return r},getPBKDF2KeyHexFromParam:function(e,t){var n=g.enc.Hex.parse(e.pbkdf2Salt),r=g.PBKDF2(t,n,{keySize:6,iterations:e.pbkdf2Iter});return g.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=Oe(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Ke.getPBKDF2KeyHexFromParam(r,t),s={};s.ciphertext=g.enc.Hex.parse(r.ciphertext);var o=g.enc.Hex.parse(i),a=g.enc.Hex.parse(r.encryptionSchemeIV),u=g.TripleDES.decrypt(s,o,{iv:a});return g.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=ve,n=t.getChildIdx,r=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var s=n(e,0);if(3!=s.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(s[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(e,s[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=r(e,o[0]),"06"==e.substr(o[1],2)&&(i.algparam=r(e,o[1])),"04"!=e.substr(s[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=t.getVidx(e,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Oe(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new oe;else if("2a8648ce380401"==n.algoid)t=new fe.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";t=new fe.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=ve.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new oe;else if("2a8648ce380401"===n)t=new fe.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";t=new fe.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=ve.getChildIdx,n=ve.getV,r={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var i=t(e,0);if(2!=i.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(i[0],2))throw"malformed RSA key(code:003)";if(r.n=n(e,i[0]),"02"!=e.substr(i[1],2))throw"malformed RSA key(code:004)";return r.e=n(e,i[1]),r},parsePublicPKCS8Hex:function(e){var t=ve,n=t.getChildIdx,r=t.getV,i={algparam:null},s=n(e,0);if(2!=s.length)throw"outer DERSequence shall have 2 elements: "+s.length;var o=s[0];if("30"!=e.substr(o,2))throw"malformed PKCS8 public key(code:001)";var a=n(e,o);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=r(e,a[0]),"06"==e.substr(a[1],2)?i.algparam=r(e,a[1]):"30"==e.substr(a[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,a[1],[0],"02"),i.algparam.q=t.getVbyList(e,a[1],[1],"02"),i.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(s[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=r(e,s[1]).substr(2),i}}}();Ke.getKey=function(e,t,n){var r,i=(_=ve).getChildIdx,s=_.getVbyList,o=fe.crypto,a=o.ECDSA,u=o.DSA,l=oe,c=Oe,h=Ke;if(void 0!==l&&e instanceof l)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(P=new l).setPublic(e.n,e.e),P;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(P=new l).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),P;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(P=new l).setPrivate(e.n,e.e,e.d),P;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(P=new u).setPublic(e.p,e.q,e.g,e.y),P;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(P=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),P;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(P=new l).setPublic(Ce(e.n),Ce(e.e)),P;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(P=new l).setPrivateEx(Ce(e.n),Ce(e.e),Ce(e.d),Ce(e.p),Ce(e.q),Ce(e.dp),Ce(e.dq),Ce(e.qi)),P;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(P=new l).setPrivate(Ce(e.n),Ce(e.e),Ce(e.d)),P;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var f=(I=new a({curve:e.crv})).ecparams.keylen/4,d=("0000000000"+Ce(e.x)).slice(-f),p=("0000000000"+Ce(e.y)).slice(-f);return I.setPublicKeyHex(v="04"+d+p),I}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){f=(I=new a({curve:e.crv})).ecparams.keylen/4;var v="04"+(d=("0000000000"+Ce(e.x)).slice(-f))+(p=("0000000000"+Ce(e.y)).slice(-f)),g=("0000000000"+Ce(e.d)).slice(-f);return I.setPublicKeyHex(v),I.setPrivateKeyHex(g),I}if("pkcs5prv"===n){var y,m=e,_=ve;if(9===(y=i(m,0)).length)(P=new l).readPKCS5PrvKeyHex(m);else if(6===y.length)(P=new u).readPKCS5PrvKeyHex(m);else{if(!(y.length>2&&"04"===m.substr(y[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(P=new a).readPKCS5PrvKeyHex(m)}return P}if("pkcs8prv"===n)return h.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return h._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return Ze.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return Ze.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var b=Oe(e,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(b)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var k=c(e,"RSA PRIVATE KEY");return h.getKey(k,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var w=s(r=c(e,"DSA PRIVATE KEY"),0,[1],"02"),S=s(r,0,[2],"02"),E=s(r,0,[3],"02"),x=s(r,0,[4],"02"),A=s(r,0,[5],"02");return(P=new u).setPrivate(new C(w,16),new C(S,16),new C(E,16),new C(x,16),new C(A,16)),P}if(-1!=e.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var T=h.getDecryptedKeyHex(e,t),F=new oe;return F.readPKCS5PrvKeyHex(T),F}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var I,P=s(r=h.getDecryptedKeyHex(e,t),0,[1],"04"),O=s(r,0,[2,0],"06"),R=s(r,0,[3,0],"03").substr(2);if(void 0===fe.crypto.OID.oidhex2name[O])throw"undefined OID(hex) in KJUR.crypto.OID: "+O;return(I=new a({curve:fe.crypto.OID.oidhex2name[O]})).setPublicKeyHex(R),I.setPrivateKeyHex(P),I.isPublic=!1,I}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return w=s(r=h.getDecryptedKeyHex(e,t),0,[1],"02"),S=s(r,0,[2],"02"),E=s(r,0,[3],"02"),x=s(r,0,[4],"02"),A=s(r,0,[5],"02"),(P=new u).setPrivate(new C(w,16),new C(S,16),new C(E,16),new C(x,16),new C(A,16)),P;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(e,t);throw"not supported argument"},Ke.generateKeypair=function(e,t){if("RSA"==e){var n=t;(o=new oe).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new oe,i=o.n.toString(16),s=o.e.toString(16);return r.setPublic(i,s),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}if("EC"==e){var o,a,u=t,l=new fe.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new fe.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),o.setPrivateKeyHex(l.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new fe.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}throw"unknown algorithm: "+e},Ke.getPEM=function(e,t,n,r,i,s){var o=fe.asn1,a=o.DERObjectIdentifier,u=o.DERInteger,l=o.ASN1Util.newObject,c=fe.crypto,h=c.DSA,f=c.ECDSA,d=oe;function p(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function v(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function y(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==d&&e instanceof d||void 0!==h&&e instanceof h||void 0!==f&&e instanceof f)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Pe(k=new(0,o.x509.SubjectPublicKeyInfo)(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===n||null==n)&&1==e.isPrivate)return Pe(k=p(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===n||null==n)&&1==e.isPrivate){var m=new a({name:e.curveName}).getEncodedHex(),_=v(e).getEncodedHex(),b="";return(b+=Pe(m,"EC PARAMETERS"))+Pe(_,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===n||null==n)&&1==e.isPrivate)return Pe(k=y(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==n&&null!=n&&1==e.isPrivate){var k=p(e).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",k,n,r,s)}if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==n&&null!=n&&1==e.isPrivate)return k=v(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",k,n,r,s);if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==n&&null!=n&&1==e.isPrivate)return k=y(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",k,n,r,s);var w=function(e,t){var n=C(e,t);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},C=function(e,t){var n=g.lib.WordArray.random(8),r=g.lib.WordArray.random(8),i=g.PBKDF2(t,n,{keySize:6,iterations:100}),s=g.enc.Hex.parse(e),o=g.TripleDES.encrypt(s,i,{iv:r})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=g.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=g.enc.Hex.stringify(r),a};if("PKCS8PRV"==t&&null!=d&&e instanceof d&&1==e.isPrivate){var S=p(e).getEncodedHex();return k=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===n||null==n?Pe(k,"PRIVATE KEY"):Pe(_=w(k,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return S=new l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),k=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===n||null==n?Pe(k,"PRIVATE KEY"):Pe(_=w(k,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return S=new u({bigint:e.x}).getEncodedHex(),k=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===n||null==n?Pe(k,"PRIVATE KEY"):Pe(_=w(k,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Ke.getKeyFromCSRPEM=function(e){var t=Oe(e,"CERTIFICATE REQUEST");return Ke.getKeyFromCSRHex(t)},Ke.getKeyFromCSRHex=function(e){var t=Ke.parseCSRHex(e);return Ke.getKey(t.p8pubkeyhex,null,"pkcs8pub")},Ke.parseCSRHex=function(e){var t=ve.getChildIdx,n=ve.getTLV,r={},i=e;if("30"!=i.substr(0,2))throw"malformed CSR(code:001)";var s=t(i,0);if(s.length<1)throw"malformed CSR(code:002)";if("30"!=i.substr(s[0],2))throw"malformed CSR(code:003)";var o=t(i,s[0]);if(o.length<3)throw"malformed CSR(code:004)";return r.p8pubkeyhex=n(i,o[2]),r},Ke.getJWKFromKey=function(e){var t={};if(e instanceof oe&&e.isPrivate)return t.kty="RSA",t.n=we(e.n.toString(16)),t.e=we(e.e.toString(16)),t.d=we(e.d.toString(16)),t.p=we(e.p.toString(16)),t.q=we(e.q.toString(16)),t.dp=we(e.dmp1.toString(16)),t.dq=we(e.dmq1.toString(16)),t.qi=we(e.coeff.toString(16)),t;if(e instanceof oe&&e.isPublic)return t.kty="RSA",t.n=we(e.n.toString(16)),t.e=we(e.e.toString(16)),t;if(e instanceof fe.crypto.ECDSA&&e.isPrivate){if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=e.getPublicKeyXYHex();return t.kty="EC",t.crv=r,t.x=we(n.x),t.y=we(n.y),t.d=we(e.prvKeyHex),t}if(e instanceof fe.crypto.ECDSA&&e.isPublic){var r;if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=e.getPublicKeyXYHex(),t.kty="EC",t.crv=r,t.x=we(n.x),t.y=we(n.y),t}throw"not supported key object"},oe.getPosArrayOfChildrenFromHex=function(e){return ve.getChildIdx(e,0)},oe.getHexValueArrayOfChildrenFromHex=function(e){var t,n=ve.getV,r=n(e,(t=oe.getPosArrayOfChildrenFromHex(e))[0]),i=n(e,t[1]),s=n(e,t[2]),o=n(e,t[3]),a=n(e,t[4]),u=n(e,t[5]),l=n(e,t[6]),c=n(e,t[7]),h=n(e,t[8]);return(t=new Array).push(r,i,s,o,a,u,l,c,h),t},oe.prototype.readPrivateKeyFromPEMString=function(e){var t=Oe(e),n=oe.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},oe.prototype.readPKCS5PrvKeyHex=function(e){var t=oe.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},oe.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,i,s,o,a,u,l=ve.getVbyList;if(!1===ve.isASN1HEX(e))throw"not ASN.1 hex string";try{t=l(e,0,[2,0,1],"02"),n=l(e,0,[2,0,2],"02"),r=l(e,0,[2,0,3],"02"),i=l(e,0,[2,0,4],"02"),s=l(e,0,[2,0,5],"02"),o=l(e,0,[2,0,6],"02"),a=l(e,0,[2,0,7],"02"),u=l(e,0,[2,0,8],"02")}catch(p){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(t,n,r,i,s,o,a,u)},oe.prototype.readPKCS5PubKeyHex=function(e){var t=ve,n=t.getV;if(!1===t.isASN1HEX(e))throw"keyHex is not ASN.1 hex string";var r=t.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var i=n(e,r[0]),s=n(e,r[1]);this.setPublic(i,s)},oe.prototype.readPKCS8PubKeyHex=function(e){var t=ve;if(!1===t.isASN1HEX(e))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==t.getTLVbyList(e,0,[0,0]))throw"not PKCS8 RSA public key";var n=t.getTLVbyList(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},oe.prototype.readCertPubKeyHex=function(e,t){var n,r;(n=new Ze).readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var ze=new RegExp("");function qe(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e}function We(e,t,n){for(var r="",i=0;r.length<t;)r+=xe(n(Ae(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function Ge(e){for(var t in fe.crypto.Util.DIGESTINFOHEAD){var n=fe.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n)return[t,e.substring(r)]}return[]}function Ze(){var e=ve,t=e.getChildIdx,n=e.getV,r=e.getTLV,i=e.getVbyList,s=e.getTLVbyList,o=e.getIdxbyList,a=e.getVidx,u=e.oidname,l=Ze,h=Oe;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return i(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return u(i(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return l.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return l.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=i(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=i(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return e.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return o(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return Ke.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return u(i(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),r=s(this.hex,0,[0],"30"),i=new fe.crypto.Signature({alg:t});return i.init(e),i.updateHex(r),i.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=o(this.hex,0,[0,7,0],"30"),r=t(this.hex,n);this.aExtInfo=new Array;for(var s=0;s<r.length;s++){var u={critical:!1},l=0;3===t(this.hex,r[s]).length&&(u.critical=!0,l=1),u.oid=e.hextooidstr(i(this.hex,r[s],[0],"06"));var c=o(this.hex,r[s],[1+l]);u.vidx=a(this.hex,c),this.aExtInfo.push(u)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=fe.asn1.x509.OID.name2oid(e)),""!==n)for(var r=0;r<t.length;r++)if(t[r].oid===n)return t[r]},this.getExtBasicConstraints=function(){var e=this.getExtInfo("basicConstraints");if(void 0===e)return e;var t=n(this.hex,e.vidx);if(""===t)return{};if("0101ff"===t)return{cA:!0};if("0101ff02"===t.substr(0,8)){var r=n(t,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";var t=n(this.hex,e.vidx);if(t.length%2!=0||t.length<=2)throw"malformed key usage value";var r=parseInt(t.substr(0,2)),i=parseInt(t.substr(2),16).toString(2);return i.substr(0,i.length-r)},this.getExtKeyUsageString=function(){for(var e=this.getExtKeyUsageBin(),t=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&t.push(Ze.KEYUSAGE_NAME[n]);return t.join(",")},this.getExtSubjectKeyIdentifier=function(){var e=this.getExtInfo("subjectKeyIdentifier");return void 0===e?e:n(this.hex,e.vidx)},this.getExtAuthorityKeyIdentifier=function(){var e=this.getExtInfo("authorityKeyIdentifier");if(void 0===e)return e;for(var i={},s=r(this.hex,e.vidx),o=t(s,0),a=0;a<o.length;a++)"80"===s.substr(o[a],2)&&(i.kid=n(s,o[a]));return i},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var i=new Array,s=r(this.hex,e.vidx);if(""===s)return i;for(var o=t(s,0),a=0;a<o.length;a++)i.push(u(n(s,o[a])));return i},this.getExtSubjectAltName=function(){for(var e=this.getExtSubjectAltName2(),t=new Array,n=0;n<e.length;n++)"DNS"===e[n][0]&&t.push(e[n][1]);return t},this.getExtSubjectAltName2=function(){var e,i,s,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var a=new Array,u=r(this.hex,o.vidx),l=t(u,0),c=0;c<l.length;c++)s=u.substr(l[c],2),e=n(u,l[c]),"81"===s&&(i=Ee(e),a.push(["MAIL",i])),"82"===s&&(i=Ee(e),a.push(["DNS",i])),"84"===s&&(i=Ze.hex2dn(e,0),a.push(["DN",i])),"86"===s&&(i=Ee(e),a.push(["URI",i])),"87"===s&&(i=He(e),a.push(["IP",i]));return a},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var n=new Array,r=t(this.hex,e.vidx),s=0;s<r.length;s++)try{var o=Ee(i(this.hex,r[s],[0,0,0],"86"));n.push(o)}catch(a){}return n},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var n={ocsp:[],caissuer:[]},r=t(this.hex,e.vidx),s=0;s<r.length;s++){var o=i(this.hex,r[s],[0],"06"),a=i(this.hex,r[s],[1],"86");"2b06010505073001"===o&&n.ocsp.push(Ee(a)),"2b06010505073002"===o&&n.caissuer.push(Ee(a))}return n},this.getExtCertificatePolicies=function(){var e=this.getExtInfo("certificatePolicies");if(void 0===e)return e;for(var s=r(this.hex,e.vidx),o=[],a=t(s,0),l=0;l<a.length;l++){var c={},h=t(s,a[l]);if(c.id=u(n(s,h[0])),2===h.length)for(var f=t(s,h[1]),d=0;d<f.length;d++){var p=i(s,f[d],[0],"06");"2b06010505070201"===p?c.cps=Ee(i(s,f[d],[1])):"2b06010505070202"===p&&(c.unotice=Ee(i(s,f[d],[1,0])))}o.push(c)}return o},this.readCertPEM=function(e){this.readCertHex(h(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(c){}},this.getInfo=function(){var e,t,n;if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Ve(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Ve(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var r=0;r<n.length;r++){var i=n[r],s=fe.asn1.x509.OID.oid2name(i.oid);""===s&&(s=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),e+="  "+s+" "+o+":\n","basicConstraints"===s){var a=this.getExtBasicConstraints();void 0===a.cA?e+="    {}\n":(e+="    cA=true",void 0!==a.pathLen&&(e+=", pathLen="+a.pathLen),e+="\n")}else if("keyUsage"===s)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===s)e+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===s){var u=this.getExtAuthorityKeyIdentifier();void 0!==u.kid&&(e+="    kid="+u.kid+"\n")}else if("extKeyUsage"===s)e+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===s)e+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===s)e+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===s){var l=this.getExtAIAInfo();void 0!==l.ocsp&&(e+="    ocsp: "+l.ocsp.join(",")+"\n"),void 0!==l.caissuer&&(e+="    caissuer: "+l.caissuer.join(",")+"\n")}else if("certificatePolicies"===s)for(var c=this.getExtCertificatePolicies(),h=0;h<c.length;h++)void 0!==c[h].id&&(e+="    policy oid: "+c[h].id+"\n"),void 0!==c[h].cps&&(e+="    cps: "+c[h].cps+"\n")}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}ze.compile("[^0-9a-f]","gi"),oe.prototype.sign=function(e,t){var n=function(e){return fe.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(n,t)},oe.prototype.signWithMessageHash=function(e,t){var n=ie(fe.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return qe(this.doPrivate(n).toString(16),this.n.bitLength())},oe.prototype.signPSS=function(e,t,n){var r,i=(r=Ae(e),fe.crypto.Util.hashHex(r,t));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,t,n)},oe.prototype.signWithMessageHashPSS=function(e,t,n){var r,i=xe(e),s=i.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),u=function(e){return fe.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=s;else if(-2===n)n=a-s-2;else if(n<-2)throw"invalid salt length";if(a<s+n+2)throw"data too long";var l="";n>0&&(l=new Array(n),(new re).nextBytes(l),l=String.fromCharCode.apply(String,l));var c=xe(u(Ae("\0\0\0\0\0\0\0\0"+i+l))),h=[];for(r=0;r<a-n-s-2;r+=1)h[r]=0;var f=String.fromCharCode.apply(String,h)+"\x01"+l,d=We(c,f.length,u),p=[];for(r=0;r<f.length;r+=1)p[r]=f.charCodeAt(r)^d.charCodeAt(r);for(p[0]&=~(65280>>8*a-o&255),r=0;r<s;r++)p.push(c.charCodeAt(r));return p.push(188),qe(this.doPrivate(new C(p)).toString(16),this.n.bitLength())},oe.prototype.verify=function(e,t){var n=ie(t=(t=t.replace(ze,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Ge(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var i=r[0];return r[1]==function(e){return fe.crypto.Util.hashString(e,i)}(e)},oe.prototype.verifyWithMessageHash=function(e,t){var n=ie(t=(t=t.replace(ze,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Ge(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==e},oe.prototype.verifyPSS=function(e,t,n,r){var i,s=(i=Ae(e),fe.crypto.Util.hashHex(i,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(s,t,n,r)},oe.prototype.verifyWithMessageHashPSS=function(e,t,n,r){var i=new C(t,16);if(i.bitLength()>this.n.bitLength())return!1;var s,o=function(e){return fe.crypto.Util.hashHex(e,n)},a=xe(e),u=a.length,l=this.n.bitLength()-1,c=Math.ceil(l/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=c-u-2;else if(r<-2)throw"invalid salt length";if(c<u+r+2)throw"data too long";var h=this.doPublic(i).toByteArray();for(s=0;s<h.length;s+=1)h[s]&=255;for(;h.length<c;)h.unshift(0);if(188!==h[c-1])throw"encoded message does not end in 0xbc";var f=(h=String.fromCharCode.apply(String,h)).substr(0,c-u-1),d=h.substr(f.length,u),p=65280>>8*c-l&255;if(0!=(f.charCodeAt(0)&p))throw"bits beyond keysize not zero";var v=We(d,f.length,o),g=[];for(s=0;s<f.length;s+=1)g[s]=f.charCodeAt(s)^v.charCodeAt(s);g[0]&=~p;var y=c-u-r-2;for(s=0;s<y;s+=1)if(0!==g[s])throw"leftmost octets not zero";if(1!==g[y])throw"0x01 marker not found";return d===xe(o(Ae("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,g.slice(-r)))))},oe.SALT_LEN_HLEN=-1,oe.SALT_LEN_MAX=-2,oe.SALT_LEN_RECOVER=-2,Ze.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed DN";for(var n=new Array,r=ve.getChildIdx(e,t),i=0;i<r.length;i++)n.push(Ze.hex2rdn(e,r[i]));return"/"+(n=n.map((function(e){return e.replace("/","\\/")}))).join("/")},Ze.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw"malformed RDN";for(var n=new Array,r=ve.getChildIdx(e,t),i=0;i<r.length;i++)n.push(Ze.hex2attrTypeValue(e,r[i]));return(n=n.map((function(e){return e.replace("+","\\+")}))).join("+")},Ze.hex2attrTypeValue=function(e,t){var n=ve,r=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed attribute type and value";var i=n.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var s=r(e,i[0]),o=fe.asn1.ASN1Util.oidHexToInt(s);return fe.asn1.x509.OID.oid2atype(o)+"="+xe(r(e,i[1]))},Ze.getPublicKeyFromCertHex=function(e){var t=new Ze;return t.readCertHex(e),t.getPublicKey()},Ze.getPublicKeyFromCertPEM=function(e){var t=new Ze;return t.readCertPEM(e),t.getPublicKey()},Ze.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,r=ve.getVbyList,i={algparam:null};return(t=new Ze).readCertPEM(e),n=t.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},Ze.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==fe&&fe||(fe={}),void 0!==fe.jws&&fe.jws||(fe.jws={}),fe.jws.JWS=function(){var e=fe.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],s=r[2],o=r[3],a=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!n){var u=Ce(o),l=ie(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=l}var c=pe(i),h=pe(s);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=h,!e(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},fe.jws.JWS.sign=function(e,t,n,r,i){var s,o,a,u=fe.jws.JWS,l=u.readSafeJSONString,c=u.isSafeJSONString,h=fe.crypto,f=h.Mac,d=h.Signature,p=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(s=p.stringify(o=t)),"string"==typeof t){if(!c(s=t))throw"JWS Head is not safe JSON string: "+s;o=l(s)}if(a=n,"object"==typeof n&&(a=p.stringify(n)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,s=p.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var v=null;if(void 0===u.jwsalg2sigalg[e])throw"unsupported alg name: "+e;v=u.jwsalg2sigalg[e];var g=de(s)+"."+de(a),y="";if("Hmac"==v.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var m=new f({alg:v,prov:"cryptojs",pass:r});m.updateString(g),y=m.doFinal()}else{var _;-1!=v.indexOf("withECDSA")?((_=new d({alg:v})).init(r,i),_.updateString(g),hASN1Sig=_.sign(),y=fe.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=v&&((_=new d({alg:v})).init(r,i),_.updateString(g),y=_.sign())}return g+"."+we(y)},fe.jws.JWS.verify=function(e,t,n){var r,i=fe.jws.JWS,s=i.readSafeJSONString,o=fe.crypto,a=o.ECDSA,u=o.Mac,l=o.Signature;r=oe;var c=e.split(".");if(3!==c.length)return!1;var h,f=c[0]+"."+c[1],d=Ce(c[2]),p=s(pe(c[0])),v=null;if(void 0===p.alg)throw"algorithm not specified in header";if(h=(v=p.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+v+":"))throw"algorithm '"+v+"' not accepted in the list";if("none"!=v&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=Ke.getKey(t)),!("RS"!=h&&"PS"!=h||t instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(t instanceof a))throw"key shall be a ECDSA obj for ES* algs";var g=null;if(void 0===i.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+v;if("none"==(g=i.jwsalg2sigalg[v]))throw"not supported";if("Hmac"==g.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var y=new u({alg:g,pass:t});return y.updateString(f),d==y.doFinal()}if(-1!=g.indexOf("withECDSA")){var m,_=null;try{_=a.concatSigToASN1Sig(d)}catch(b){return!1}return(m=new l({alg:g})).init(t),m.updateString(f),m.verify(_)}return(m=new l({alg:g})).init(t),m.updateString(f),m.verify(d)},fe.jws.JWS.parse=function(e){var t,n,r=e.split("."),i={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=r[1],3==r.length&&(n=r[2]),i.headerObj=fe.jws.JWS.readSafeJSONString(pe(r[0])),i.payloadObj=fe.jws.JWS.readSafeJSONString(pe(t)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadPP=null==i.payloadObj?pe(t):JSON.stringify(i.payloadObj,null,"  "),void 0!==n&&(i.sigHex=Ce(n)),i},fe.jws.JWS.verifyJWT=function(e,t,n){var r=fe.jws,i=r.JWS,s=i.readSafeJSONString,o=i.inArray,a=i.includedArray,u=e.split("."),l=u[0],c=u[1],h=(Ce(u[2]),s(pe(l))),f=s(pe(c));if(void 0===h.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(h.alg,n.alg))return!1;if(void 0!==f.iss&&"object"==typeof n.iss&&!o(f.iss,n.iss))return!1;if(void 0!==f.sub&&"object"==typeof n.sub&&!o(f.sub,n.sub))return!1;if(void 0!==f.aud&&"object"==typeof n.aud)if("string"==typeof f.aud){if(!o(f.aud,n.aud))return!1}else if("object"==typeof f.aud&&!a(f.aud,n.aud))return!1;var d=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(d=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+n.gracePeriod<d||void 0!==f.nbf&&"number"==typeof f.nbf&&d<f.nbf-n.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&d<f.iat-n.gracePeriod||void 0!==f.jti&&void 0!==n.jti&&f.jti!==n.jti||!i.verify(e,t,n.alg))},fe.jws.JWS.includedArray=function(e,t){var n=fe.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t))return!1;return!0},fe.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},fe.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},fe.jws.JWS.isSafeJSONString=function(e,t,n){var r=null;try{return"object"!=typeof(r=he(e))?0:r.constructor===Array?0:(t&&(t[n]=r),1)}catch(o){return 0}},fe.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=he(e))?null:t.constructor===Array?null:t}catch(o){return null}},fe.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},fe.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=Ae(t);return we(fe.crypto.Util.hashHex(n,"sha256"))},fe.jws.IntDate={},fe.jws.IntDate.get=function(e){var t=fe.jws.IntDate,n=t.getNow,r=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},fe.jws.IntDate.getZulu=function(e){return De(e)},fe.jws.IntDate.getNow=function(){return~~(new Date/1e3)},fe.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},fe.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==fe&&fe||(fe={}),void 0!==fe.jws&&fe.jws||(fe.jws={}),fe.jws.JWSJS=function(){var e=fe.jws.JWS,t=e.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,n,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=fe.jws.JWS.sign(e,t,this.sPayload,n,r).split(".");this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(p){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+p}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(2!==n.length)return!1;if(!1===this.verifyNth(t,n[0],n[1]))return!1}return!0},this.verifyNth=function(t,n,r){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var i=this.aHeader[t]+"."+this.sPayload+"."+this.aSignature[t],s=!1;try{s=e.verify(i,n,r)}catch(p){return!1}return s},this.readJWSJS=function(e){if("string"==typeof e){var n=t(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.aSignatures=e.signatures}catch(s){throw"malformed JWS-JS JSON object: "+s}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},t.SecureRandom=re,t.rng_seed_time=J,t.BigInteger=C,t.RSAKey=oe,t.ECDSA=fe.crypto.ECDSA,t.DSA=fe.crypto.DSA,t.Signature=fe.crypto.Signature,t.MessageDigest=fe.crypto.MessageDigest,t.Mac=fe.crypto.Mac,t.Cipher=fe.crypto.Cipher,t.KEYUTIL=Ke,t.ASN1HEX=ve,t.X509=Ze,t.CryptoJS=g,t.b64tohex=k,t.b64toBA=w,t.stoBA=ge,t.BAtos=ye,t.BAtohex=me,t.stohex=_e,t.stob64=function(e){return b(_e(e))},t.stob64u=function(e){return be(b(_e(e)))},t.b64utos=function(e){return ye(w(ke(e)))},t.b64tob64u=be,t.b64utob64=ke,t.hex2b64=b,t.hextob64u=we,t.b64utohex=Ce,t.utf8tob64u=de,t.b64utoutf8=pe,t.utf8tob64=function(e){return b(Ne(Be(e)))},t.b64toutf8=function(e){return decodeURIComponent(je(k(e)))},t.utf8tohex=Se,t.hextoutf8=Ee,t.hextorstr=xe,t.rstrtohex=Ae,t.hextob64=Te,t.hextob64nl=Fe,t.b64nltohex=Ie,t.hextopem=Pe,t.pemtohex=Oe,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t},t.zulutomsec=Re,t.zulutosec=De,t.zulutodate=function(e){return new Date(Re(e))},t.datetozulu=function(e,t,n){var r,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var s=e.getUTCMilliseconds();0!==s&&(r+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},t.uricmptohex=Ne,t.hextouricmp=je,t.ipv6tohex=Le,t.hextoipv6=Me,t.hextoip=He,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Le(e);throw t}var n=e.split(".");if(4!==n.length)throw t;var r="";try{for(var i=0;i<4;i++)r+=("0"+parseInt(n[i]).toString(16)).slice(-2);return r}catch(d){throw t}},t.encodeURIComponentAll=Be,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=Ve,t.intarystrtohex=Ue,t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1},t.KJUR=fe,t.crypto=fe.crypto,t.asn1=fe.asn1,t.jws=fe.jws,t.lang=fe.lang},xutz:function(e,t,n){"use strict";(function(e){var r=n("XqMk"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=s&&s.exports===i&&r.a.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();t.a=a}).call(this,n("3UD+")(e))},zUnb:function(e,t,n){"use strict";var r;n.r(t);var i=n("VLs4"),s=n.n(i);function o(e){return"function"==typeof e}var a=!1,u={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=e},get useDeprecatedSynchronousErrorHandling(){return a}};function l(e){setTimeout((function(){throw e}),0)}var c={closed:!0,next:function(e){},error:function(e){if(u.useDeprecatedSynchronousErrorHandling)throw e;l(e)},complete:function(){}},h=Array.isArray||function(e){return e&&"number"==typeof e.length};function f(e){return null!==e&&"object"==typeof e}var d,p=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),v=((d=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(o(r))try{r.call(this)}catch(c){t=c instanceof p?g(c.errors):[c]}if(h(i))for(var a=-1,u=i.length;++a<u;){var l=i[a];if(f(l))try{l.unsubscribe()}catch(c){t=t||[],c instanceof p?t=t.concat(g(c.errors)):t.push(c)}}if(t)throw new p(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new d),d);function g(e){return e.reduce((function(e,t){return e.concat(t instanceof p?t.errors:t)}),[])}var y="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),m=function(e){function t(e,n,r){var i;switch(_classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=c;break;case 1:if(!e){i.destination=c;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(_assertThisInitialized(i))):(i.syncErrorThrowable=!0,i.destination=new _(_assertThisInitialized(i),e));break}default:i.syncErrorThrowable=!0,i.destination=new _(_assertThisInitialized(i),e,n,r)}return i}return _inherits(t,e),_createClass(t,[{key:y,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(t.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i}}]),t}(v),_=function(e){function t(e,n,r,i){var s,a;_classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parentSubscriber=e;var u=_assertThisInitialized(s);return o(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==c&&(o((u=Object.create(n)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(_assertThisInitialized(s)))),s._context=u,s._next=a,s._error=r,s._complete=i,s}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=u.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};u.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),u.useDeprecatedSynchronousErrorHandling)throw n;l(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!u.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return u.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(l(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),t}(m),b="function"==typeof Symbol&&Symbol.observable||"@@observable";function k(){}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C(t)}function C(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:k}var S,E=((S=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof m)return e;if(e[y])return e[y]()}return e||t||n?new m(e,t,n):new m(c)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||u.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),u.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){u.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof m?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=x(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:b,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:C(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=x(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new S(e)},S);function x(e){if(e||(e=u.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var A,T=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),F=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).subject=e,r.subscriber=n,r.closed=!1,r}return _inherits(t,e),_createClass(t,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),t}(v),I=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).destination=e,n}return _inherits(t,e),t}(m),P=((A=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _inherits(t,e),_createClass(t,[{key:y,value:function(){return new I(this)}},{key:"lift",value:function(e){var t=new O(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new T;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new T;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new T;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new T;return _get(_getPrototypeOf(t.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new T;return this.hasError?(e.error(this.thrownError),v.EMPTY):this.isStopped?(e.complete(),v.EMPTY):(this.observers.push(e),new F(this,e))}},{key:"asObservable",value:function(){var e=new E;return e.source=this,e}}]),t}(E)).create=function(e,t){return new O(e,t)},A),O=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).destination=e,r.source=n,r}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):v.EMPTY}}]),t}(P);function R(e){return e&&"function"==typeof e.schedule}var D=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),t}(m),N=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var j="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",L=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function M(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var H=function(e){if(e&&"function"==typeof e[b])return t=e,function(e){var n=t[b]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)};var t,n,r;if(L(e))return N(e);if(M(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,l),e};if(e&&"function"==typeof e[j])return r=e,function(e){for(var t=r[j]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add((function(){t.return&&t.return()})),e};var i=f(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(i," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")};function B(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new D(e,n,r);if(!i.closed)return t instanceof E?t.subscribe(i):H(t)(i)}var V=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),t}(m);function U(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new K(e,t))}}var K=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new z(e,this.project,this.thisArg))}}]),e}(),z=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,i.count=0,i.thisArg=r||_assertThisInitialized(i),i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),t}(m);function q(e,t){return new E((function(n){var r=new v,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function W(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[b]}(e))return function(e,t){return new E((function(n){var r=new v;return r.add(t.schedule((function(){var i=e[b]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(M(e))return function(e,t){return new E((function(n){var r=new v;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(L(e))return q(e,t);if(function(e){return e&&"function"==typeof e[j]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new E((function(n){var r,i=new v;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[j](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(s){return void n.error(s)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof E?e:new E(H(e))}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(G((function(n,r){return W(e(n,r)).pipe(U((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Z(e,n))})}var Z=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Q(e,this.project,this.concurrent))}}]),e}(),Q=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new D(this,t,n),i=this.destination;i.add(r);var s=B(this,e,void 0,void 0,r);s!==r&&i.add(s)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),t}(V);function $(e){return e}function J(){return G($,arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY)}function Y(e,t){return t?q(e,t):new E(N(e))}function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,s=t[t.length-1];return R(s)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof s&&(r=t.pop()),null===i&&1===t.length&&t[0]instanceof E?t[0]:J(r)(Y(t,i))}function ee(){return function(e){return e.lift(new ne(e))}}var te,ne=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new re(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),re=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=n,r}return _inherits(t,e),_createClass(t,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),t}(m),ie={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(te=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new v).add(this.source.subscribe(new se(this.getSubject(),this))),e.closed&&(this._connection=null,e=v.EMPTY)),e}},{key:"refCount",value:function(){return ee()(this)}}]),t}(E).prototype)._subscribe},_isComplete:{value:te._isComplete,writable:!0},getSubject:{value:te.getSubject},connect:{value:te.connect},refCount:{value:te.refCount}},se=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=n,r}return _inherits(t,e),_createClass(t,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),t}(I);function oe(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new ae(r,t));var i=Object.create(n,ie);return i.source=n,i.subjectFactory=r,i}}var ae=function(){function e(t,n){_classCallCheck(this,e),this.subjectFactory=t,this.selector=n}return _createClass(e,[{key:"call",value:function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i}}]),e}();function ue(){return new P}var le="__parameters__";function ce(e,t,n){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var s=_construct(i,t);return o.annotation=s,o;function o(e,t,n){for(var r=e.hasOwnProperty(le)?e[le]:Object.defineProperty(e,le,{value:[]})[le];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(s),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var he=ce("Inject",(function(e){return{token:e}})),fe=ce("Optional"),de=ce("Self"),pe=ce("SkipSelf"),ve=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ge(e){for(var t in e)if(e[t]===ge)return t;throw Error("Could not find renamed property on target object.")}function ye(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function me(e){var t=e[_e];return t&&t.token===e?t:null}var _e=ge({ngInjectableDef:ge});function be(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(be).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var ke=ge({__forward_ref__:ge});function we(e){return e.__forward_ref__=we,e.toString=function(){return be(this())},e}function Ce(e){var t=e;return"function"==typeof t&&t.hasOwnProperty(ke)&&t.__forward_ref__===we?t():e}var Se,Ee="undefined"!=typeof globalThis&&globalThis,xe="undefined"!=typeof window&&window,Ae="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Te="undefined"!=typeof global&&global,Fe=Ee||Te||xe||Ae,Ie=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=ye({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Pe=new Ie("INJECTOR",-1),Oe=new Object,Re=/\n/gm,De="\u0275",Ne="__source",je=ge({provide:String,useValue:ge}),Le=void 0;function Me(e){var t=Le;return Le=e,t}function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve.Default;if(void 0===Le)throw new Error("inject() must be called from an injection context");return null===Le?function(e,t,n){var r=me(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ve.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(be(e),"]"))}(e,0,t):Le.get(e,t&ve.Optional?null:void 0,t)}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve.Default;return(Se||He)(e,t)}var Ve=Be,Ue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe;if(t===Oe){var n=new Error("NullInjectorError: No provider for ".concat(be(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}();function Ke(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&e.charAt(1)==De?e.substr(2):e;var i=be(t);if(t instanceof Array)i=t.map(be).join(" -> ");else if("object"==typeof t){var s=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):be(a)))}i="{".concat(s.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Re,"\n  "))}var ze=function e(){_classCallCheck(this,e)},qe=function e(){_classCallCheck(this,e)};function We(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ge(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var Ze=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Qe=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Fe),$e="ngDebugContext",Je="ngOriginalError",Ye="ngErrorLogger";function Xe(e){return e[$e]}function et(e){return e[Je]}function tt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var nt=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[Ye]||tt}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Xe(e)?Xe(e):this._findContext(et(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=et(e);t&&et(t);)t=et(t);return t}}]),e}(),rt=!0,it=!1;function st(){return it=!0,rt}var ot=function(){function e(t){if(_classCallCheck(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(e,[{key:"getInertBodyElement_XHR",value:function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),at=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ut=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lt(e){return(e=String(e)).match(at)||e.match(ut)?e:(st()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function ct(e){var t={},n=!0,r=!1,i=void 0;try{for(var s,o=e.split(",")[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){t[s.value]=!0}}catch(a){r=!0,i=a}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}function ht(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];for(var a in o)o.hasOwnProperty(a)&&(e[a]=!0)}return e}var ft,dt=ct("area,br,col,hr,img,wbr"),pt=ct("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vt=ct("rp,rt"),gt=ht(vt,pt),yt=ht(dt,ht(pt,ct("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ht(vt,ct("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gt),mt=ct("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_t=ct("srcset"),bt=ht(mt,_t,ct("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ct("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),kt=ct("script,style,template"),wt=function(){function e(){_classCallCheck(this,e),this.sanitizedSomething=!1,this.buf=[]}return _createClass(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!yt.hasOwnProperty(t))return this.sanitizedSomething=!0,!kt.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var s=r.item(i),o=s.name,a=o.toLowerCase();if(bt.hasOwnProperty(a)){var u=s.value;mt[a]&&(u=lt(u)),_t[a]&&(n=u,u=(n=String(n)).split(",").map((function(e){return lt(e.trim())})).join(", ")),this.buf.push(" ",o,'="',Et(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();yt.hasOwnProperty(t)&&!dt.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Et(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),Ct=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,St=/([^\#-~ |!])/g;function Et(e){return e.replace(/&/g,"&amp;").replace(Ct,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(St,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xt(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var At=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),Tt=function e(){_classCallCheck(this,e)},Ft=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),It=/^url\(([^)]+)\)$/,Pt=/([A-Z])/g;function Ot(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}var Rt=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Dt()},e}(),Dt=function(){},Nt=new Ie("The presence of this token marks an injector as being the root injector."),jt=function(e,t,n){return new Ut(e,t,n)},Lt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?jt(e,t,""):jt(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=Oe,e.NULL=new Ue,e.ngInjectableDef=ye({token:e,providedIn:"any",factory:function(){return Be(Pe)}}),e.__NG_ELEMENT_ID__=-1,e}(),Mt=function(e){return e},Ht=[],Bt=Mt,Vt=function(){return Array.prototype.slice.call(arguments)},Ut=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt.NULL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,e),this.parent=n,this.source=r;var i=this._records=new Map;i.set(Lt,{token:Lt,fn:Mt,deps:Ht,value:this,useNew:!1}),i.set(Pe,{token:Pe,fn:Mt,deps:Ht,value:this,useNew:!1}),function e(t,n){if(n)if((n=Ce(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw zt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw zt("Unexpected provider",n);var i=Ce(n.provide),s=function(e){var t=function(e){var t=Ht,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var i=6,s=Ce(n[r]);if(s instanceof Array)for(var o=0,a=s;o<a.length;o++){var u=a[o];u instanceof fe||u==fe?i|=1:u instanceof pe||u==pe?i&=-3:u instanceof de||u==de?i&=-5:s=u instanceof he?u.token:Ce(u)}t.push({token:s,options:i})}}else if(e.useExisting)t=[{token:Ce(e.useExisting),options:6}];else if(!(n||je in e))throw zt("'deps' required",e);return t}(e),n=Mt,r=Ht,i=!1,s=Ce(e.provide);if(je in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=Ce(e.useClass);else{if("function"!=typeof s)throw zt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=s}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var o=t.get(i);if(o){if(o.fn!==Vt)throw Kt(i)}else t.set(i,o={token:n.provide,deps:[],useNew:!1,fn:Vt,value:Ht});o.deps.push({token:i=n,options:6})}var a=t.get(i);if(a&&a.fn==Vt)throw Kt(i);t.set(i,s)}}(i,t)}return _createClass(e,[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve.Default,r=this._records.get(e);try{return function e(t,n,r,i,s,o){try{return function(t,n,r,i,s,o){var a;if(!n||o&ve.SkipSelf)o&ve.Self||(a=i.get(t,s,ve.Default));else{if((a=n.value)==Bt)throw Error("\u0275Circular dependency");if(a===Ht){n.value=Bt;var u=n.useNew,l=n.fn,c=n.deps,h=Ht;if(c.length){h=[];for(var f=0;f<c.length;f++){var d=c[f],p=d.options,v=2&p?r.get(d.token):void 0;h.push(e(d.token,v,r,v||4&p?i:Lt.NULL,1&p?null:Lt.THROW_IF_NOT_FOUND,ve.Default))}}n.value=a=u?_construct(l,_toConsumableArray(h)):l.apply(void 0,h)}}return a}(t,n,r,i,s,o)}catch(a){throw a instanceof Error||(a=new Error(a)),(a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(t),n&&n.value==Bt&&(n.value=Ht),a}}(e,r,this._records,this.parent,t,n)}catch(i){return function(e,t,n,r){var i=e.ngTempTokenPath;throw t[Ne]&&i.unshift(t[Ne]),e.message=Ke("\n"+e.message,i,"StaticInjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(i,e,0,this.source)}}},{key:"toString",value:function(){var e=[];return this._records.forEach((function(t,n){return e.push(be(n))})),"StaticInjector[".concat(e.join(", "),"]")}}]),e}();function Kt(e){return zt("Cannot mix multi providers and regular providers",e)}function zt(e,t){return new Error(Ke(e,t,"StaticInjectorError"))}var qt=new Ie("AnalyzeForEntryComponents"),Wt=null;function Gt(){if(!Wt){var e=Fe.Symbol;if(e&&e.iterator)Wt=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Wt=r)}}return Wt}function Zt(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Qt(e,t){var n=Jt(e),r=Jt(t);return n&&r?function(e,t,n){for(var r=e[Gt()](),i=t[Gt()]();;){var s=r.next(),o=i.next();if(s.done&&o.done)return!0;if(s.done||o.done)return!1;if(!n(s.value,o.value))return!1}}(e,t,Qt):!(n||!(e&&("object"==typeof e||"function"==typeof e))||r||!(t&&("object"==typeof t||"function"==typeof t)))||Zt(e,t)}var $t=function(){function e(t){_classCallCheck(this,e),this.wrapped=t}return _createClass(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function Jt(e){return!!Yt(e)&&(Array.isArray(e)||!(e instanceof Map)&&Gt()in e)}function Yt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Xt(e){return!!e&&"function"==typeof e.then}function en(e){return!!e&&"function"==typeof e.subscribe}var tn=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}(),nn=function e(){_classCallCheck(this,e)},rn=function e(){_classCallCheck(this,e)};function sn(e){var t=Error("No component factory found for ".concat(be(e),". Did you add it to @NgModule.entryComponents?"));return t[on]=e,t}var on="ngComponent",an=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw sn(e)}}]),e}(),un=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new an,e}(),ln=function(){function e(t,n,r){_classCallCheck(this,e),this._parent=n,this._ngModule=r,this._factories=new Map;for(var i=0;i<t.length;i++){var s=t[i];this._factories.set(s.componentType,s)}}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw sn(e);return new cn(t,this._ngModule)}}]),e}(),cn=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}]),t}(rn);function hn(){}var fn=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return dn(e)},e}(),dn=hn,pn=function e(){_classCallCheck(this,e)},vn=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),gn=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return yn()},e}(),yn=hn,mn=function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},_n=new mn("8.2.14"),bn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return Jt(e)}},{key:"create",value:function(e){return new wn(e)}}]),e}(),kn=function(e,t){return t},wn=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||kn}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var s=!n||t&&t.currentIndex<xn(n,r,i)?t:n,o=xn(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);var u=o-r,l=a-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,f=h+c;l<=f&&f<u&&(i[c]=h+1)}i[s.previousIndex]=l-u}}o!==a&&e(s,o,a)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Jt(e))throw new Error("Error trying to diff '".concat(be(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,s=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var a=0;a<this.length;a++)i=this._trackByFn(a,r=e[a]),null!==s&&Zt(s.trackById,i)?(o&&(s=this._verifyReinsertion(s,r,i,a)),Zt(s.item,r)||this._addIdentityChange(s,r)):(s=this._mismatch(s,r,i,a),o=!0),s=s._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Gt()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==s&&Zt(s.trackById,i)?(o&&(s=t._verifyReinsertion(s,e,i,n)),Zt(s.item,e)||t._addIdentityChange(s,e)):(s=t._mismatch(s,e,i,n),o=!0),s=s._next,n++})),this.length=n;return this._truncate(s),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Zt(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Zt(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Cn(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new En),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new En),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),Cn=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Sn=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Zt(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),En=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Sn,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function xn(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var An=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||Yt(e)}},{key:"create",value:function(){return new Tn}}]),e}(),Tn=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Yt(e)))throw new Error("Error trying to diff '".concat(be(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var s=new Fn(e);return this._records.set(e,s),s.currentValue=t,this._addToAdditions(s),s}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Zt(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),Fn=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},In=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new pe,new fe]]}}}]),e}();return e.ngInjectableDef=ye({token:e,providedIn:"root",factory:function(){return new e([new bn])}}),e}(),Pn=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new pe,new fe]]}}}]),e}();return e.ngInjectableDef=ye({token:e,providedIn:"root",factory:function(){return new e([new An])}}),e}(),On=[new An],Rn=new In([new bn]),Dn=new Pn(On),Nn=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return jn(e,fn)},e}(),jn=hn,Ln=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Mn(e,fn)},e}(),Mn=hn;function Hn(e,t,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(t,"'. Current value: '").concat(n,"'.");return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return Bn(n,t),n}(i,e)}function Bn(e,t){e[$e]=t,e[Ye]=t.logError.bind(t)}function Vn(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: ".concat(e))}function Un(e,t,n){var r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function Kn(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function zn(e,t){return e.nodes[t]}function qn(e,t){return e.nodes[t]}function Wn(e,t){return e.nodes[t]}function Gn(e,t){return e.nodes[t]}function Zn(e,t){return e.nodes[t]}var Qn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},$n=function(){},Jn=new Map;function Yn(e){var t=Jn.get(e);return t||(t=be(e)+"_"+Jn.size,Jn.set(e,t)),t}function Xn(e,t,n,r){if($t.isWrapped(r)){r=$t.unwrap(r);var i=e.def.nodes[t].bindingIndex+n,s=$t.unwrap(e.oldValues[i]);e.oldValues[i]=new $t(s)}return r}var er="$$undefined",tr="$$empty";function nr(e){return{id:er,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var rr=0;function ir(e,t,n,r){return!(!(2&e.state)&&Zt(e.oldValues[t.bindingIndex+n],r))}function sr(e,t,n,r){return!!ir(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function or(e,t,n,r){var i=e.oldValues[t.bindingIndex+n];if(1&e.state||!Qt(i,r)){var s=t.bindings[n].name;throw Hn(Qn.createDebugContext(e,t.nodeIndex),"".concat(s,": ").concat(i),"".concat(s,": ").concat(r),0!=(1&e.state))}}function ar(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function ur(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function lr(e,t,n,r){try{return ar(33554432&e.def.nodes[t].flags?qn(e,t).componentView:e),Qn.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function cr(e){return e.parent?qn(e.parent,e.parentNodeDef.nodeIndex):null}function hr(e){return e.parent?e.parentNodeDef.parent:null}function fr(e,t){switch(201347067&t.flags){case 1:return qn(e,t.nodeIndex).renderElement;case 2:return zn(e,t.nodeIndex).renderText}}function dr(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function pr(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function vr(e){return 1<<e%32}function gr(e){var t={},n=0,r={};return e&&e.forEach((function(e){var i=_slicedToArray(e,2),s=i[0],o=i[1];"number"==typeof s?(t[s]=o,n|=vr(s)):r[s]=o})),{matchedQueries:t,references:r,matchedQueryIds:n}}function yr(e,t){return e.map((function(e){var n,r,i;return Array.isArray(e)?(i=(n=_slicedToArray(e,2))[0],r=n[1]):(i=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&t&&Object.defineProperty(r,Ne,{value:t,configurable:!0}),{flags:i,token:r,tokenKey:Yn(r)}}))}function mr(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ze.Native?qn(e,n.renderParent.nodeIndex).renderElement:void 0:t}var _r=new WeakMap;function br(e){var t=_r.get(e);return t||((t=e((function(){return $n}))).factory=e,_r.set(e,t)),t}function kr(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(fr(e,e.def.lastRenderRootNode))),wr(e,t,0,e.def.nodes.length-1,n,r,i)}function wr(e,t,n,r,i,s,o){for(var a=n;a<=r;a++){var u=e.def.nodes[a];11&u.flags&&Sr(e,u,t,i,s,o),a+=u.childCount}}function Cr(e,t,n,r,i,s){for(var o=e;o&&!dr(o);)o=o.parent;for(var a=o.parent,u=hr(o),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=a.def.nodes[c];h.ngContentIndex===t&&Sr(a,h,n,r,i,s),c+=h.childCount}if(!a.parent){var f=e.root.projectableNodes[t];if(f)for(var d=0;d<f.length;d++)Er(e,f[d],n,r,i,s)}}function Sr(e,t,n,r,i,s){if(8&t.flags)Cr(e,t.ngContent.index,n,r,i,s);else{var o=fr(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Er(e,o,n,r,i,s),32&t.bindingFlags&&Er(qn(e,t.nodeIndex).componentView,o,n,r,i,s)):Er(e,o,n,r,i,s),16777216&t.flags)for(var a=qn(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<a.length;u++)kr(a[u],n,r,i,s);1&t.flags&&!t.element.name&&wr(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,s)}}function Er(e,t,n,r,i,s){var o=e.renderer;switch(n){case 1:o.appendChild(r,t);break;case 2:o.insertBefore(r,t,i);break;case 3:o.removeChild(r,t);break;case 0:s.push(t)}}var xr=/^:([^:]+):(.+)$/;function Ar(e){if(":"===e[0]){var t=e.match(xr);return[t[1],t[2]]}return["",e]}function Tr(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}function Fr(e,t,n,r,i,s,o,a,u,l,c,h,f,d,p,v,g,y,m,_){switch(e){case 1:return t+Ir(n)+r;case 2:return t+Ir(n)+r+Ir(i)+s;case 3:return t+Ir(n)+r+Ir(i)+s+Ir(o)+a;case 4:return t+Ir(n)+r+Ir(i)+s+Ir(o)+a+Ir(u)+l;case 5:return t+Ir(n)+r+Ir(i)+s+Ir(o)+a+Ir(u)+l+Ir(c)+h;case 6:return t+Ir(n)+r+Ir(i)+s+Ir(o)+a+Ir(u)+l+Ir(c)+h+Ir(f)+d;case 7:return t+Ir(n)+r+Ir(i)+s+Ir(o)+a+Ir(u)+l+Ir(c)+h+Ir(f)+d+Ir(p)+v;case 8:return t+Ir(n)+r+Ir(i)+s+Ir(o)+a+Ir(u)+l+Ir(c)+h+Ir(f)+d+Ir(p)+v+Ir(g)+y;case 9:return t+Ir(n)+r+Ir(i)+s+Ir(o)+a+Ir(u)+l+Ir(c)+h+Ir(f)+d+Ir(p)+v+Ir(g)+y+Ir(m)+_;default:throw new Error("Does not support more than 9 expressions")}}function Ir(e){return null!=e?e.toString():""}var Pr=new Object,Or=Yn(Lt),Rr=Yn(Pe),Dr=Yn(ze);function Nr(e,t,n,r){return n=Ce(n),{index:-1,deps:yr(r,be(t)),flags:e,token:t,value:n}}function jr(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt.THROW_IF_NOT_FOUND,s=Me(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(i=null),1&t.flags)return e._parent.get(t.token,i);var o=t.tokenKey;switch(o){case Or:case Rr:case Dr:return e}var a,u=e._def.providersByKey[o];if(u){var l=e._providers[u.index];return void 0===l&&(l=e._providers[u.index]=Lr(e,u)),l===Pr?void 0:l}if((a=me(t.token))&&(n=e,null!=(r=a).providedIn&&(function(e,t){return e._def.modules.indexOf(t)>-1}(n,r.providedIn)||"root"===r.providedIn&&n._def.isRoot))){var c=e._providers.length;return e._def.providers[c]=e._def.providersByKey[t.tokenKey]={flags:5120,value:a.factory,deps:[],index:c,token:t.token},e._providers[c]=Pr,e._providers[c]=Lr(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?i:e._parent.get(t.token,i)}finally{Me(s)}}function Lr(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(jr(e,n[0]));case 2:return new t(jr(e,n[0]),jr(e,n[1]));case 3:return new t(jr(e,n[0]),jr(e,n[1]),jr(e,n[2]));default:for(var i=new Array(r),s=0;s<r;s++)i[s]=jr(e,n[s]);return _construct(t,i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(jr(e,n[0]));case 2:return t(jr(e,n[0]),jr(e,n[1]));case 3:return t(jr(e,n[0]),jr(e,n[1]),jr(e,n[2]));default:for(var i=Array(r),s=0;s<r;s++)i[s]=jr(e,n[s]);return t.apply(void 0,i)}}(e,t.value,t.deps);break;case 2048:n=jr(e,t.deps[0]);break;case 256:n=t.value}return n===Pr||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?Pr:n}function Mr(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,Ge(n,t),Qn.dirtyParentQueries(r),Br(r),r}function Hr(e,t,n){var r=t?fr(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),s=n.renderer.nextSibling(r);kr(n,2,i,s,void 0)}function Br(e){kr(e,3,null,null,void 0)}var Vr=new Object;function Ur(e,t,n,r,i,s){return new Kr(e,t,n,r,i,s)}var Kr=function(e){function t(e,n,r,i,s,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).selector=e,a.componentType=n,a._inputs=i,a._outputs=s,a.ngContentSelectors=o,a.viewDefFactory=r,a}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var i=br(this.viewDefFactory),s=i.nodes[0].element.componentProvider.nodeIndex,o=Qn.createRootView(e,t||[],n,i,r,Vr),a=Wn(o,s).instance;return n&&o.renderer.setAttribute(qn(o,0).renderElement,"ng-version",_n.full),new zr(o,new Zr(o),a)}},{key:"inputs",get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e}},{key:"outputs",get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}}]),t}(rn),zr=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(e){this._viewRef.onDestroy(e)}},{key:"location",get:function(){return new fn(qn(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new Yr(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}}]),t}(nn);function qr(e,t,n){return new Wr(e,t,n)}var Wr=function(){function e(t,n,r){_classCallCheck(this,e),this._view=t,this._elDef=n,this._data=r,this._embeddedViews=[]}return _createClass(e,[{key:"clear",value:function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=Mr(this._data,e);Qn.destroyView(t)}}},{key:"get",value:function(e){var t=this._embeddedViews[e];if(t){var n=new Zr(t);return n.attachToViewContainerRef(this),n}return null}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var s=n||this.parentInjector;i||e instanceof cn||(i=s.get(ze));var o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}},{key:"insert",value:function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,s,o,a=e;return n=this._view,r=this._data,i=t,s=a._view,o=r.viewContainer._embeddedViews,null==i&&(i=o.length),s.viewContainerParent=n,We(o,i,s),function(e,t){var n=cr(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,t){if(!(4&t.flags)){e.nodeFlags|=4,t.flags|=4;for(var n=t.parent;n;)n.childFlags|=4,n=n.parent}}(t.parent.def,t.parentNodeDef)}}(r,s),Qn.dirtyParentQueries(s),Hr(r,i>0?o[i-1]:null,s),a.attachToViewContainerRef(this),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,s,o,a=this._embeddedViews.indexOf(e._view);return n=this._data,r=a,i=t,s=n.viewContainer._embeddedViews,o=s[r],Ge(s,r),null==i&&(i=s.length),We(s,i,o),Qn.dirtyParentQueries(o),Br(o),Hr(n,i>0?s[i-1]:null,o),e}},{key:"indexOf",value:function(e){return this._embeddedViews.indexOf(e._view)}},{key:"remove",value:function(e){var t=Mr(this._data,e);t&&Qn.destroyView(t)}},{key:"detach",value:function(e){var t=Mr(this._data,e);return t?new Zr(t):null}},{key:"element",get:function(){return new fn(this._data.renderElement)}},{key:"injector",get:function(){return new Yr(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=hr(e),e=e.parent;return e?new Yr(e,t):new Yr(this._view,null)}},{key:"length",get:function(){return this._embeddedViews.length}}]),e}();function Gr(e){return new Zr(e)}var Zr=function(){function e(t){_classCallCheck(this,e),this._view=t,this._viewContainerRef=null,this._appRef=null}return _createClass(e,[{key:"markForCheck",value:function(){ar(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{Qn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}},{key:"checkNoChanges",value:function(){Qn.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Qn.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,Br(this._view),Qn.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"rootNodes",get:function(){return kr(this._view,0,void 0,void 0,e=[]),e;var e}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}}]),e}();function Qr(e,t){return new $r(e,t)}var $r=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parentView=e,r._def=n,r}return _inherits(t,e),_createClass(t,[{key:"createEmbeddedView",value:function(e){return new Zr(Qn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}},{key:"elementRef",get:function(){return new fn(qn(this._parentView,this._def.nodeIndex).renderElement)}}]),t}(Nn);function Jr(e,t){return new Yr(e,t)}var Yr=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.elDef=n}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt.THROW_IF_NOT_FOUND;return Qn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Yn(e)},t)}}]),e}();function Xr(e,t){var n=e.def.nodes[t];if(1&n.flags){var r=qn(e,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return zn(e,n.nodeIndex).renderText;if(20240&n.flags)return Wn(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index ".concat(t))}function ei(e){return new ti(e.renderer)}var ti=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"selectRootElement",value:function(e){return this.delegate.selectRootElement(e)}},{key:"createElement",value:function(e,t){var n=_slicedToArray(Ar(t),2),r=n[0],i=n[1],s=this.delegate.createElement(i,r);return e&&this.delegate.appendChild(e,s),s}},{key:"createViewRoot",value:function(e){return e}},{key:"createTemplateAnchor",value:function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}},{key:"createText",value:function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}},{key:"projectNodes",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}},{key:"attachViewAfter",value:function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}},{key:"detachView",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}},{key:"destroyView",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"listenGlobal",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"setElementProperty",value:function(e,t,n){this.delegate.setProperty(e,t,n)}},{key:"setElementAttribute",value:function(e,t,n){var r=_slicedToArray(Ar(t),2),i=r[0],s=r[1];null!=n?this.delegate.setAttribute(e,s,n,i):this.delegate.removeAttribute(e,s,i)}},{key:"setBindingDebugInfo",value:function(e,t,n){}},{key:"setElementClass",value:function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}},{key:"setElementStyle",value:function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}},{key:"invokeElementMethod",value:function(e,t,n){e[t].apply(e,n)}},{key:"setText",value:function(e,t){this.delegate.setValue(e,t)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),e}();function ni(e,t,n,r){return new ri(e,t,n,r)}var ri=function(){function e(t,n,r,i){_classCallCheck(this,e),this._moduleType=t,this._parent=n,this._bootstrapComponents=r,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Lr(e,i))}}(this)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve.Default,r=0;return n&ve.SkipSelf?r|=1:n&ve.Self&&(r|=4),jr(this,{token:e,tokenKey:Yn(e),flags:r},t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(be(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var s=e._providers[i];if(s&&s!==Pr){var o=s.ngOnDestroy;"function"!=typeof o||r.has(s)||(o.apply(s),r.add(s))}}}(this),this._destroyListeners.forEach((function(e){return e()}))}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(un)}}]),e}(),ii=Yn((function e(){_classCallCheck(this,e)})),si=Yn(gn),oi=Yn(fn),ai=Yn(Ln),ui=Yn(Nn),li=Yn(Rt),ci=Yn(Lt),hi=Yn(Pe);function fi(e,t,n,r,i,s,o,a){var u=[];if(o)for(var l in o){var c=_slicedToArray(o[l],2),h=c[0],f=c[1];u[h]={flags:8,name:l,nonMinifiedName:f,ns:null,securityContext:null,suffix:null}}var d=[];if(a)for(var p in a)d.push({type:1,propName:p,target:null,eventName:a[p]});return vi(e,t|=16384,n,r,i,i,s,u,d)}function di(e,t,n){return vi(-1,e|=16,null,0,t,t,n)}function pi(e,t,n,r,i){return vi(-1,e,t,0,n,r,i)}function vi(e,t,n,r,i,s,o,a,u){var l=gr(n),c=l.matchedQueries,h=l.references,f=l.matchedQueryIds;u||(u=[]),a||(a=[]),s=Ce(s);var d=yr(o,be(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Tr(a),outputs:u,element:null,provider:{token:i,value:s,deps:d},text:null,query:null,ngContent:null}}function gi(e,t){return bi(e,t)}function yi(e,t){for(var n=e;n.parent&&!dr(n);)n=n.parent;return ki(n.parent,hr(n),!0,t.provider.value,t.provider.deps)}function mi(e,t){var n=ki(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var r=0;r<t.outputs.length;r++){var i=t.outputs[r],s=n[i.propName];if(!en(s))throw new Error("@Output ".concat(i.propName," not initialized in '").concat(n.constructor.name,"'."));var o=s.subscribe(_i(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=o.unsubscribe.bind(o)}return n}function _i(e,t,n){return function(r){return lr(e,t,n,r)}}function bi(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return ki(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){var s=i.length;switch(s){case 0:return r();case 1:return r(Ci(e,t,n,i[0]));case 2:return r(Ci(e,t,n,i[0]),Ci(e,t,n,i[1]));case 3:return r(Ci(e,t,n,i[0]),Ci(e,t,n,i[1]),Ci(e,t,n,i[2]));default:for(var o=Array(s),a=0;a<s;a++)o[a]=Ci(e,t,n,i[a]);return r.apply(void 0,o)}}(e,t.parent,n,r.value,r.deps);case 2048:return Ci(e,t.parent,n,r.deps[0]);case 256:return r.value}}function ki(e,t,n,r,i){var s=i.length;switch(s){case 0:return new r;case 1:return new r(Ci(e,t,n,i[0]));case 2:return new r(Ci(e,t,n,i[0]),Ci(e,t,n,i[1]));case 3:return new r(Ci(e,t,n,i[0]),Ci(e,t,n,i[1]),Ci(e,t,n,i[2]));default:for(var o=new Array(s),a=0;a<s;a++)o[a]=Ci(e,t,n,i[a]);return _construct(r,o)}}var wi={};function Ci(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Lt.THROW_IF_NOT_FOUND;if(8&r.flags)return r.token;var s=e;2&r.flags&&(i=null);var o=r.tokenKey;o===li&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var a=e;a;){if(t)switch(o){case ii:return ei(Si(a,t,n));case si:return Si(a,t,n).renderer;case oi:return new fn(qn(a,t.nodeIndex).renderElement);case ai:return qn(a,t.nodeIndex).viewContainer;case ui:if(t.element.template)return qn(a,t.nodeIndex).template;break;case li:return Gr(Si(a,t,n));case ci:case hi:return Jr(a,t);default:var u=(n?t.element.allProviders:t.element.publicProviders)[o];if(u){var l=Wn(a,u.nodeIndex);return l||(l={instance:bi(a,u)},a.nodes[u.nodeIndex]=l),l.instance}}n=dr(a),t=hr(a),a=a.parent,4&r.flags&&(a=null)}var c=s.root.injector.get(r.token,wi);return c!==wi||i===wi?c:s.root.ngModule.injector.get(r.token,i)}function Si(e,t,n){var r;if(n)r=qn(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!dr(r);)r=r.parent;return r}function Ei(e,t,n,r,i,s){if(32768&n.flags){var o=qn(e,n.parent.nodeIndex).componentView;2&o.def.flags&&(o.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){s=s||{};var a=$t.unwrap(e.oldValues[n.bindingIndex+r]);s[n.bindings[r].nonMinifiedName]=new tn(a,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,s}function xi(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,i=0;i<n.length;i++){var s=n[i],o=s.parent;for(!o&&s.flags&t&&Ti(e,i,s.flags&t,r++),0==(s.childFlags&t)&&(i+=s.childCount);o&&1&o.flags&&i===o.nodeIndex+o.childCount;)o.directChildFlags&t&&(r=Ai(e,o,t,r)),o=o.parent}}function Ai(e,t,n,r){for(var i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){var s=e.def.nodes[i];s.flags&n&&Ti(e,i,s.flags&n,r++),i+=s.childCount}return r}function Ti(e,t,n,r){var i=Wn(e,t);if(i){var s=i.instance;s&&(Qn.setCurrentNode(e,t),1048576&n&&Kn(e,512,r)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&Kn(e,768,r)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}}var Fi=new Ie("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Qe}}),Ii={},Pi=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),Oi=void 0,Ri=["en",[["a","p"],["AM","PM"],Oi],[["AM","PM"],Oi,Oi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Oi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Oi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Oi,"{1} 'at' {0}",Oi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];function Di(e){var t=e.toLowerCase().replace(/_/g,"-"),n=Ii[t];if(n)return n;var r=t.split("-")[0];if(n=Ii[r])return n;if("en"===r)return Ri;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}var Ni=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).__isAsync=n,e}return _inherits(t,e),_createClass(t,[{key:"emit",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,n,r){var i,s=function(e){return null},o=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(s=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(o=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},n&&(s=this.__isAsync?function(e){setTimeout((function(){return n(e)}))}:function(e){n(e)}),r&&(o=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var a=_get(_getPrototypeOf(t.prototype),"subscribe",this).call(this,i,s,o);return e instanceof v&&e.add(a),a}}]),t}(P);function ji(){return this._results[Gt()]()}var Li=function(){function e(){_classCallCheck(this,e),this.dirty=!0,this._results=[],this.changes=new Ni,this.length=0;var t=Gt(),n=e.prototype;n[t]||(n[t]=ji)}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),Mi=new Ie("Application Initializer"),Hi=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Xt(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}(),Bi=new Ie("AppId");function Vi(){return"".concat(Ui()).concat(Ui()).concat(Ui())}function Ui(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ki=new Ie("Platform Initializer"),zi=new Ie("Platform ID"),qi=new Ie("appBootstrapListener"),Wi=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}(),Gi=new Ie("LocaleId"),Zi=new Ie("TranslationsFormat");function Qi(){throw new Error("Runtime compiler is not loaded")}var $i,Ji,Yi=Qi,Xi=Qi,es=Qi,ts=Qi,ns=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=Yi,this.compileModuleAsync=Xi,this.compileModuleAndAllComponentsSync=es,this.compileModuleAndAllComponentsAsync=ts}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}(),rs=new Ie("compilerOptions"),is=function e(){_classCallCheck(this,e)};var ss,os=!(!(ss=Fe.wtf)||!($i=ss.trace)||(Ji=$i.events,0));function as(e,t){return null}var us=os?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ji.createScope(e,t)}:function(e,t){return as},ls=os?function(e,t){return $i.leaveScope(e,t),t}:function(e,t){return t},cs=Promise.resolve(0);function hs(e){"undefined"==typeof Zone?cs.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var fs=function(){function e(t){var n,r=t.enableLongStackTrace,i=void 0!==r&&r;if(_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ni(!1),this.onMicrotaskEmpty=new Ni(!1),this.onStable=new Ni(!1),this.onError=new Ni(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,r,i,s,o){try{return gs(n),e.invokeTask(r,i,s,o)}finally{ys(n)}},onInvoke:function(e,t,r,i,s,o,a){try{return gs(n),e.invoke(r,i,s,o,a)}finally{ys(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,vs(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,ps,ds,ds);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function ds(){}var ps={};function vs(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function gs(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ys(e){e._nesting--,vs(e)}var ms,_s=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ni,this.onMicrotaskEmpty=new Ni,this.onStable=new Ni,this.onError=new Ni}return _createClass(e,[{key:"run",value:function(e){return e()}},{key:"runGuarded",value:function(e){return e()}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e){return e()}}]),e}(),bs=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){fs.assertNotInAngularZone(),hs((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())hs((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}(),ks=function(){function e(){_classCallCheck(this,e),this._applications=new Map,ws.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ws.findTestabilityInTree(this,e,t)}}]),e}(),ws=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Cs=function(e,t,n){return e.get(is).createCompiler([t]).compileModuleAsync(n)},Ss=new Ie("AllowMultipleToken"),Es=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function xs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new Ie(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=As();if(!s||s.injector.get(Ss,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(ms&&!ms.destroyed&&!ms.injector.get(Ss,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ms=e.get(Ts);var t=e.get(Ki,null);t&&t.forEach((function(e){return e()}))}(Lt.create({providers:o,name:r}))}return function(e){var t=As();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function As(){return ms&&!ms.destroyed?ms:null}var Ts=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r=this,i="noop"===(n=t?t.ngZone:void 0)?new _s:("zone.js"===n?void 0:n)||new fs({enableLongStackTrace:st()}),s=[{provide:fs,useValue:i}];return i.run((function(){var t=Lt.create({providers:s,parent:r.injector,name:e.moduleType.name}),n=e.create(t),o=n.injector.get(nt,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Os(r._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(e){o.handleError(e)}})})),function(e,t,i){try{var s=((o=n.injector.get(Hi)).runInitializers(),o.donePromise.then((function(){return r._moduleDoBootstrap(n),n})));return Xt(s)?s.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):s}catch(a){throw t.runOutsideAngular((function(){return e.handleError(a)})),a}var o}(o,i)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Fs({},n);return Cs(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Ps);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(be(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function Fs(e,t){return Array.isArray(t)?t.reduce(Fs,e):Object.assign({},e,t)}var Is,Ps=((Is=function(){function e(t,n,r,i,s,o){var a=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=st(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run((function(){a.tick()}))}});var u=new E((function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular((function(){e.next(a._stable),e.complete()}))})),l=new E((function(e){var t;a._zone.runOutsideAngular((function(){t=a._zone.onStable.subscribe((function(){fs.assertNotInAngularZone(),hs((function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,e.next(!0))}))}))}));var n=a._zone.onUnstable.subscribe((function(){fs.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=X(u,l.pipe((function(e){return ee()(oe(ue)(e))})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof rn?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n instanceof cn?null:this._injector.get(ze),s=n.create(Lt.NULL,[],t||n.selector,i);s.onDestroy((function(){r._unloadComponent(s)}));var o=s.injector.get(bs,null);return o&&s.injector.get(ks).registerApplication(s.location.nativeElement,o),this._loadComponent(s),st()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0;var r=!0,i=!1,s=void 0;try{for(var o,a=this._views[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)o.value.detectChanges()}catch(d){i=!0,s=d}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}if(this._enforceNoNewChanges){var u=!0,l=!1,c=void 0;try{for(var h,f=this._views[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)h.value.checkNoChanges()}catch(d){l=!0,c=d}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}}}catch(p){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(p)}))}finally{this._runningTick=!1,ls(n)}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Os(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(qi,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),Os(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}())._tickScope=us("ApplicationRef#tick()"),Is);function Os(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Rs=function e(){_classCallCheck(this,e)},Ds=function e(){_classCallCheck(this,e)},Ns={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},js=function(){function e(t,n){_classCallCheck(this,e),this._compiler=t,this._config=n||Ns}return _createClass(e,[{key:"load",value:function(e){return this._compiler instanceof ns?this.loadFactory(e):this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=_slicedToArray(e.split("#"),2),i=r[0],s=r[1];return void 0===s&&(s="default"),n("crnd")(i).then((function(e){return e[s]})).then((function(e){return Ls(e,i,s)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),r=t[0],i=t[1],s="NgFactory";return void 0===i&&(i="default",s=""),n("crnd")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(e){return e[i+s]})).then((function(e){return Ls(e,r,i)}))}}]),e}();function Ls(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Ms=function e(t,n){_classCallCheck(this,e),this.name=t,this.callback=n},Hs=function(){function e(t,n,r){_classCallCheck(this,e),this.listeners=[],this.parent=null,this._debugContext=r,this.nativeNode=t,n&&n instanceof Bs&&n.addChild(this)}return _createClass(e,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),e}(),Bs=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,r))).properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return _inherits(t,e),_createClass(t,[{key:"addChild",value:function(e){e&&(this.childNodes.push(e),e.parent=this)}},{key:"removeChild",value:function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}},{key:"insertChildrenAfter",value:function(e,t){var n,r=this,i=this.childNodes.indexOf(e);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(_toConsumableArray(t))),t.forEach((function(t){t.parent&&t.parent.removeChild(t),e.parent=r})))}},{key:"insertBefore",value:function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}},{key:"query",value:function(e){return this.queryAll(e)[0]||null}},{key:"queryAll",value:function(e){var n=[];return function e(n,r,i){n.childNodes.forEach((function(n){n instanceof t&&(r(n)&&i.push(n),e(n,r,i))}))}(this,e,n),n}},{key:"queryAllNodes",value:function(e){var n=[];return function e(n,r,i){n instanceof t&&n.childNodes.forEach((function(n){r(n)&&i.push(n),n instanceof t&&e(n,r,i)}))}(this,e,n),n}},{key:"triggerEventHandler",value:function(e,t){this.listeners.forEach((function(n){n.name==e&&n.callback(t)}))}},{key:"children",get:function(){return this.childNodes.filter((function(e){return e instanceof t}))}}]),t}(Hs),Vs=new Map,Us=function(e){return Vs.get(e)||null};function Ks(e){Vs.set(e.nativeNode,e)}var zs=xs(null,"core",[{provide:zi,useValue:"unknown"},{provide:Ts,deps:[Lt]},{provide:ks,deps:[]},{provide:Wi,deps:[]}]);function qs(){return Rn}function Ws(){return Dn}function Gs(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}var Zs=function e(t){_classCallCheck(this,e)};function Qs(e,t,n,r,i,s){e|=1;var o=gr(t),a=o.matchedQueries,u=o.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a,matchedQueryIds:o.matchedQueryIds,references:u,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?br(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||$n},provider:null,text:null,query:null,ngContent:null}}function $s(e,t,n,r,i,s){var o,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;c||(c=$n);var d=gr(n),p=d.matchedQueries,v=d.references,g=d.matchedQueryIds,y=null,m=null;s&&(y=(o=_slicedToArray(Ar(s),2))[0],m=o[1]),u=u||[];for(var _=new Array(u.length),b=0;b<u.length;b++){var k=_slicedToArray(u[b],3),w=k[0],C=k[1],S=k[2],E=_slicedToArray(Ar(C),2),x=E[0],A=E[1],T=void 0,F=void 0;switch(15&w){case 4:F=S;break;case 1:case 8:T=S}_[b]={flags:w,ns:x,name:A,nonMinifiedName:A,securityContext:T,suffix:F}}l=l||[];for(var I=new Array(l.length),P=0;P<l.length;P++){var O=_slicedToArray(l[P],2),R=O[0],D=O[1];I[P]={type:0,target:R,eventName:D,propName:null}}var N=(a=a||[]).map((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1],i=_slicedToArray(Ar(n),2);return[i[0],i[1],r]}));return f=function(e){if(e&&e.id===er){var t=null!=e.encapsulation&&e.encapsulation!==Ze.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c".concat(rr++):tr}return e&&e.id===tr&&(e=null),e||null}(f),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:g,references:v,ngContentIndex:r,childCount:i,bindings:_,bindingFlags:Tr(_),outputs:I,element:{ns:y,name:m,attrs:N,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:c||$n},provider:null,text:null,query:null,ngContent:null}}function Js(e,t,n){var r,i=n.element,s=e.root.selectorOrNode,o=e.renderer;if(e.parent||!s){r=i.name?o.createElement(i.name,i.ns):o.createComment("");var a=mr(e,t,n);a&&o.appendChild(a,r)}else r=o.selectRootElement(s,!!i.componentRendererType&&i.componentRendererType.encapsulation===Ze.ShadowDom);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var l=_slicedToArray(i.attrs[u],3),c=l[0],h=l[1],f=l[2];o.setAttribute(r,h,f,c)}return r}function Ys(e,t,n,r){for(var i=0;i<n.outputs.length;i++){var s=n.outputs[i],o=Xs(e,n.nodeIndex,(h=s.eventName,(c=s.target)?"".concat(c,":").concat(h):h)),a=s.target,u=e;"component"===s.target&&(a=null,u=t);var l=u.renderer.listen(a||r,s.eventName,o);e.disposables[n.outputIndex+i]=l}var c,h}function Xs(e,t,n){return function(r){return lr(e,t,n,r)}}function eo(e,t,n,r){if(!sr(e,t,n,r))return!1;var i=t.bindings[n],s=qn(e,t.nodeIndex),o=s.renderElement,a=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,s){var o=t.securityContext,a=o?e.root.sanitizer.sanitize(o,s):s;a=null!=a?a.toString():null;var u=e.renderer;null!=s?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(e,i,o,i.ns,a,r);break;case 2:!function(e,t,n,r){var i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,o,a,r);break;case 4:!function(e,t,n,r,i){var s=e.root.sanitizer.sanitize(At.STYLE,i);if(null!=s){s=s.toString();var o=t.suffix;null!=o&&(s+=o)}else s=null;var a=e.renderer;null!=s?a.setStyle(n,r,s):a.removeStyle(n,r)}(e,i,o,a,r);break;case 8:!function(e,t,n,r,i){var s=t.securityContext,o=s?e.root.sanitizer.sanitize(s,i):i;e.renderer.setProperty(n,r,o)}(33554432&t.flags&&32&i.flags?s.componentView:e,i,o,a,r)}return!0}function to(e,t,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:vr(t),bindings:r},ngContent:null}}function no(e){for(var t=e.def.nodeMatchedQueries;e.parent&&pr(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++){var s=e.def.nodes[i];67108864&s.flags&&536870912&s.flags&&(s.query.filterId&t)===s.query.filterId&&Zn(e,i).setDirty(),!(1&s.flags&&i+s.childCount<n.nodeIndex)&&67108864&s.childFlags&&536870912&s.childFlags||(i+=s.childCount)}}if(134217728&e.def.nodeFlags)for(var o=0;o<e.def.nodes.length;o++){var a=e.def.nodes[o];134217728&a.flags&&536870912&a.flags&&Zn(e,o).setDirty(),o+=a.childCount}}function ro(e,t){var n=Zn(e,t.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&t.flags){var s=t.parent.parent;i=io(e,s.nodeIndex,s.nodeIndex+s.childCount,t.query,[]),r=Wn(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=io(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);for(var o=t.query.bindings,a=!1,u=0;u<o.length;u++){var l=o[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,a=!0}r[l.propName]=c}a&&n.notifyOnChanges()}}function io(e,t,n,r,i){for(var s=t;s<=n;s++){var o=e.def.nodes[s],a=o.matchedQueries[r.id];if(null!=a&&i.push(so(e,o,a)),1&o.flags&&o.element.template&&(o.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=qn(e,s);if((o.childMatchedQueries&r.filterId)===r.filterId&&(io(e,s+1,s+o.childCount,r,i),s+=o.childCount),16777216&o.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],f=cr(h);f&&f===u&&io(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(var p=0;p<d.length;p++){var v=d[p];io(v,0,v.def.nodes.length-1,r,i)}}(o.childMatchedQueries&r.filterId)!==r.filterId&&(s+=o.childCount)}return i}function so(e,t,n){if(null!=n)switch(n){case 1:return qn(e,t.nodeIndex).renderElement;case 0:return new fn(qn(e,t.nodeIndex).renderElement);case 2:return qn(e,t.nodeIndex).template;case 3:return qn(e,t.nodeIndex).viewContainer;case 4:return Wn(e,t.nodeIndex).instance}}function oo(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function ao(e,t,n){var r=mr(e,t,n);r&&Cr(e,n.ngContent.index,1,r,null,void 0)}function uo(e,t){return ho(128,e,new Array(t+1))}function lo(e,t){return ho(32,e,new Array(t))}function co(e,t){for(var n=Object.keys(t),r=n.length,i=new Array(r),s=0;s<r;s++){var o=n[s];i[t[o]]=o}return ho(64,e,i)}function ho(e,t,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var s=n[i];r[i]={flags:8,name:s,ns:null,nonMinifiedName:s,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Tr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function fo(e,t,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function po(e,t,n){var r,i=e.renderer;r=i.createText(n.text.prefix);var s=mr(e,t,n);return s&&i.appendChild(s,r),{renderText:r}}function vo(e,t){return(null!=e?e.toString():"")+t.suffix}function go(e,t,n,r){for(var i=0,s=0,o=0,a=0,u=0,l=null,c=null,h=!1,f=!1,d=null,p=0;p<t.length;p++){var v=t[p];if(v.nodeIndex=p,v.parent=l,v.bindingIndex=i,v.outputIndex=s,v.renderParent=c,o|=v.flags,u|=v.matchedQueryIds,v.element){var g=v.element;g.publicProviders=l?l.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,h=!1,f=!1,v.element.template&&(u|=v.element.template.nodeMatchedQueries)}if(mo(l,v,t.length),i+=v.bindings.length,s+=v.outputs.length,!c&&3&v.flags&&(d=v),20224&v.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var y=0!=(32768&v.flags);0==(8192&v.flags)||y?l.element.publicProviders[Yn(v.provider.token)]=v:(f||(f=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Yn(v.provider.token)]=v),y&&(l.element.componentProvider=v)}if(l?(l.childFlags|=v.flags,l.directChildFlags|=v.flags,l.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(l.childMatchedQueries|=v.element.template.nodeMatchedQueries)):a|=v.flags,v.childCount>0)l=v,yo(v)||(c=v);else for(;l&&p===l.nodeIndex+l.childCount;){var m=l.parent;m&&(m.childFlags|=l.childFlags,m.childMatchedQueries|=l.childMatchedQueries),c=(l=m)&&yo(l)?l.renderParent:l}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||$n,updateRenderer:r||$n,handleEvent:function(e,n,r,i){return t[n].element.handleEvent(e,r,i)},bindingCount:i,outputCount:s,lastRenderRootNode:d}}function yo(e){return 0!=(1&e.flags)&&null===e.element.name}function mo(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(t.nodeIndex,"!"))}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(t.nodeIndex,"!"));if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(t.nodeIndex,"!"));if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(t.nodeIndex,"!"))}if(t.childCount){var i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(t.nodeIndex,"!"))}}function _o(e,t,n,r){var i=wo(e.root,e.renderer,e,t,n);return Co(i,e.component,r),So(i),i}function bo(e,t,n){var r=wo(e,e.renderer,null,null,t);return Co(r,n,n),So(r),r}function ko(e,t,n,r){var i,s=t.element.componentRendererType;return i=s?e.root.rendererFactory.createRenderer(r,s):e.root.renderer,wo(e.root,i,e,t.element.componentProvider,n)}function wo(e,t,n,r,i){var s=new Array(i.nodes.length),o=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:s,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:o,initIndex:-1}}function Co(e,t,n){e.component=t,e.context=n}function So(e){var t;dr(e)&&(t=qn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,i=0;i<n.nodes.length;i++){var s=n.nodes[i],o=void 0;switch(Qn.setCurrentNode(e,i),201347067&s.flags){case 1:var a=Js(e,t,s),u=void 0;if(33554432&s.flags){var l=br(s.element.componentView);u=Qn.createComponentView(e,s,l,a)}Ys(e,u,s,a),o={renderElement:a,componentView:u,viewContainer:null,template:s.element.template?Qr(e,s):void 0},16777216&s.flags&&(o.viewContainer=qr(e,s,o));break;case 2:o=po(e,t,s);break;case 512:case 1024:case 2048:case 256:(o=r[i])||4096&s.flags||(o={instance:gi(e,s)});break;case 16:o={instance:yi(e,s)};break;case 16384:(o=r[i])||(o={instance:mi(e,s)}),32768&s.flags&&Co(qn(e,s.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Li;break;case 8:ao(e,t,s),o=void 0}r[i]=o}Ro(e,Oo.CreateViewNodes),Lo(e,201326592,268435456,0)}function Eo(e){To(e),Qn.updateDirectives(e,1),Do(e,Oo.CheckNoChanges),Qn.updateRenderer(e,1),Ro(e,Oo.CheckNoChanges),e.state&=-97}function xo(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Un(e,0,256),To(e),Qn.updateDirectives(e,0),Do(e,Oo.CheckAndUpdate),Lo(e,67108864,536870912,0);var t=Un(e,256,512);xi(e,2097152|(t?1048576:0)),Qn.updateRenderer(e,0),Ro(e,Oo.CheckAndUpdate),Lo(e,134217728,536870912,0),xi(e,8388608|((t=Un(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Un(e,768,1024)}function Ao(e,t,n,r,i,s,o,a,u,l,c,h,f){return 0===n?function(e,t,n,r,i,s,o,a,u,l,c,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,s,o,a,u,l,c,h){var f=t.bindings.length,d=!1;return f>0&&eo(e,t,0,n)&&(d=!0),f>1&&eo(e,t,1,r)&&(d=!0),f>2&&eo(e,t,2,i)&&(d=!0),f>3&&eo(e,t,3,s)&&(d=!0),f>4&&eo(e,t,4,o)&&(d=!0),f>5&&eo(e,t,5,a)&&(d=!0),f>6&&eo(e,t,6,u)&&(d=!0),f>7&&eo(e,t,7,l)&&(d=!0),f>8&&eo(e,t,8,c)&&(d=!0),f>9&&eo(e,t,9,h)&&(d=!0),d}(e,t,n,r,i,s,o,a,u,l,c,h);case 2:return function(e,t,n,r,i,s,o,a,u,l,c,h){var f=!1,d=t.bindings,p=d.length;if(p>0&&sr(e,t,0,n)&&(f=!0),p>1&&sr(e,t,1,r)&&(f=!0),p>2&&sr(e,t,2,i)&&(f=!0),p>3&&sr(e,t,3,s)&&(f=!0),p>4&&sr(e,t,4,o)&&(f=!0),p>5&&sr(e,t,5,a)&&(f=!0),p>6&&sr(e,t,6,u)&&(f=!0),p>7&&sr(e,t,7,l)&&(f=!0),p>8&&sr(e,t,8,c)&&(f=!0),p>9&&sr(e,t,9,h)&&(f=!0),f){var v=t.text.prefix;p>0&&(v+=vo(n,d[0])),p>1&&(v+=vo(r,d[1])),p>2&&(v+=vo(i,d[2])),p>3&&(v+=vo(s,d[3])),p>4&&(v+=vo(o,d[4])),p>5&&(v+=vo(a,d[5])),p>6&&(v+=vo(u,d[6])),p>7&&(v+=vo(l,d[7])),p>8&&(v+=vo(c,d[8])),p>9&&(v+=vo(h,d[9]));var g=zn(e,t.nodeIndex).renderText;e.renderer.setValue(g,v)}return f}(e,t,n,r,i,s,o,a,u,l,c,h);case 16384:return function(e,t,n,r,i,s,o,a,u,l,c,h){var f=Wn(e,t.nodeIndex),d=f.instance,p=!1,v=void 0,g=t.bindings.length;return g>0&&ir(e,t,0,n)&&(p=!0,v=Ei(e,f,t,0,n,v)),g>1&&ir(e,t,1,r)&&(p=!0,v=Ei(e,f,t,1,r,v)),g>2&&ir(e,t,2,i)&&(p=!0,v=Ei(e,f,t,2,i,v)),g>3&&ir(e,t,3,s)&&(p=!0,v=Ei(e,f,t,3,s,v)),g>4&&ir(e,t,4,o)&&(p=!0,v=Ei(e,f,t,4,o,v)),g>5&&ir(e,t,5,a)&&(p=!0,v=Ei(e,f,t,5,a,v)),g>6&&ir(e,t,6,u)&&(p=!0,v=Ei(e,f,t,6,u,v)),g>7&&ir(e,t,7,l)&&(p=!0,v=Ei(e,f,t,7,l,v)),g>8&&ir(e,t,8,c)&&(p=!0,v=Ei(e,f,t,8,c,v)),g>9&&ir(e,t,9,h)&&(p=!0,v=Ei(e,f,t,9,h,v)),v&&d.ngOnChanges(v),65536&t.flags&&Kn(e,256,t.nodeIndex)&&d.ngOnInit(),262144&t.flags&&d.ngDoCheck(),p}(e,t,n,r,i,s,o,a,u,l,c,h);case 32:case 64:case 128:return function(e,t,n,r,i,s,o,a,u,l,c,h){var f=t.bindings,d=!1,p=f.length;if(p>0&&sr(e,t,0,n)&&(d=!0),p>1&&sr(e,t,1,r)&&(d=!0),p>2&&sr(e,t,2,i)&&(d=!0),p>3&&sr(e,t,3,s)&&(d=!0),p>4&&sr(e,t,4,o)&&(d=!0),p>5&&sr(e,t,5,a)&&(d=!0),p>6&&sr(e,t,6,u)&&(d=!0),p>7&&sr(e,t,7,l)&&(d=!0),p>8&&sr(e,t,8,c)&&(d=!0),p>9&&sr(e,t,9,h)&&(d=!0),d){var v,g=Gn(e,t.nodeIndex);switch(201347067&t.flags){case 32:v=new Array(f.length),p>0&&(v[0]=n),p>1&&(v[1]=r),p>2&&(v[2]=i),p>3&&(v[3]=s),p>4&&(v[4]=o),p>5&&(v[5]=a),p>6&&(v[6]=u),p>7&&(v[7]=l),p>8&&(v[8]=c),p>9&&(v[9]=h);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=s),p>4&&(v[f[4].name]=o),p>5&&(v[f[5].name]=a),p>6&&(v[f[6].name]=u),p>7&&(v[f[7].name]=l),p>8&&(v[f[8].name]=c),p>9&&(v[f[9].name]=h);break;case 128:var y=n;switch(p){case 1:v=y.transform(n);break;case 2:v=y.transform(r);break;case 3:v=y.transform(r,i);break;case 4:v=y.transform(r,i,s);break;case 5:v=y.transform(r,i,s,o);break;case 6:v=y.transform(r,i,s,o,a);break;case 7:v=y.transform(r,i,s,o,a,u);break;case 8:v=y.transform(r,i,s,o,a,u,l);break;case 9:v=y.transform(r,i,s,o,a,u,l,c);break;case 10:v=y.transform(r,i,s,o,a,u,l,c,h)}}g.value=v}return d}(e,t,n,r,i,s,o,a,u,l,c,h);default:throw"unreachable"}}(e,t,r,i,s,o,a,u,l,c,h,f):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,i=0;i<n.length;i++)eo(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,i=!1,s=0;s<n.length;s++)sr(e,t,s,n[s])&&(i=!0);if(i){for(var o="",a=0;a<n.length;a++)o+=vo(n[a],r[a]);o=t.text.prefix+o;var u=zn(e,t.nodeIndex).renderText;e.renderer.setValue(u,o)}return i}(e,t,n);case 16384:return function(e,t,n){for(var r=Wn(e,t.nodeIndex),i=r.instance,s=!1,o=void 0,a=0;a<n.length;a++)ir(e,t,a,n[a])&&(s=!0,o=Ei(e,r,t,a,n[a],o));return o&&i.ngOnChanges(o),65536&t.flags&&Kn(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),s}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,i=!1,s=0;s<n.length;s++)sr(e,t,s,n[s])&&(i=!0);if(i){var o,a=Gn(e,t.nodeIndex);switch(201347067&t.flags){case 32:o=n;break;case 64:o={};for(var u=0;u<n.length;u++)o[r[u].name]=n[u];break;case 128:var l=n[0],c=n.slice(1);o=l.transform.apply(l,_toConsumableArray(c))}a.value=o}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function To(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var i=qn(e,n).template._projectedViews;if(i)for(var s=0;s<i.length;s++){var o=i[s];o.state|=32,ur(o,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Fo(e,t,n,r,i,s,o,a,u,l,c,h,f){return 0===n?function(e,t,n,r,i,s,o,a,u,l,c,h){var f=t.bindings.length;f>0&&or(e,t,0,n),f>1&&or(e,t,1,r),f>2&&or(e,t,2,i),f>3&&or(e,t,3,s),f>4&&or(e,t,4,o),f>5&&or(e,t,5,a),f>6&&or(e,t,6,u),f>7&&or(e,t,7,l),f>8&&or(e,t,8,c),f>9&&or(e,t,9,h)}(e,t,r,i,s,o,a,u,l,c,h,f):function(e,t,n){for(var r=0;r<n.length;r++)or(e,t,r,n[r])}(e,t,r),!1}function Io(e,t){if(Zn(e,t.nodeIndex).dirty)throw Hn(Qn.createDebugContext(e,t.nodeIndex),"Query ".concat(t.query.id," not dirty"),"Query ".concat(t.query.id," dirty"),0!=(1&e.state))}function Po(e){if(!(128&e.state)){if(Do(e,Oo.Destroy),Ro(e,Oo.Destroy),xi(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=cr(e);if(t){var n=t.template._projectedViews;n&&(Ge(n,n.indexOf(e)),Qn.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(qn(e,n).renderElement):2&r.flags?e.renderer.destroyNode(zn(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&Zn(e,n).destroy()}}(e),dr(e)&&e.renderer.destroy(),e.state|=128}}var Oo=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function Ro(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?No(qn(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Do(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var s=qn(e,r).viewContainer._embeddedViews,o=0;o<s.length;o++)No(s[o],t);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function No(e,t){var n=e.state;switch(t){case Oo.CheckNoChanges:0==(128&n)&&(12==(12&n)?Eo(e):64&n&&jo(e,Oo.CheckNoChangesProjectedViews));break;case Oo.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Eo(e):64&n&&jo(e,t));break;case Oo.CheckAndUpdate:0==(128&n)&&(12==(12&n)?xo(e):64&n&&jo(e,Oo.CheckAndUpdateProjectedViews));break;case Oo.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?xo(e):64&n&&jo(e,t));break;case Oo.Destroy:Po(e);break;case Oo.CreateViewNodes:So(e)}}function jo(e,t){Do(e,t),Ro(e,t)}function Lo(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var i=e.def.nodes.length,s=0;s<i;s++){var o=e.def.nodes[s];if(o.flags&t&&o.flags&n)switch(Qn.setCurrentNode(e,o.nodeIndex),r){case 0:ro(e,o);break;case 1:Io(e,o)}o.childFlags&t&&o.childFlags&n||(s+=o.childCount)}}var Mo=!1;function Ho(e,t,n,r,i,s){var o=i.injector.get(pn);return bo(Vo(e,i,o,t,n),r,s)}function Bo(e,t,n,r,i,s){var o=i.injector.get(pn),a=Vo(e,i,new _a(o),t,n),u=Jo(r);return ya(oa.create,bo,null,[a,u,s])}function Vo(e,t,n,r,i){var s=t.injector.get(Tt),o=t.injector.get(nt),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:s,rendererFactory:n,renderer:a,errorHandler:o}}function Uo(e,t,n,r){var i=Jo(n);return ya(oa.create,_o,null,[e,t,i,r])}function Ko(e,t,n,r){return n=Go.get(t.element.componentProvider.provider.token)||Jo(n),ya(oa.create,ko,null,[e,t,n,r])}function zo(e,t,n,r){return ni(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===qo.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach((function(e){var r=qo.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)})),e.modules.forEach((function(e){Wo.forEach((function(r,i){me(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)}))})),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasOverrides,r=t.hasDeprecatedOverrides;return n?(function(e){for(var t=0;t<e.providers.length;t++){var n=e.providers[t];r&&(n.flags|=4096);var i=qo.get(n.token);i&&(n.flags=-3841&n.flags|i.flags,n.deps=yr(i.deps),n.value=i.value)}if(Wo.size>0){var s=new Set(e.modules);Wo.forEach((function(t,n){if(s.has(me(n).providedIn)){var i={token:n,flags:t.flags|(r?4096:0),deps:yr(t.deps),value:t.value,index:e.providers.length};e.providers.push(i),e.providersByKey[Yn(n)]=i}}))}}(e=e.factory((function(){return $n}))),e):e}(r))}var qo=new Map,Wo=new Map,Go=new Map;function Zo(e){var t;qo.set(e.token,e),"function"==typeof e.token&&(t=me(e.token))&&"function"==typeof t.providedIn&&Wo.set(e.token,e)}function Qo(e,t){var n=br(t.viewDefFactory),r=br(n.nodes[0].element.componentView);Go.set(e,r)}function $o(){qo.clear(),Wo.clear(),Go.clear()}function Jo(e){if(0===qo.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&qo.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory((function(){return $n}));for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,s=qo.get(i.token);s&&(r.flags=-3841&r.flags|s.flags,i.deps=yr(s.deps),i.value=s.value)}}}}function Yo(e,t,n,r,i,s,o,a,u,l,c,h,f){var d=e.def.nodes[t];return Ao(e,d,n,r,i,s,o,a,u,l,c,h,f),224&d.flags?Gn(e,t).value:void 0}function Xo(e,t,n,r,i,s,o,a,u,l,c,h,f){var d=e.def.nodes[t];return Fo(e,d,n,r,i,s,o,a,u,l,c,h,f),224&d.flags?Gn(e,t).value:void 0}function ea(e){return ya(oa.detectChanges,xo,null,[e])}function ta(e){return ya(oa.checkNoChanges,Eo,null,[e])}function na(e){return ya(oa.destroy,Po,null,[e])}var ra,ia,sa,oa=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();function aa(e,t){ia=e,sa=t}function ua(e,t,n,r){return aa(e,t),ya(oa.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function la(e,t){if(128&e.state)throw Vn(oa[ra]);return aa(e,da(e,0)),e.def.updateDirectives((function(e,n,r){for(var i=e.def.nodes[n],s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return 0===t?ha(e,i,r,o):fa(e,i,r,o),16384&i.flags&&aa(e,da(e,n)),224&i.flags?Gn(e,i.nodeIndex).value:void 0}),e)}function ca(e,t){if(128&e.state)throw Vn(oa[ra]);return aa(e,pa(e,0)),e.def.updateRenderer((function(e,n,r){for(var i=e.def.nodes[n],s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return 0===t?ha(e,i,r,o):fa(e,i,r,o),3&i.flags&&aa(e,pa(e,n)),224&i.flags?Gn(e,i.nodeIndex).value:void 0}),e)}function ha(e,t,n,r){if(Ao.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))){var i=1===n?r[0]:r;if(16384&t.flags){for(var s={},o=0;o<t.bindings.length;o++){var a=t.bindings[o],u=i[o];8&a.flags&&(s[(d=a.nonMinifiedName,p=void 0,p=d.replace(/[$@]/g,"_"),"ng-reflect-".concat(d=p.replace(Pt,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"-"+t[1].toLowerCase()}))))]=Ot(u))}var l=t.parent,c=qn(e,l.nodeIndex).renderElement;if(l.element.name)for(var h in s){var f=s[h];null!=f?e.renderer.setAttribute(c,h,f):e.renderer.removeAttribute(c,h)}else e.renderer.setValue(c,"bindings=".concat(JSON.stringify(s,null,2)))}}var d,p}function fa(e,t,n,r){Fo.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))}function da(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function pa(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var va=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=t.def.nodes[n];for(var r=this.nodeDef,i=t;r&&0==(1&r.flags);)r=r.parent;if(!r)for(;!r&&i;)r=hr(i),i=i.parent;this.elDef=r,this.elView=i}return _createClass(e,[{key:"logError",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s;2&this.nodeDef.flags?(i=this.view.def,s=this.nodeDef.nodeIndex):(i=this.elView.def,s=this.elDef.nodeIndex);var o=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(i,s),a=-1;i.factory((function(){var t;return++a===o?(t=e.error).bind.apply(t,[e].concat(n)):$n})),a<o&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,n))}},{key:"elOrCompView",get:function(){return qn(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return Jr(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}},{key:"references",get:function(){var e={};if(this.elDef){ga(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&ga(this.elView,n,e),t+=n.childCount}}return e}},{key:"componentRenderElement",get:function(){var e=function(e){for(;e&&!dr(e);)e=e.parent;return e.parent?qn(e.parent,hr(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?fr(this.view,this.nodeDef):fr(this.elView,this.elDef)}}]),e}();function ga(e,t,n){for(var r in t.references)n[r]=so(e,t,t.references[r])}function ya(e,t,n,r){var i,s,o=ra,a=ia,u=sa;try{ra=e;var l=t.apply(n,r);return ia=a,sa=u,ra=o,l}catch(c){if(Xe(c)||!ia)throw c;throw i=c,s=ma(),i instanceof Error||(i=new Error(i.toString())),Bn(i,s),i}}function ma(){return ia?new va(ia,sa):null}var _a=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"createRenderer",value:function(e,t){return new ba(this.delegate.createRenderer(e,t))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),e}(),ba=function(){function e(t){_classCallCheck(this,e),this.delegate=t,this.debugContextFactory=ma,this.data=this.delegate.data}return _createClass(e,[{key:"createDebugContext",value:function(e){return this.debugContextFactory(e)}},{key:"destroyNode",value:function(e){var t=Us(e);!function(e){Vs.delete(e.nativeNode)}(t),t instanceof Hs&&(t.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(e)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(e,t){var n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){var i=new Bs(n,null,r);i.name=e,Ks(i)}return n}},{key:"createComment",value:function(e){var t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Ks(new Hs(t,null,n)),t}},{key:"createText",value:function(e){var t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Ks(new Hs(t,null,n)),t}},{key:"appendChild",value:function(e,t){var n=Us(e),r=Us(t);n&&r&&n instanceof Bs&&n.addChild(r),this.delegate.appendChild(e,t)}},{key:"insertBefore",value:function(e,t,n){var r=Us(e),i=Us(t),s=Us(n);r&&i&&r instanceof Bs&&r.insertBefore(s,i),this.delegate.insertBefore(e,t,n)}},{key:"removeChild",value:function(e,t){var n=Us(e),r=Us(t);n&&r&&n instanceof Bs&&n.removeChild(r),this.delegate.removeChild(e,t)}},{key:"selectRootElement",value:function(e,t){var n=this.delegate.selectRootElement(e,t),r=ma();return r&&Ks(new Bs(n,null,r)),n}},{key:"setAttribute",value:function(e,t,n,r){var i=Us(e);i&&i instanceof Bs&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){var r=Us(e);r&&r instanceof Bs&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){var n=Us(e);n&&n instanceof Bs&&(n.classes[t]=!0),this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){var n=Us(e);n&&n instanceof Bs&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){var i=Us(e);i&&i instanceof Bs&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){var r=Us(e);r&&r instanceof Bs&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){var r=Us(e);r&&r instanceof Bs&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){if("string"!=typeof e){var r=Us(e);r&&r.listeners.push(new Ms(t,n))}return this.delegate.listen(e,t,n)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setValue",value:function(e,t){return this.delegate.setValue(e,t)}}]),e}();var ka=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e){!function(){if(!Mo){Mo=!0;var e=st()?{setCurrentNode:aa,createRootView:Bo,createEmbeddedView:Uo,createComponentView:Ko,createNgModuleRef:zo,overrideProvider:Zo,overrideComponentView:Qo,clearOverrides:$o,checkAndUpdateView:ea,checkNoChangesView:ta,destroyView:na,createDebugContext:function(e,t){return new va(e,t)},handleEvent:ua,updateDirectives:la,updateRenderer:ca}:{setCurrentNode:function(){},createRootView:Ho,createEmbeddedView:_o,createComponentView:ko,createNgModuleRef:ni,overrideProvider:$n,overrideComponentView:$n,clearOverrides:$n,checkAndUpdateView:xo,checkNoChangesView:Eo,destroyView:Po,createDebugContext:function(e,t){return new va(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?Yo:Xo,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?Yo:Xo,e)}};Qn.setCurrentNode=e.setCurrentNode,Qn.createRootView=e.createRootView,Qn.createEmbeddedView=e.createEmbeddedView,Qn.createComponentView=e.createComponentView,Qn.createNgModuleRef=e.createNgModuleRef,Qn.overrideProvider=e.overrideProvider,Qn.overrideComponentView=e.overrideComponentView,Qn.clearOverrides=e.clearOverrides,Qn.checkAndUpdateView=e.checkAndUpdateView,Qn.checkNoChangesView=e.checkNoChangesView,Qn.destroyView=e.destroyView,Qn.resolveDep=Ci,Qn.createDebugContext=e.createDebugContext,Qn.handleEvent=e.handleEvent,Qn.updateDirectives=e.updateDirectives,Qn.updateRenderer=e.updateRenderer,Qn.dirtyParentQueries=no}}();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(br(this._ngModuleDefFactory));return Qn.createNgModuleRef(this.moduleType,e||Lt.NULL,this._bootstrapComponents,t)}}]),t}(qe),wa=function e(){_classCallCheck(this,e)},Ca=new Ie("Location Initialized"),Sa=function e(){_classCallCheck(this,e)},Ea=new Ie("appBaseHref"),xa=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._subject=new Ni,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=e.stripTrailingSlash(Aa(i)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+e.normalizeQueryParams(n))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Aa(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}},{key:"replaceState",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}],[{key:"normalizeQueryParams",value:function(e){return e&&"?"!==e[0]?"?"+e:e}},{key:"joinWithSlash",value:function(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}},{key:"stripTrailingSlash",value:function(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}}]),e}();function Aa(e){return e.replace(/\/index.html$/,"")}var Ta=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=xa.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+xa.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+xa.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(Sa),Fa=function(e){function t(e,n){var r;if(_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,_possibleConstructorReturn(r)}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return xa.joinWithSlash(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+xa.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+xa.normalizeQueryParams(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+xa.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(Sa),Ia=function(){var e={Decimal:0,Percent:1,Currency:2,Scientific:3};return e[e.Decimal]="Decimal",e[e.Percent]="Percent",e[e.Currency]="Currency",e[e.Scientific]="Scientific",e}(),Pa=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Oa=function(){var e={Format:0,Standalone:1};return e[e.Format]="Format",e[e.Standalone]="Standalone",e}(),Ra=function(){var e={Narrow:0,Abbreviated:1,Wide:2,Short:3};return e[e.Narrow]="Narrow",e[e.Abbreviated]="Abbreviated",e[e.Wide]="Wide",e[e.Short]="Short",e}(),Da=function(){var e={Short:0,Medium:1,Long:2,Full:3};return e[e.Short]="Short",e[e.Medium]="Medium",e[e.Long]="Long",e[e.Full]="Full",e}(),Na=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function ja(e,t){return Va(Di(e)[Pi.DateFormat],t)}function La(e,t){return Va(Di(e)[Pi.TimeFormat],t)}function Ma(e,t){return Va(Di(e)[Pi.DateTimeFormat],t)}function Ha(e,t){var n=Di(e),r=n[Pi.NumberSymbols][t];if(void 0===r){if(t===Na.CurrencyDecimal)return n[Pi.NumberSymbols][Na.Decimal];if(t===Na.CurrencyGroup)return n[Pi.NumberSymbols][Na.Group]}return r}function Ba(e){if(!e[Pi.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(e[Pi.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function Va(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function Ua(e){var t=_slicedToArray(e.split(":"),2);return{hours:+t[0],minutes:+t[1]}}var Ka=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,za={},qa=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Wa=function(){var e={Short:0,ShortGMT:1,Long:2,Extended:3};return e[e.Short]="Short",e[e.ShortGMT]="ShortGMT",e[e.Long]="Long",e[e.Extended]="Extended",e}(),Ga=function(){var e={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return e[e.FullYear]="FullYear",e[e.Month]="Month",e[e.Date]="Date",e[e.Hours]="Hours",e[e.Minutes]="Minutes",e[e.Seconds]="Seconds",e[e.FractionalSeconds]="FractionalSeconds",e[e.Day]="Day",e}(),Za=function(){var e={DayPeriods:0,Days:1,Months:2,Eras:3};return e[e.DayPeriods]="DayPeriods",e[e.Days]="Days",e[e.Months]="Months",e[e.Eras]="Eras",e}();function Qa(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e}function $a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,s=n));for(var o=String(e);o.length<t;)o="0"+o;return r&&(o=o.substr(o.length-t)),s+o}function Ja(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(s,o){var a,u=function(e,t){switch(e){case Ga.FullYear:return t.getFullYear();case Ga.Month:return t.getMonth();case Ga.Date:return t.getDate();case Ga.Hours:return t.getHours();case Ga.Minutes:return t.getMinutes();case Ga.Seconds:return t.getSeconds();case Ga.FractionalSeconds:return t.getMilliseconds();case Ga.Day:return t.getDay();default:throw new Error('Unknown DateType value "'.concat(e,'".'))}}(e,s);if((n>0||u>-n)&&(u+=n),e===Ga.Hours)0===u&&-12===n&&(u=12);else if(e===Ga.FractionalSeconds)return a=t,$a(u,3).substr(0,a);var l=Ha(o,Na.MinusSign);return $a(u,t,l,r,i)}}function Ya(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oa.Format,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i,s){return function(e,t,n,r,i,s){switch(n){case Za.Months:return function(e,t,n){var r=Di(e),i=Va([r[Pi.MonthsFormat],r[Pi.MonthsStandalone]],t);return Va(i,n)}(t,i,r)[e.getMonth()];case Za.Days:return function(e,t,n){var r=Di(e),i=Va([r[Pi.DaysFormat],r[Pi.DaysStandalone]],t);return Va(i,n)}(t,i,r)[e.getDay()];case Za.DayPeriods:var o=e.getHours(),a=e.getMinutes();if(s){var u,l=function(e){var t=Di(e);return Ba(t),(t[Pi.ExtraData][2]||[]).map((function(e){return"string"==typeof e?Ua(e):[Ua(e[0]),Ua(e[1])]}))}(t),c=function(e,t,n){var r=Di(e);Ba(r);var i=Va([r[Pi.ExtraData][0],r[Pi.ExtraData][1]],t)||[];return Va(i,n)||[]}(t,i,r);if(l.forEach((function(e,t){if(Array.isArray(e)){var n=e[0],r=n.hours,i=n.minutes,s=e[1],l=s.hours,h=s.minutes;o>=r&&a>=i&&(o<l||o===l&&a<h)&&(u=c[t])}else{var f=e.hours,d=e.minutes;f===o&&d===a&&(u=c[t])}})),u)return u}return function(e,t,n){var r=Di(e),i=Va([r[Pi.DayPeriodsFormat],r[Pi.DayPeriodsStandalone]],t);return Va(i,n)}(t,i,r)[o<12?0:1];case Za.Eras:return function(e,t){return Va(Di(e)[Pi.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type ".concat(n))}}(i,s,e,t,n,r)}}function Xa(e){return function(t,n,r){var i=-1*r,s=Ha(n,Na.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case Wa.Short:return(i>=0?"+":"")+$a(o,2,s)+$a(Math.abs(i%60),2,s);case Wa.ShortGMT:return"GMT"+(i>=0?"+":"")+$a(o,1,s);case Wa.Long:return"GMT"+(i>=0?"+":"")+$a(o,2,s)+":"+$a(Math.abs(i%60),2,s);case Wa.Extended:return 0===r?"Z":(i>=0?"+":"")+$a(o,2,s)+":"+$a(Math.abs(i%60),2,s);default:throw new Error('Unknown zone width "'.concat(e,'"'))}}}var eu=0,tu=4;function nu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i,s,o,a;if(t){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,l=n.getDate();i=1+Math.floor((l+u)/7)}else{var c=(s=n.getFullYear(),o=new Date(s,eu,1).getDay(),new Date(s,0,1+(o<=tu?tu:tu+7)-o)),h=(a=n,new Date(a.getFullYear(),a.getMonth(),a.getDate()+(tu-a.getDay()))).getTime()-c.getTime();i=1+Math.round(h/6048e5)}return $a(i,e,Ha(r,Na.MinusSign))}}var ru={};function iu(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function su(e){return e instanceof Date&&!isNaN(e.valueOf())}var ou=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function au(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var uu=new Ie("UseV4Plurals"),lu=function e(){_classCallCheck(this,e)},cu=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).locale=e,r.deprecatedPluralFn=n,r}return _inherits(t,e),_createClass(t,[{key:"getPluralCategory",value:function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return Di(e)[Pi.PluralCase]}(t||this.locale)(e)){case Pa.Zero:return"zero";case Pa.One:return"one";case Pa.Two:return"two";case Pa.Few:return"few";case Pa.Many:return"many";default:return"other"}}}]),t}(lu);function hu(e,t){t=encodeURIComponent(t);var n=!0,r=!1,i=void 0;try{for(var s,o=e.split(";")[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value,u=a.indexOf("="),l=_slicedToArray(-1==u?[a,""]:[a.slice(0,u),a.slice(u+1)],2),c=l[0],h=l[1];if(c.trim()===t)return decodeURIComponent(h)}}catch(f){r=!0,i=f}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}var fu=function e(){_classCallCheck(this,e)},du=function(){function e(t,n,r,i){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._initialClasses=[]}return _createClass(e,[{key:"getValue",value:function(){return null}},{key:"setClass",value:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"setNgClass",value:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Jt(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"applyChanges",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(be(e.item)));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}}]),e}(),pu=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"ngDoCheck",value:function(){this._delegate.applyChanges()}},{key:"klass",set:function(e){this._delegate.setClass(e)}},{key:"ngClass",set:function(e){this._delegate.setNgClass(e)}}]),t}(function(){var e=function(){function e(t){_classCallCheck(this,e),this._delegate=t}return _createClass(e,[{key:"getValue",value:function(){return this._delegate.getValue()}}]),e}();return e.ngDirectiveDef=void 0,e}()),vu=function(){function e(t,n,r,i){_classCallCheck(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return _createClass(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),gu=function(){function e(t,n,r){_classCallCheck(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOfDirty=!0,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,r,i){if(null==e.previousIndex){var s=t._viewContainer.createEmbeddedView(t._template,new vu(null,t._ngForOf,-1,-1),null===i?void 0:i),o=new yu(e,s);n.push(o)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var a=t._viewContainer.get(r);t._viewContainer.move(a,i);var u=new yu(e,a);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,s=this._viewContainer.length;i<s;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=s,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}},{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(e){st()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". ")+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}(),yu=function e(t,n){_classCallCheck(this,e),this.record=t,this.view=n},mu=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new _u,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){bu("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){bu("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}}]),e}(),_u=function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null};function bu(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(be(t),"'."))}var ku=function(){function e(t,n){_classCallCheck(this,e),this._viewContainerRef=t,this._templateRef=n,this._created=!1}return _createClass(e,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}]),e}(),wu=function(){function e(t){_classCallCheck(this,e),this._localization=t,this._caseViews={}}return _createClass(e,[{key:"addCase",value:function(e,t){this._caseViews[e]=t}},{key:"_updateView",value:function(){this._clearViews();var e=Object.keys(this._caseViews),t=function(e,t,n,r){var i="=".concat(e);if(t.indexOf(i)>-1)return i;if(i=n.getPluralCategory(e,void 0),t.indexOf(i)>-1)return i;if(t.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'.concat(e,'"'))}(this._switchValue,e,this._localization);this._activateView(this._caseViews[t])}},{key:"_clearViews",value:function(){this._activeView&&this._activeView.destroy()}},{key:"_activateView",value:function(e){e&&(this._activeView=e,this._activeView.create())}},{key:"ngPlural",set:function(e){this._switchValue=e,this._updateView()}}]),e}(),Cu=function e(t,n,r,i){_classCallCheck(this,e),this.value=t;var s=!isNaN(Number(t));i.addCase(s?"=".concat(t):t,new ku(r,n))};function Su(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(be(e),"'"))}var Eu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),xu=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.then(t,(function(e){throw e}))}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),Au=new Eu,Tu=function(){function e(t){_classCallCheck(this,e),this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):Zt(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,$t.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,(function(n){return t._updateLatestValue(e,n)}))}},{key:"_selectStrategy",value:function(t){if(Xt(t))return xu;if(en(t))return Au;throw Su(e,t)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}(),Fu=function(){function e(t){_classCallCheck(this,e),this.locale=t}return _createClass(e,[{key:"transform",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(null==t||""===t||t!=t)return null;try{return function(e,t,n,r){var i=function(e){if(su(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,n=parseFloat(e);if(!isNaN(e-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=_slicedToArray(e.split("-").map((function(e){return+e})),3),i=r[0],s=r[1],o=r[2];return new Date(i,s-1,o)}if(t=e.match(Ka))return function(e){var t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,s=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var o=Number(e[4]||0)-n,a=Number(e[5]||0)-r,u=Number(e[6]||0),l=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(t,o,a,u,l),t}(t)}var a=new Date(e);if(!su(a))throw new Error('Unable to convert "'.concat(e,'" into a date'));return a}(e);t=function e(t,n){var r=function(e){return Di(e)[Pi.LocaleId]}(t);if(za[r]=za[r]||{},za[r][n])return za[r][n];var i="";switch(n){case"shortDate":i=ja(t,Da.Short);break;case"mediumDate":i=ja(t,Da.Medium);break;case"longDate":i=ja(t,Da.Long);break;case"fullDate":i=ja(t,Da.Full);break;case"shortTime":i=La(t,Da.Short);break;case"mediumTime":i=La(t,Da.Medium);break;case"longTime":i=La(t,Da.Long);break;case"fullTime":i=La(t,Da.Full);break;case"short":var s=e(t,"shortTime"),o=e(t,"shortDate");i=Qa(Ma(t,Da.Short),[s,o]);break;case"medium":var a=e(t,"mediumTime"),u=e(t,"mediumDate");i=Qa(Ma(t,Da.Medium),[a,u]);break;case"long":var l=e(t,"longTime"),c=e(t,"longDate");i=Qa(Ma(t,Da.Long),[l,c]);break;case"full":var h=e(t,"fullTime"),f=e(t,"fullDate");i=Qa(Ma(t,Da.Full),[h,f])}return i&&(za[r][n]=i),i}(n,t)||t;for(var s,o=[];t;){if(!(s=qa.exec(t))){o.push(t);break}var a=(o=o.concat(s.slice(1))).pop();if(!a)break;t=a}var u=i.getTimezoneOffset();r&&(u=iu(r,u),i=function(e,t,n){var r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(iu(t,r)-r))}(i,r));var l="";return o.forEach((function(e){var t=function(e){if(ru[e])return ru[e];var t;switch(e){case"G":case"GG":case"GGG":t=Ya(Za.Eras,Ra.Abbreviated);break;case"GGGG":t=Ya(Za.Eras,Ra.Wide);break;case"GGGGG":t=Ya(Za.Eras,Ra.Narrow);break;case"y":t=Ja(Ga.FullYear,1,0,!1,!0);break;case"yy":t=Ja(Ga.FullYear,2,0,!0,!0);break;case"yyy":t=Ja(Ga.FullYear,3,0,!1,!0);break;case"yyyy":t=Ja(Ga.FullYear,4,0,!1,!0);break;case"M":case"L":t=Ja(Ga.Month,1,1);break;case"MM":case"LL":t=Ja(Ga.Month,2,1);break;case"MMM":t=Ya(Za.Months,Ra.Abbreviated);break;case"MMMM":t=Ya(Za.Months,Ra.Wide);break;case"MMMMM":t=Ya(Za.Months,Ra.Narrow);break;case"LLL":t=Ya(Za.Months,Ra.Abbreviated,Oa.Standalone);break;case"LLLL":t=Ya(Za.Months,Ra.Wide,Oa.Standalone);break;case"LLLLL":t=Ya(Za.Months,Ra.Narrow,Oa.Standalone);break;case"w":t=nu(1);break;case"ww":t=nu(2);break;case"W":t=nu(1,!0);break;case"d":t=Ja(Ga.Date,1);break;case"dd":t=Ja(Ga.Date,2);break;case"E":case"EE":case"EEE":t=Ya(Za.Days,Ra.Abbreviated);break;case"EEEE":t=Ya(Za.Days,Ra.Wide);break;case"EEEEE":t=Ya(Za.Days,Ra.Narrow);break;case"EEEEEE":t=Ya(Za.Days,Ra.Short);break;case"a":case"aa":case"aaa":t=Ya(Za.DayPeriods,Ra.Abbreviated);break;case"aaaa":t=Ya(Za.DayPeriods,Ra.Wide);break;case"aaaaa":t=Ya(Za.DayPeriods,Ra.Narrow);break;case"b":case"bb":case"bbb":t=Ya(Za.DayPeriods,Ra.Abbreviated,Oa.Standalone,!0);break;case"bbbb":t=Ya(Za.DayPeriods,Ra.Wide,Oa.Standalone,!0);break;case"bbbbb":t=Ya(Za.DayPeriods,Ra.Narrow,Oa.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ya(Za.DayPeriods,Ra.Abbreviated,Oa.Format,!0);break;case"BBBB":t=Ya(Za.DayPeriods,Ra.Wide,Oa.Format,!0);break;case"BBBBB":t=Ya(Za.DayPeriods,Ra.Narrow,Oa.Format,!0);break;case"h":t=Ja(Ga.Hours,1,-12);break;case"hh":t=Ja(Ga.Hours,2,-12);break;case"H":t=Ja(Ga.Hours,1);break;case"HH":t=Ja(Ga.Hours,2);break;case"m":t=Ja(Ga.Minutes,1);break;case"mm":t=Ja(Ga.Minutes,2);break;case"s":t=Ja(Ga.Seconds,1);break;case"ss":t=Ja(Ga.Seconds,2);break;case"S":t=Ja(Ga.FractionalSeconds,1);break;case"SS":t=Ja(Ga.FractionalSeconds,2);break;case"SSS":t=Ja(Ga.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Xa(Wa.Short);break;case"ZZZZZ":t=Xa(Wa.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Xa(Wa.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Xa(Wa.Long);break;default:return null}return ru[e]=t,t}(e);l+=t?t(i,n,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),l}(t,n,i||this.locale,r)}catch(s){throw Su(e,s.message)}}}]),e}(),Iu=function(){function e(t){_classCallCheck(this,e),this._locale=t}return _createClass(e,[{key:"transform",value:function(t,n,r){if(function(e){return null==e||""===e||e!=e}(t))return null;r=r||this._locale;try{return function(e,t,n){return function(e,t,n,r,i,s){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a="",u=!1;if(isFinite(e)){var l=function(e){var t,n,r,i,s,o=Math.abs(e)+"",a=0;for((n=o.indexOf("."))>-1&&(o=o.replace(".","")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;"0"===o.charAt(r);r++);if(r===(s=o.length))t=[0],n=1;else{for(s--;"0"===o.charAt(s);)s--;for(n-=r,t=[],i=0;r<=s;r++,i++)t[i]=Number(o.charAt(r))}return n>22&&(t=t.splice(0,21),a=n-1,n=1),{digits:t,exponent:a,integerLen:n}}(e);o&&(l=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(l));var c=t.minInt,h=t.minFrac,f=t.maxFrac;if(s){var d=s.match(ou);if(null===d)throw new Error("".concat(s," is not a valid digit info"));var p=d[1],v=d[3],g=d[5];null!=p&&(c=au(p)),null!=v&&(h=au(v)),null!=g?f=au(g):null!=v&&h>f&&(f=h)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction (".concat(t,") is higher than the maximum (").concat(n,")."));var r=e.digits,i=r.length-e.integerLen,s=Math.min(Math.max(t,i),n),o=s+e.integerLen,a=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(var u=o;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(var l=1;l<o;l++)r[l]=0}if(a>=5)if(o-1<0){for(var c=0;c>o;c--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);var h=0!==s,f=t+e.integerLen,d=r.reduceRight((function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,h&&(0===r[n]&&n>=f?r.pop():h=!1),t>=10?1:0}),0);d&&(r.unshift(d),e.integerLen++)}(l,h,f);var y=l.digits,m=l.integerLen,_=l.exponent,b=[];for(u=y.every((function(e){return!e}));m<c;m++)y.unshift(0);for(;m<0;m++)y.unshift(0);m>0?b=y.splice(m,y.length):(b=y,y=[0]);var k=[];for(y.length>=t.lgSize&&k.unshift(y.splice(-t.lgSize,y.length).join(""));y.length>t.gSize;)k.unshift(y.splice(-t.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),a=k.join(Ha(n,r)),b.length&&(a+=Ha(n,i)+b.join("")),_&&(a+=Ha(n,Na.Exponential)+"+"+_)}else a=Ha(n,Na.Infinity);return e<0&&!u?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf}(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(var l=0;l<u.length;l++){var c=u.charAt(l);"0"===c?n.minFrac=n.maxFrac=l+1:"#"===c?n.maxFrac=l+1:n.posSuf+=c}var h=a.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,s){var f=i.length-n.posPre.length-n.posSuf.length,d=s.indexOf("#");n.negPre=s.substr(0,d).replace(/'/g,""),n.negSuf=s.substr(d+f).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return Di(e)[Pi.NumberFormats][t]}(t,Ia.Decimal),Ha(t,Na.MinusSign)),t,Na.Group,Na.Decimal,n)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error("".concat(e," is not a number"));return e}(t),r,n)}catch(i){throw Su(e,i.message)}}}]),e}(),Pu=function e(){_classCallCheck(this,e)},Ou=new Ie("DocumentToken"),Ru="browser",Du="server";function Nu(e){return e===Ru}function ju(e){return e===Du}var Lu,Mu=((Lu=function e(){_classCallCheck(this,e)}).ngInjectableDef=ye({token:Lu,providedIn:"root",factory:function(){return new Hu(Be(Ou),window,Be(nt))}}),Lu),Hu=function(){function e(t,n,r){_classCallCheck(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#".concat(e));if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),Bu=!0,Vu="https://digit-svc.azurewebsites.net",Uu="https://calendarsrv.azurewebsites.net",Ku="https://serviceidentity.azurewebsites.net",zu="https://travelsvc.azurewebsites.net",qu="BAKuiCePCeMLk1W89DFkz9bFdV8zTKWzun0SB4WE8FM0TmAId5GeZC3MDWbeyGt5TrtGv6zBKFOmbo0qUNYm3iE",Wu="https://pushsvc.azurewebsites.net/",Gu=function e(){_classCallCheck(this,e)},Zu={clientId:"digitWebapp",redirectUri:window.location.origin+"/index.html",postLogoutRedirectUri:window.location.origin+"/index.html",issuer:Ku,scope:"openid digit.user calendar.user travel.user push.user",oidc:!0,requestAccessToken:!0,requireHttps:!0,showDebugInformation:!0,sessionChecksEnabled:!0};function Qu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return R(r)?(t.pop(),q(t,r)):Y(t)}function $u(e,t){return G(e,t,1)}function Ju(e,t){return function(n){return n.lift(new Yu(e,t))}}var Yu=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Xu(e,this.predicate,this.thisArg))}}]),e}(),Xu=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=n,i.thisArg=r,i.count=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),t}(m),el=function e(){_classCallCheck(this,e)},tl=function e(){_classCallCheck(this,e)},nl=function(){function e(t){var n=this;_classCallCheck(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),s=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(s):n.headers.set(i,[s])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))}))}:this.headers=new Map}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var s=this.headers.get(t);if(!s)return;0===(s=s.filter((function(e){return-1===i.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),rl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return il(e)}},{key:"encodeValue",value:function(e){return il(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function il(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var sl=function(){function e(){var t,n,r,i=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.updates=null,this.cloneFrom=null,this.encoder=s.encoder||new rl,s.fromString){if(s.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=s.fromString,n=this.encoder,r=new Map,t.length>0&&t.split("&").forEach((function(e){var t=e.indexOf("="),i=_slicedToArray(-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),s=i[0],o=i[1],a=r.get(s)||[];a.push(o),r.set(s,a)})),r)}else s.fromObject?(this.map=new Map,Object.keys(s.fromObject).forEach((function(e){var t=s.fromObject[e];i.map.set(e,Array.isArray(t)?t:[t])}))):this.map=null}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function ol(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function al(e){return"undefined"!=typeof Blob&&e instanceof Blob}function ul(e){return"undefined"!=typeof FormData&&e instanceof FormData}var ll=function(){function e(t,n,r,i){var s;if(_classCallCheck(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new nl),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new sl,this.urlWithParams=n}return _createClass(e,[{key:"serializeBody",value:function(){return null===this.body?null:ol(this.body)||al(this.body)||ul(this.body)||"string"==typeof this.body?this.body:this.body instanceof sl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body?null:ul(this.body)?null:al(this.body)?this.body.type||null:ol(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),u)),t.setParams&&(l=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),l)),new e(n,r,s,{params:l,headers:u,reportProgress:a,responseType:i,withCredentials:o})}}]),e}(),cl=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),hl=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,e),this.headers=t.headers||new nl,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},fl=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).type=cl.ResponseHeader,e}return _inherits(t,e),_createClass(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),t}(hl),dl=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).type=cl.Response,e.body=void 0!==n.body?n.body:null,e}return _inherits(t,e),_createClass(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),t}(hl),pl=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,0,"Unknown Error"))).name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),n.error=e.error||null,n}return _inherits(t,e),t}(hl);function vl(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var gl=function(){function e(t){_classCallCheck(this,e),this.handler=t}return _createClass(e,[{key:"request",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof ll)n=e;else{var s=void 0;s=i.headers instanceof nl?i.headers:new nl(i.headers);var o=void 0;i.params&&(o=i.params instanceof sl?i.params:new sl({fromObject:i.params})),n=new ll(e,t,void 0!==i.body?i.body:null,{headers:s,params:o,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var a=Qu(n).pipe($u((function(e){return r.handler.handle(e)})));if(e instanceof ll||"events"===i.observe)return a;var u=a.pipe(Ju((function(e){return e instanceof dl})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(U((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return u.pipe(U((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return u.pipe(U((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return u.pipe(U((function(e){return e.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new sl).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,vl(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,vl(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,vl(n,t))}}]),e}(),yl=function(){function e(t,n){_classCallCheck(this,e),this.next=t,this.interceptor=n}return _createClass(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),ml=new Ie("HTTP_INTERCEPTORS"),_l=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}(),bl=/^\)\]\}',?\n/,kl=function e(){_classCallCheck(this,e)},wl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}(),Cl=function(){function e(t){_classCallCheck(this,e),this.xhrFactory=t}return _createClass(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new E((function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((function(e,t){return r.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var s=e.responseType.toLowerCase();r.responseType="json"!==s?s:"text"}var o=e.serializeBody(),a=null,u=function(){if(null!==a)return a;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new nl(r.getAllResponseHeaders()),s=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return a=new fl({headers:i,status:t,statusText:n,url:s})},l=function(){var t=u(),i=t.headers,s=t.status,o=t.statusText,a=t.url,l=null;204!==s&&(l=void 0===r.response?r.responseText:r.response),0===s&&(s=l?200:0);var c=s>=200&&s<300;if("json"===e.responseType&&"string"==typeof l){var h=l;l=l.replace(bl,"");try{l=""!==l?JSON.parse(l):null}catch(f){l=h,c&&(c=!1,l={error:f,text:l})}}c?(n.next(new dl({body:l,headers:i,status:s,statusText:o,url:a||void 0})),n.complete()):n.error(new pl({error:l,headers:i,status:s,statusText:o,url:a||void 0}))},c=function(e){var t=u().url,i=new pl({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(i)},h=!1,f=function(t){h||(n.next(u()),h=!0);var i={type:cl.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(e){var t={type:cl.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",l),r.addEventListener("error",c),e.reportProgress&&(r.addEventListener("progress",f),null!==o&&r.upload&&r.upload.addEventListener("progress",d)),r.send(o),n.next({type:cl.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),e.reportProgress&&(r.removeEventListener("progress",f),null!==o&&r.upload&&r.upload.removeEventListener("progress",d)),r.abort()}}))}}]),e}(),Sl=new Ie("XSRF_COOKIE_NAME"),El=new Ie("XSRF_HEADER_NAME"),xl=function e(){_classCallCheck(this,e)},Al=function(){function e(t,n,r){_classCallCheck(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=hu(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}(),Tl=function(){function e(t,n){_classCallCheck(this,e),this.tokenService=t,this.headerName=n}return _createClass(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}(),Fl=function(){function e(t,n){_classCallCheck(this,e),this.backend=t,this.injector=n,this.chain=null}return _createClass(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(ml,[]);this.chain=t.reduceRight((function(e,t){return new yl(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}(),Il=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:Tl,useClass:_l}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:Sl,useValue:t.cookieName}:[],t.headerName?{provide:El,useValue:t.headerName}:[]]}}}]),e}(),Pl=function e(){_classCallCheck(this,e)},Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function Rl(e,t){function n(){this.constructor=e}Ol(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Dl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function Nl(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function jl(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Ll(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,a)}u((r=r.apply(e,t||[])).next())}))}function Ml(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[0,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var Hl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Bl(e))}}]),e}(),Bl=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).hasFirst=!1,n.observables=[],n.subscriptions=[],n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=B(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}}},{key:"notifyNext",value:function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==n){var o=this.subscriptions[s];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(t)}}]),t}(V);function Vl(e,t){return new E(t?function(n){return t.schedule(Ul,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function Ul(e){var t=e.error;e.subscriber.error(t)}function Kl(e,t,n){return function(r){return r.lift(new zl(e,t,n))}}var zl=function(){function e(t,n,r){_classCallCheck(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ql(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),ql=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._tapNext=k,s._tapError=k,s._tapComplete=k,s._tapError=r||k,s._tapComplete=i||k,o(n)?(s._context=_assertThisInitialized(s),s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||k,s._tapError=n.error||k,s._tapComplete=n.complete||k),s}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),t}(m),Wl=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).scheduler=e,r.work=n,r.pending=!1,r}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),t}(function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),t}(v)),Gl=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;_classCallCheck(this,e),this.SchedulerAction=t,this.now=n}return _createClass(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),Zl=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gl.now;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,(function(){return t.delegate&&t.delegate!==_assertThisInitialized(n)?t.delegate.now():r()})))).actions=[],n.active=!1,n.scheduled=void 0,n}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,r):_get(_getPrototypeOf(t.prototype),"schedule",this).call(this,e,n,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),t}(Gl),Ql=new Zl(Wl);function $l(e){return e instanceof Date&&!isNaN(+e)}var Jl=new E((function(e){return e.complete()}));function Yl(e){return e?function(e){return new E((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Jl}var Xl,ec=((Xl=function(){function e(t,n,r){_classCallCheck(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return _createClass(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Qu(this.value);case"E":return Vl(this.error);case"C":return Yl()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}()).completeNotification=new Xl("C"),Xl.undefinedValueNotification=new Xl("N",void 0),Xl);function tc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ql,n=$l(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new nc(n,t))}}var nc=function(){function e(t,n){_classCallCheck(this,e),this.delay=t,this.scheduler=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new rc(e,this.delay,this.scheduler))}}]),e}(),rc=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return _inherits(t,e),_createClass(t,[{key:"_schedule",value:function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}},{key:"scheduleNotification",value:function(e){if(!0!==this.errored){var t=this.scheduler,n=new ic(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}}},{key:"_next",value:function(e){this.scheduleNotification(ec.createNext(e))}},{key:"_error",value:function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(ec.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var s=Math.max(0,n[0].time-r.now());this.schedule(e,s)}else this.unsubscribe(),t.active=!1}}]),t}(m),ic=function e(t,n){_classCallCheck(this,e),this.time=t,this.notification=n};function sc(e,t){return"function"==typeof t?function(n){return n.pipe(sc((function(n,r){return W(e(n,r)).pipe(U((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new oc(e))}}var oc=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ac(e,this.project))}}]),e}(),ac=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,r.index=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new D(this,t,n),s=this.destination;s.add(i),this.innerSubscription=B(this,e,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(t.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}}]),t}(V),uc=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),lc=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function cc(e){return function(t){return 0===e?Yl():t.lift(new hc(e))}}var hc=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new lc}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new fc(e,this.total))}}]),e}(),fc=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=n,r.count=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),t}(m);function dc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new pc(e))}}var pc=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new vc(e,this.defaultValue))}}]),e}(),vc=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).defaultValue=n,r.isEmpty=!0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),t}(m);function gc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_c;return function(t){return t.lift(new yc(e))}}var yc=function(){function e(t){_classCallCheck(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new mc(e,this.errorFactory))}}]),e}(),mc=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).errorFactory=n,r.hasValue=!1,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),t}(m);function _c(){return new uc}function bc(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ju((function(t,n){return e(t,n,r)})):$,cc(1),n?dc(t):gc((function(){return new uc})))}}function kc(e){return function(t){var n=new wc(e),r=t.lift(n);return n.caught=r}}var wc=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Cc(e,this.selector,this.caught))}}]),e}(),Cc=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).selector=n,i.caught=r,i}return _inherits(t,e),_createClass(t,[{key:"error",value:function(e){if(!this.isStopped){var n;try{n=this.selector(e,this.caught)}catch(s){return void _get(_getPrototypeOf(t.prototype),"error",this).call(this,s)}this._unsubscribeAndRecycle();var r=new D(this,void 0,void 0);this.add(r);var i=B(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}]),t}(V),Sc=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),Ec=function(){function e(t,n,r,i){_classCallCheck(this,e),this.waitFor=t,this.absoluteTimeout=n,this.withObservable=r,this.scheduler=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new xc(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}]),e}(),xc=function(e){function t(e,n,r,i,s){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).absoluteTimeout=n,o.waitFor=r,o.withObservable=i,o.scheduler=s,o.action=null,o.scheduleTimeout(),o}return _inherits(t,e),_createClass(t,[{key:"scheduleTimeout",value:function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))}},{key:"_next",value:function(e){this.absoluteTimeout||this.scheduleTimeout(),_get(_getPrototypeOf(t.prototype),"_next",this).call(this,e)}},{key:"_unsubscribe",value:function(){this.action=null,this.scheduler=null,this.withObservable=null}}],[{key:"dispatchTimeout",value:function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(B(e,t))}}]),t}(V),Ac=n("gfpf"),Tc=function e(){_classCallCheck(this,e)},Fc=function e(){_classCallCheck(this,e)};function Ic(e){var t=e.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function Pc(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var Oc=function e(){_classCallCheck(this,e)},Rc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"validateAtHash",value:function(e){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.inferHashAlgorithm(e.idTokenHeader),t.next=3,this.calcHash(e.accessToken,n);case 3:return r=t.sent,i=Pc(r.substr(0,r.length/2)),s=e.idTokenClaims.at_hash.replace(/=/g,""),t.abrupt("return",(i!==s&&(console.error("exptected at_hash: "+i),console.error("actual at_hash: "+s)),i===s));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"inferHashAlgorithm",value:function(e){var t=e.alg;if(!t.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+t);return"sha-"+t.substr(2)}}]),e}(),Dc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getHashFragmentParams",value:function(e){var t=e||window.location.hash;if(0!==(t=decodeURIComponent(t)).indexOf("#"))return{};var n=t.indexOf("?");return t=t.substr(n>-1?n+1:1),this.parseQueryString(t)}},{key:"parseQueryString",value:function(e){var t,n,r,i,s,o,a,u={};if(null===e)return u;t=e.split("&");for(var l=0;l<t.length;l++)-1===(r=(n=t[l]).indexOf("="))?(i=n,s=null):(i=n.substr(0,r),s=n.substr(r+1)),o=decodeURIComponent(i),a=decodeURIComponent(s),"/"===o.substr(0,1)&&(o=o.substr(1)),u[o]=a;return u}}]),e}(),Nc=function e(t){_classCallCheck(this,e),this.type=t},jc=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).info=r,n}return _inherits(t,e),t}(Nc),Lc=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).info=r,n}return _inherits(t,e),t}(Nc),Mc=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).reason=n,r.params=i,r}return _inherits(t,e),t}(Nc),Hc=function e(t){_classCallCheck(this,e),this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.openUri=function(e){location.href=e},t&&Object.assign(this,t)},Bc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return encodeURIComponent(e)}},{key:"encodeValue",value:function(e){return encodeURIComponent(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}(),Vc=function e(){_classCallCheck(this,e)},Uc=function(e){function t(e,n,r,i,s,o,a,u){var l;_classCallCheck(this,t),(l=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).ngZone=e,l.http=n,l.config=s,l.urlHelper=o,l.logger=a,l.crypto=u,l.discoveryDocumentLoaded=!1,l.state="",l.eventsSubject=new P,l.discoveryDocumentLoadedSubject=new P,l.grantTypesSupported=[],l.inImplicitFlow=!1,l.debug("angular-oauth2-oidc v8-beta"),l.discoveryDocumentLoaded$=l.discoveryDocumentLoadedSubject.asObservable(),l.events=l.eventsSubject.asObservable(),i&&(l.tokenValidationHandler=i),s&&l.configure(s);try{r?l.setStorage(r):"undefined"!=typeof sessionStorage&&l.setStorage(sessionStorage)}catch(c){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",c)}return l.setupRefreshTimer(),l}return _inherits(t,e),_createClass(t,[{key:"configure",value:function(e){Object.assign(this,new Hc,e),this.config=Object.assign({},new Hc,e),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}},{key:"configChanged",value:function(){this.setupRefreshTimer()}},{key:"restartSessionChecksIfStillLoggedIn",value:function(){this.hasValidIdToken()&&this.initSessionCheck()}},{key:"restartRefreshTimerIfStillLoggedIn",value:function(){this.setupExpirationTimers()}},{key:"setupSessionCheck",value:function(){var e=this;this.events.pipe(Ju((function(e){return"token_received"===e.type}))).subscribe((function(t){e.initSessionCheck()}))}},{key:"setupAutomaticSilentRefresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!0;this.events.pipe(Kl((function(e){"token_received"===e.type?i=!0:"logout"===e.type&&(i=!1)})),Ju((function(e){return"token_expires"===e.type}))).subscribe((function(s){null!=n&&"any"!==n&&s.info!==n||!i||e.refreshInternal(t,r).catch((function(t){e.debug("Automatic silent refresh did not work")}))})),this.restartRefreshTimerIfStillLoggedIn()}},{key:"refreshInternal",value:function(e,t){return"code"===this.responseType?this.refreshToken():this.silentRefresh(e,t)}},{key:"loadDiscoveryDocumentAndTryLogin",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loadDiscoveryDocument().then((function(n){return e.tryLogin(t)}))}},{key:"loadDiscoveryDocumentAndLogin",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loadDiscoveryDocumentAndTryLogin(t).then((function(t){return!(!e.hasValidIdToken()||!e.hasValidAccessToken())||(e.initImplicitFlow(),!1)}))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.showDebugInformation&&this.logger.debug.apply(console,t)}},{key:"validateUrlFromDiscoveryDocument",value:function(e){var t=[],n=this.validateUrlForHttps(e),r=this.validateUrlAgainstIssuer(e);return n||t.push("https for all urls required. Also for urls received by discovery."),r||t.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),t}},{key:"validateUrlForHttps",value:function(e){if(!e)return!0;var t=e.toLowerCase();return!1===this.requireHttps||!(!t.match(/^http:\/\/localhost($|[:\/])/)&&!t.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps)||t.startsWith("https://")}},{key:"validateUrlAgainstIssuer",value:function(e){return!this.strictDiscoveryDocumentValidation||!e||e.toLowerCase().startsWith(this.issuer.toLowerCase())}},{key:"setupRefreshTimer",value:function(){var e=this;"undefined"!=typeof window?(this.hasValidIdToken()&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.events.pipe(Ju((function(e){return"token_received"===e.type}))).subscribe((function(t){e.clearAccessTokenTimer(),e.clearIdTokenTimer(),e.setupExpirationTimers()}))):this.debug("timer not supported on this plattform")}},{key:"setupExpirationTimers",value:function(){var e=this.getIdTokenExpiration()||Number.MAX_VALUE,t=(this.getAccessTokenExpiration()||Number.MAX_VALUE)<=e;this.hasValidAccessToken()&&t&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&!t&&this.setupIdTokenTimer()}},{key:"setupAccessTokenTimer",value:function(){var e=this,t=this.getAccessTokenExpiration(),n=this.getAccessTokenStoredAt(),r=this.calcTimeout(n,t);this.ngZone.runOutsideAngular((function(){e.accessTokenTimeoutSubscription=Qu(new Lc("token_expires","access_token")).pipe(tc(r)).subscribe((function(t){e.ngZone.run((function(){e.eventsSubject.next(t)}))}))}))}},{key:"setupIdTokenTimer",value:function(){var e=this,t=this.getIdTokenExpiration(),n=this.getIdTokenStoredAt(),r=this.calcTimeout(n,t);this.ngZone.runOutsideAngular((function(){e.idTokenTimeoutSubscription=Qu(new Lc("token_expires","id_token")).pipe(tc(r)).subscribe((function(t){e.ngZone.run((function(){e.eventsSubject.next(t)}))}))}))}},{key:"clearAccessTokenTimer",value:function(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}},{key:"clearIdTokenTimer",value:function(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}},{key:"calcTimeout",value:function(e,t){var n=Date.now();return Math.max(0,(t-e)*this.timeoutFactor-(n-e))}},{key:"setStorage",value:function(e){this._storage=e,this.configChanged()}},{key:"loadDiscoveryDocument",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){t||((t=e.issuer||"").endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),e.validateUrlForHttps(t)?e.http.get(t).subscribe((function(t){if(!e.validateDiscoveryDocument(t))return e.eventsSubject.next(new Mc("discovery_document_validation_error",null)),void r("discovery_document_validation_error");e.loginUrl=t.authorization_endpoint,e.logoutUrl=t.end_session_endpoint||e.logoutUrl,e.grantTypesSupported=t.grant_types_supported,e.issuer=t.issuer,e.tokenEndpoint=t.token_endpoint,e.userinfoEndpoint=t.userinfo_endpoint,e.jwksUri=t.jwks_uri,e.sessionCheckIFrameUrl=t.check_session_iframe||e.sessionCheckIFrameUrl,e.discoveryDocumentLoaded=!0,e.discoveryDocumentLoadedSubject.next(t),e.sessionChecksEnabled&&e.restartSessionChecksIfStillLoggedIn(),e.loadJwks().then((function(r){var i=new jc("discovery_document_loaded",{discoveryDocument:t,jwks:r});e.eventsSubject.next(i),n(i)})).catch((function(t){e.eventsSubject.next(new Mc("discovery_document_load_error",t)),r(t)}))}),(function(t){e.logger.error("error loading discovery document",t),e.eventsSubject.next(new Mc("discovery_document_load_error",t)),r(t)})):r("issuer must use https, or config value for property requireHttps must allow http")}))}},{key:"loadJwks",value:function(){var e=this;return new Promise((function(t,n){e.jwksUri?e.http.get(e.jwksUri).subscribe((function(n){e.jwks=n,e.eventsSubject.next(new jc("discovery_document_loaded")),t(n)}),(function(t){e.logger.error("error loading jwks",t),e.eventsSubject.next(new Mc("jwks_load_error",t)),n(t)})):t(null)}))}},{key:"validateDiscoveryDocument",value:function(e){var t;return this.skipIssuerCheck||e.issuer===this.issuer?(t=this.validateUrlFromDiscoveryDocument(e.authorization_endpoint)).length>0?(this.logger.error("error validating authorization_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.end_session_endpoint)).length>0?(this.logger.error("error validating end_session_endpoint in discovery document",t),!1):((t=this.validateUrlFromDiscoveryDocument(e.token_endpoint)).length>0&&this.logger.error("error validating token_endpoint in discovery document",t),(t=this.validateUrlFromDiscoveryDocument(e.userinfo_endpoint)).length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.jwks_uri)).length>0?(this.logger.error("error validating jwks_uri in discovery document",t),!1):(this.sessionChecksEnabled&&!e.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0)):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+e.issuer),!1)}},{key:"fetchTokenUsingPasswordFlowAndLoadUserProfile",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new nl;return this.fetchTokenUsingPasswordFlow(e,t,r).then((function(){return n.loadUserProfile()}))}},{key:"loadUserProfile",value:function(){var e=this;if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((function(t,n){var r=(new nl).set("Authorization","Bearer "+e.getAccessToken());e.http.get(e.userinfoEndpoint,{headers:r}).subscribe((function(r){e.debug("userinfo received",r);var i=e.getIdentityClaims()||{};e.skipSubjectCheck||!e.oidc||i.sub&&r.sub===i.sub?(r=Object.assign({},i,r),e._storage.setItem("id_token_claims_obj",JSON.stringify(r)),e.eventsSubject.next(new jc("user_profile_loaded")),t(r)):n("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false")}),(function(t){e.logger.error("error loading user info",t),e.eventsSubject.next(new Mc("user_profile_load_error",t)),n(t)}))}))}},{key:"fetchTokenUsingPasswordFlow",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new nl;if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((function(i,s){var o=new sl({encoder:new Bc}).set("grant_type","password").set("scope",n.scope).set("username",e).set("password",t);if(n.useHttpBasicAuth){var a=btoa("".concat(n.clientId,":").concat(n.dummyClientSecret));r=r.set("Authorization","Basic "+a)}if(n.useHttpBasicAuth||(o=o.set("client_id",n.clientId)),!n.useHttpBasicAuth&&n.dummyClientSecret&&(o=o.set("client_secret",n.dummyClientSecret)),n.customQueryParams){var u=!0,l=!1,c=void 0;try{for(var h,f=Object.getOwnPropertyNames(n.customQueryParams)[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value;o=o.set(d,n.customQueryParams[d])}}catch(p){l=!0,c=p}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}}r=r.set("Content-Type","application/x-www-form-urlencoded"),n.http.post(n.tokenEndpoint,o,{headers:r}).subscribe((function(e){n.debug("tokenResponse",e),n.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in,e.scope),n.eventsSubject.next(new jc("token_received")),i(e)}),(function(e){n.logger.error("Error performing password flow",e),n.eventsSubject.next(new Mc("token_error",e)),s(e)}))}))}},{key:"refreshToken",value:function(){var e=this;if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((function(t,n){var r=(new sl).set("grant_type","refresh_token").set("client_id",e.clientId).set("scope",e.scope).set("refresh_token",e._storage.getItem("refresh_token"));if(e.dummyClientSecret&&(r=r.set("client_secret",e.dummyClientSecret)),e.customQueryParams){var i=!0,s=!1,o=void 0;try{for(var a,u=Object.getOwnPropertyNames(e.customQueryParams)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var l=a.value;r=r.set(l,e.customQueryParams[l])}}catch(h){s=!0,o=h}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}}var c=(new nl).set("Content-Type","application/x-www-form-urlencoded");e.http.post(e.tokenEndpoint,r,{headers:c}).pipe(sc((function(t){return t.id_token?W(e.processIdToken(t.id_token,t.access_token,!0)).pipe(Kl((function(t){return e.storeIdToken(t)})),U((function(e){return t}))):Qu(t)}))).subscribe((function(n){e.debug("refresh tokenResponse",n),e.storeAccessTokenResponse(n.access_token,n.refresh_token,n.expires_in,n.scope),e.eventsSubject.next(new jc("token_received")),e.eventsSubject.next(new jc("token_refreshed")),t(n)}),(function(t){e.logger.error("Error performing password flow",t),e.eventsSubject.next(new Mc("token_refresh_error",t)),n(t)}))}))}},{key:"removeSilentRefreshEventListener",value:function(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}},{key:"setupSilentRefreshEventListener",value:function(){var e=this;this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=function(t){var n=e.processMessageEventMessage(t);e.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0,onLoginError:function(t){e.eventsSubject.next(new Mc("silent_refresh_error",t))},onTokenReceived:function(){e.eventsSubject.next(new jc("silently_refreshed"))}}).catch((function(t){return e.debug("tryLogin during silent refresh failed",t)}))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}},{key:"silentRefresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");if("undefined"==typeof document)throw new Error("silent refresh is not supported on this platform");var i=document.getElementById(this.silentRefreshIFrameName);i&&document.body.removeChild(i),this.silentRefreshSubject=r.sub;var s=document.createElement("iframe");return s.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,n,t).then((function(t){s.setAttribute("src",t),e.silentRefreshShowIFrame||(s.style.display="none"),document.body.appendChild(s)})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){if(!h(t[0]))return t[0];t=t[0]}return Y(t,void 0).lift(new Hl)}([this.events.pipe(Ju((function(e){return e instanceof Mc})),bc()),this.events.pipe(Ju((function(e){return"silently_refreshed"===e.type})),bc()),Qu(new Mc("silent_refresh_timeout",null)).pipe(tc(this.silentRefreshTimeout))]).pipe(Kl((function(t){"silent_refresh_timeout"===t.type&&e.eventsSubject.next(t)})),U((function(e){if(e instanceof Mc)throw e;return e}))).toPromise()}},{key:"initImplicitFlowInPopup",value:function(e){var t=this;return e=e||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then((function(n){return new Promise((function(r,i){var s=window.open(n,"_blank",t.calculatePopupFeatures(e)),o=function(){window.removeEventListener("message",a),s.close(),s=null},a=function(e){var n=t.processMessageEventMessage(e);t.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0}).then((function(){o(),r()}),(function(e){o(),i(e)}))};window.addEventListener("message",a)}))}))}},{key:"calculatePopupFeatures",value:function(e){var t=e.height||470,n=e.width||500,r=screen.width/2-n/2;return"location=no,toolbar=no,width=".concat(n,",height=").concat(t,",top=").concat(screen.height/2-t/2,",left=").concat(r)}},{key:"processMessageEventMessage",value:function(e){var t="#";if(this.silentRefreshMessagePrefix&&(t+=this.silentRefreshMessagePrefix),e&&e.data&&"string"==typeof e.data){var n=e.data;return n.startsWith(t)?"#"+n.substr(t.length):void 0}}},{key:"canPerformSessionCheck",value:function(){return!!this.sessionChecksEnabled&&(this.sessionCheckIFrameUrl?this.getSessionState()?"undefined"!=typeof document:(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1))}},{key:"setupSessionCheckEventListener",value:function(){var e=this;this.removeSessionCheckEventListener(),this.sessionCheckEventListener=function(t){var n=t.origin.toLowerCase(),r=e.issuer.toLowerCase();switch(e.debug("sessionCheckEventListener"),r.startsWith(n)||e.debug("sessionCheckEventListener","wrong origin",n,"expected",r),t.data){case"unchanged":e.handleSessionUnchanged();break;case"changed":e.ngZone.run((function(){e.handleSessionChange()}));break;case"error":e.ngZone.run((function(){e.handleSessionError()}))}e.debug("got info from session check inframe",t)},this.ngZone.runOutsideAngular((function(){window.addEventListener("message",e.sessionCheckEventListener)}))}},{key:"handleSessionUnchanged",value:function(){this.debug("session check","session unchanged")}},{key:"handleSessionChange",value:function(){var e=this;this.eventsSubject.next(new Lc("session_changed")),this.stopSessionCheckTimer(),this.silentRefreshRedirectUri?(this.silentRefresh().catch((function(t){return e.debug("silent refresh failed after session changed")})),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new Lc("session_terminated")),this.logOut(!0))}},{key:"waitForSilentRefreshAfterSessionChange",value:function(){var e=this;this.events.pipe(Ju((function(e){return"silently_refreshed"===e.type||"silent_refresh_timeout"===e.type||"silent_refresh_error"===e.type})),bc()).subscribe((function(t){"silently_refreshed"!==t.type&&(e.debug("silent refresh did not work after session changed"),e.eventsSubject.next(new Lc("session_terminated")),e.logOut(!0))}))}},{key:"handleSessionError",value:function(){this.stopSessionCheckTimer(),this.eventsSubject.next(new Lc("session_error"))}},{key:"removeSessionCheckEventListener",value:function(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}},{key:"initSessionCheck",value:function(){if(this.canPerformSessionCheck()){var e=document.getElementById(this.sessionCheckIFrameName);e&&document.body.removeChild(e);var t=document.createElement("iframe");t.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),t.setAttribute("src",this.sessionCheckIFrameUrl),t.style.display="none",document.body.appendChild(t),this.startSessionCheckTimer()}}},{key:"startSessionCheckTimer",value:function(){var e=this;this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular((function(){e.sessionCheckTimer=setInterval(e.checkSession.bind(e),e.sessionCheckIntervall)}))}},{key:"stopSessionCheckTimer",value:function(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}},{key:"checkSession",value:function(){var e=document.getElementById(this.sessionCheckIFrameName);e||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);var t=this.getSessionState();t||this.stopSessionCheckTimer(),e.contentWindow.postMessage(this.clientId+" "+t,this.issuer)}},{key:"createLoginUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Ll(this,void 0,void 0,regeneratorRuntime.mark((function s(){var o,a,u,l,c,h,f,d,p,v,g,y,m,_,b,k,w,C;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=n||this.redirectUri,s.next=3,this.createAndSaveNonce();case 3:if(a=s.sent,e=e?a+this.config.nonceStateSeparator+e:a,this.requestAccessToken||this.oidc){s.next=6;break}throw new Error("Either requestAccessToken or oidc or both must be true");case 6:if(this.responseType=this.config.responseType?this.config.responseType:this.oidc&&this.requestAccessToken?"id_token token":this.oidc&&!this.requestAccessToken?"id_token":"token",u=this.loginUrl.indexOf("?")>-1?"&":"?",l=this.scope,this.oidc&&!l.match(/(^|\s)openid($|\s)/)&&(l="openid "+l),c=this.loginUrl+u+"response_type="+encodeURIComponent(this.responseType)+"&client_id="+encodeURIComponent(this.clientId)+"&state="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(o)+"&scope="+encodeURIComponent(l),"code"!==this.responseType||this.disablePKCE){s.next=19;break}return s.next=14,this.createChallangeVerifierPairForPKCE();case 14:h=s.sent,f=_slicedToArray(h,2),d=f[0],p=f[1],this._storage.setItem("PKCI_verifier",p),c+="&code_challenge="+d,c+="&code_challenge_method=S256";case 19:for(t&&(c+="&login_hint="+encodeURIComponent(t)),this.resource&&(c+="&resource="+encodeURIComponent(this.resource)),this.oidc&&(c+="&nonce="+encodeURIComponent(a)),r&&(c+="&prompt=none"),v=0,g=Object.keys(i);v<g.length;v++)y=g[v],c+="&"+encodeURIComponent(y)+"="+encodeURIComponent(i[y]);if(!this.customQueryParams){s.next=41;break}for(m=!0,_=!1,b=void 0,s.prev=25,k=Object.getOwnPropertyNames(this.customQueryParams)[Symbol.iterator]();!(m=(w=k.next()).done);m=!0)C=w.value,c+="&"+C+"="+encodeURIComponent(this.customQueryParams[C]);s.next=33;break;case 29:s.prev=29,s.t0=s.catch(25),_=!0,b=s.t0;case 33:s.prev=33,s.prev=34,m||null==k.return||k.return();case 36:if(s.prev=36,!_){s.next=39;break}throw b;case 39:return s.finish(36);case 40:return s.finish(33);case 41:return s.abrupt("return",c);case 42:case"end":return s.stop()}}),s,this,[[25,29,33,41],[34,,36,40]])})))}},{key:"initImplicitFlowInternal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!this.inImplicitFlow){if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use https, or config value for property requireHttps must allow http");var r={},i=null;"string"==typeof n?i=n:"object"==typeof n&&(r=n),this.createLoginUrl(t,i,null,!1,r).then(this.config.openUri).catch((function(t){console.error("Error in initImplicitFlow",t),e.inImplicitFlow=!1}))}}},{key:"initImplicitFlow",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""!==this.loginUrl?this.initImplicitFlowInternal(t,n):this.events.pipe(Ju((function(e){return"discovery_document_loaded"===e.type}))).subscribe((function(r){return e.initImplicitFlowInternal(t,n)}))}},{key:"resetImplicitFlow",value:function(){this.inImplicitFlow=!1}},{key:"callOnTokenReceivedIfExists",value:function(e){if(e.onTokenReceived){var t={idClaims:this.getIdentityClaims(),idToken:this.getIdToken(),accessToken:this.getAccessToken(),state:this.state};e.onTokenReceived(t)}}},{key:"storeAccessTokenResponse",value:function(e,t,n,r){if(this._storage.setItem("access_token",e),r&&this._storage.setItem("granted_scopes",JSON.stringify(r.split("+"))),this._storage.setItem("access_token_stored_at",""+Date.now()),n){var i=1e3*n,s=(new Date).getTime()+i;this._storage.setItem("expires_at",""+s)}t&&this._storage.setItem("refresh_token",t)}},{key:"tryLogin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"code"===this.config.responseType?this.tryLoginCodeFlow().then((function(e){return!0})):this.tryLoginImplicitFlow(e)}},{key:"parseQueryString",value:function(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):{}}},{key:"tryLoginCodeFlow",value:function(){var e=this,t=this.parseQueryString(window.location.search),n=t.code,r=t.state,i=location.href.replace(/[&\?]code=[^&\$]*/,"").replace(/[&\?]scope=[^&\$]*/,"").replace(/[&\?]state=[^&\$]*/,"").replace(/[&\?]session_state=[^&\$]*/,"");history.replaceState(null,window.name,i);var s=_slicedToArray(this.parseState(r),2),o=s[0],a=s[1];if(this.state=a,t.error){this.debug("error trying to login"),this.handleLoginError({},t);var u=new Mc("code_error",{},t);return this.eventsSubject.next(u),Promise.reject(u)}if(!o)return Promise.resolve();if(!this.validateNonce(o)){var l=new Mc("invalid_nonce_in_state",null);return this.eventsSubject.next(l),Promise.reject(l)}return n?new Promise((function(t,r){e.getTokenFromCode(n).then((function(e){t()})).catch((function(e){r(e)}))})):Promise.resolve()}},{key:"getTokenFromCode",value:function(e){var t=(new sl).set("grant_type","authorization_code").set("code",e).set("redirect_uri",this.redirectUri);if(!this.disablePKCE){var n=this._storage.getItem("PKCI_verifier");n?t=t.set("code_verifier",n):console.warn("No PKCI verifier found in oauth storage!")}return this.fetchAndProcessToken(t)}},{key:"fetchAndProcessToken",value:function(e){var t=this,n=(new nl).set("Content-Type","application/x-www-form-urlencoded");if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use Http. Also check property requireHttps.");if(this.useHttpBasicAuth){var r=btoa("".concat(this.clientId,":").concat(this.dummyClientSecret));n=n.set("Authorization","Basic "+r)}return this.useHttpBasicAuth||(e=e.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(e=e.set("client_secret",this.dummyClientSecret)),new Promise((function(r,i){if(t.customQueryParams){var s=!0,o=!1,a=void 0;try{for(var u,l=Object.getOwnPropertyNames(t.customQueryParams)[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;e=e.set(c,t.customQueryParams[c])}}catch(h){o=!0,a=h}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}}t.http.post(t.tokenEndpoint,e,{headers:n}).subscribe((function(e){t.debug("refresh tokenResponse",e),t.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in,e.scope),t.oidc&&e.id_token?t.processIdToken(e.id_token,e.access_token).then((function(n){t.storeIdToken(n),t.eventsSubject.next(new jc("token_received")),t.eventsSubject.next(new jc("token_refreshed")),r(e)})).catch((function(e){t.eventsSubject.next(new Mc("token_validation_error",e)),console.error("Error validating tokens"),console.error(e),i(e)})):(t.eventsSubject.next(new jc("token_received")),t.eventsSubject.next(new jc("token_refreshed")),r(e))}),(function(e){console.error("Error getting token",e),t.eventsSubject.next(new Mc("token_refresh_error",e)),i(e)}))}))}},{key:"tryLoginImplicitFlow",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=(n=n||{}).customHashFragment?this.urlHelper.getHashFragmentParams(n.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",e);var r=e.state,i=this.parseState(r),s=_slicedToArray(i,2),o=s[0],a=s[1];if(this.state=a,e.error){this.debug("error trying to login"),this.handleLoginError(n,e);var u=new Mc("token_error",{},e);return this.eventsSubject.next(u),Promise.reject(u)}var l=e.access_token,c=e.id_token,h=e.session_state,f=e.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!l)return Promise.resolve(!1);if(this.requestAccessToken&&!n.disableOAuth2StateCheck&&!r)return Promise.resolve(!1);if(this.oidc&&!c)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!h&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!n.disableOAuth2StateCheck&&!this.validateNonce(o)){var d=new Mc("invalid_nonce_in_state",null);return this.eventsSubject.next(d),Promise.reject(d)}return this.requestAccessToken&&this.storeAccessTokenResponse(l,null,e.expires_in||this.fallbackAccessTokenExpirationTimeInSec,f),this.oidc?this.processIdToken(c,l).then((function(e){return n.validationHandler?n.validationHandler({accessToken:l,idClaims:e.idTokenClaims,idToken:e.idToken,state:r}).then((function(t){return e})):e})).then((function(e){return t.storeIdToken(e),t.storeSessionState(h),t.clearHashAfterLogin&&(location.hash=""),t.eventsSubject.next(new jc("token_received")),t.callOnTokenReceivedIfExists(n),t.inImplicitFlow=!1,!0})).catch((function(e){return t.eventsSubject.next(new Mc("token_validation_error",e)),t.logger.error("Error validating tokens"),t.logger.error(e),Promise.reject(e)})):(this.eventsSubject.next(new jc("token_received")),this.clearHashAfterLogin&&!n.preventClearHashAfterLogin&&(location.hash=""),this.callOnTokenReceivedIfExists(n),Promise.resolve(!0))}},{key:"parseState",value:function(e){var t=e,n="";if(e){var r=e.indexOf(this.config.nonceStateSeparator);r>-1&&(t=e.substr(0,r),n=e.substr(r+this.config.nonceStateSeparator.length))}return[t,n]}},{key:"validateNonce",value:function(e){var t=this._storage.getItem("nonce");return t===e||(console.error("Validating access_token failed, wrong state/nonce.",t,e),!1)}},{key:"storeIdToken",value:function(e){this._storage.setItem("id_token",e.idToken),this._storage.setItem("id_token_claims_obj",e.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+e.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+Date.now())}},{key:"storeSessionState",value:function(e){this._storage.setItem("session_state",e)}},{key:"getSessionState",value:function(){return this._storage.getItem("session_state")}},{key:"handleLoginError",value:function(e,t){e.onLoginError&&e.onLoginError(t),this.clearHashAfterLogin&&(location.hash="")}},{key:"processIdToken",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.split("."),s=Ic(this.padBase64(i[0])),o=JSON.parse(s),a=Ic(this.padBase64(i[1])),u=JSON.parse(a),l=this._storage.getItem("nonce");if(Array.isArray(u.aud)){if(u.aud.every((function(e){return e!==n.clientId}))){var c="Wrong audience: "+u.aud.join(",");return this.logger.warn(c),Promise.reject(c)}}else if(u.aud!==this.clientId){var h="Wrong audience: "+u.aud;return this.logger.warn(h),Promise.reject(h)}if(!u.sub){var f="No sub claim in id_token";return this.logger.warn(f),Promise.reject(f)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==u.sub){var d="After refreshing, we got an id_token for another user (sub). "+"Expected sub: ".concat(this.silentRefreshSubject,", received sub: ").concat(u.sub);return this.logger.warn(d),Promise.reject(d)}if(!u.iat){var p="No iat claim in id_token";return this.logger.warn(p),Promise.reject(p)}if(!this.skipIssuerCheck&&u.iss!==this.issuer){var v="Wrong issuer: "+u.iss;return this.logger.warn(v),Promise.reject(v)}if(!r&&u.nonce!==l){var g="Wrong nonce: "+u.nonce;return this.logger.warn(g),Promise.reject(g)}if(!this.disableAtHashCheck&&this.requestAccessToken&&!u.at_hash){var y="An at_hash is needed!";return this.logger.warn(y),Promise.reject(y)}var m=Date.now(),_=1e3*u.iat,b=1e3*u.exp,k=1e3*(this.clockSkewInSec||600);if(_-k>=m||b+k<=m){var w="Token has expired";return console.error(w),console.error({now:m,issuedAtMSec:_,expiresAtMSec:b}),Promise.reject(w)}var C={accessToken:t,idToken:e,jwks:this.jwks,idTokenClaims:u,idTokenHeader:o,loadKeys:function(){return n.loadJwks()}};return this.checkAtHash(C).then((function(t){if(!n.disableAtHashCheck&&n.requestAccessToken&&!t){return n.logger.warn("Wrong at_hash"),Promise.reject("Wrong at_hash")}return n.checkSignature(C).then((function(t){return{idToken:e,idTokenClaims:u,idTokenClaimsJson:a,idTokenHeader:o,idTokenHeaderJson:s,idTokenExpiresAt:b}}))}))}},{key:"getIdentityClaims",value:function(){var e=this._storage.getItem("id_token_claims_obj");return e?JSON.parse(e):null}},{key:"getGrantedScopes",value:function(){var e=this._storage.getItem("granted_scopes");return e?JSON.parse(e):null}},{key:"getIdToken",value:function(){return this._storage?this._storage.getItem("id_token"):null}},{key:"padBase64",value:function(e){for(;e.length%4!=0;)e+="=";return e}},{key:"getAccessToken",value:function(){return this._storage?this._storage.getItem("access_token"):null}},{key:"getRefreshToken",value:function(){return this._storage?this._storage.getItem("refresh_token"):null}},{key:"getAccessTokenExpiration",value:function(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}},{key:"getAccessTokenStoredAt",value:function(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}},{key:"getIdTokenStoredAt",value:function(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}},{key:"getIdTokenExpiration",value:function(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}},{key:"hasValidAccessToken",value:function(){if(this.getAccessToken()){var e=this._storage.getItem("expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1}},{key:"hasValidIdToken",value:function(){if(this.getIdToken()){var e=this._storage.getItem("id_token_expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1}},{key:"authorizationHeader",value:function(){return"Bearer "+this.getAccessToken()}},{key:"logOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this._storage.removeItem("nonce"),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.silentRefreshSubject=null,this.eventsSubject.next(new Lc("logout")),this.logoutUrl&&!e&&(t||this.postLogoutRedirectUri)){var n;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl must use https, or config value for property requireHttps must allow http");if(this.logoutUrl.indexOf("{{")>-1)n=this.logoutUrl.replace(/\{\{id_token\}\}/,t).replace(/\{\{client_id\}\}/,this.clientId);else{var r=new sl;t&&(r=r.set("id_token_hint",t));var i=this.postLogoutRedirectUri||this.redirectUri;i&&(r=r.set("post_logout_redirect_uri",i)),n=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+r.toString()}this.config.openUri(n)}}},{key:"createAndSaveNonce",value:function(){var e=this;return this.createNonce().then((function(t){return e._storage.setItem("nonce",t),t}))}},{key:"ngOnDestroy",value:function(){this.clearAccessTokenTimer(),this.clearIdTokenTimer()}},{key:"createNonce",value:function(){var e=this;return new Promise((function(t){if(e.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");var n="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-",r=45,i="",s=self.crypto||self.msCrypto;if(s)for(var o=s.getRandomValues(new Uint8Array(r));0<r--;)i+=n[63&o[r]];else for(;0<r--;)i+=n[64*Math.random()|0];t(i)}))}},{key:"checkAtHash",value:function(e){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tokenValidationHandler?this.tokenValidationHandler.validateAtHash(e):(this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"checkSignature",value:function(e){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(e):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}},{key:"initLoginFlow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"code"===this.responseType?this.initCodeFlow(e,t):this.initImplicitFlow(e,t)}},{key:"initCodeFlow",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};""!==this.loginUrl?this.initCodeFlowInternal(t,n):this.events.pipe(Ju((function(e){return"discovery_document_loaded"===e.type}))).subscribe((function(r){return e.initCodeFlowInternal(t,n)}))}},{key:"initCodeFlowInternal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use Http. Also check property requireHttps.");this.createLoginUrl(e,"",null,!1,t).then((function(e){location.href=e})).catch((function(e){console.error("Error in initAuthorizationCodeFlow"),console.error(e)}))}},{key:"createChallangeVerifierPairForPKCE",value:function(){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}throw new Error("PKCI support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");case 2:return e.next=4,this.createNonce();case 4:return t=e.sent,e.t0=Pc,e.next=8,this.crypto.calcHash(t,"sha-256");case 8:return e.t1=e.sent,e.t2=(0,e.t0)(e.t1),e.t3=t,e.abrupt("return",[e.t2,e.t3]);case 12:case"end":return e.stop()}}),e,this)})))}}]),t}(Hc),Kc=function e(){_classCallCheck(this,e)},zc=function e(){_classCallCheck(this,e)},qc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"handleError",value:function(e){return Vl(e)}}]),e}(),Wc=function(){function e(t,n,r,i){_classCallCheck(this,e),this.authStorage=t,this.oAuthService=n,this.errorHandler=r,this.moduleConfig=i}return _createClass(e,[{key:"checkUrl",value:function(e){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(e):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find((function(t){return e.startsWith(t)}))}},{key:"intercept",value:function(e,t){var n=this,r=e.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer?this.moduleConfig.resourceServer.allowedUrls&&!this.checkUrl(r)?t.handle(e):this.moduleConfig.resourceServer.sendAccessToken?X(Qu(this.oAuthService.getAccessToken()).pipe(Ju((function(e){return!!e}))),this.oAuthService.events.pipe(Ju((function(e){return"token_received"===e.type})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ql;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ql;return function(r){var i=$l(e),s=i?+e-n.now():Math.abs(e);return r.lift(new Ec(s,i,t,n))}}(e,Vl(new Sc),t)}(this.oAuthService.waitForTokenInMsec||0),kc((function(e){return Qu(null)})),U((function(e){return n.oAuthService.getAccessToken()})))).pipe(cc(1),G((function(r){if(r){var i=e.headers.set("Authorization","Bearer "+r);e=e.clone({headers:i})}return t.handle(e).pipe(kc((function(e){return n.errorHandler.handleError(e)})))}))):t.handle(e).pipe(kc((function(e){return n.errorHandler.handleError(e)}))):t.handle(e)}}]),e}(),Gc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"validateSignature",value:function(e){return Promise.resolve(null)}},{key:"validateAtHash",value:function(e){return Promise.resolve(!0)}}]),e}();function Zc(){return console}function Qc(){return"undefined"!=typeof sessionStorage?sessionStorage:null}var $c=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))).allowedAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],e.gracePeriodInSec=600,e}return _inherits(t,e),_createClass(t,[{key:"validateSignature",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.idToken)throw new Error("Parameter idToken expected!");if(!e.idTokenHeader)throw new Error("Parameter idTokenHandler expected.");if(!e.jwks)throw new Error("Parameter jwks expected!");if(!e.jwks.keys||!Array.isArray(e.jwks.keys)||0===e.jwks.keys.length)throw new Error("Array keys in jwks missing!");var r,i=e.idTokenHeader.kid,s=e.jwks.keys,o=e.idTokenHeader.alg;if(i)r=s.find((function(e){return e.kid===i}));else{var a=this.alg2kty(o),u=s.filter((function(e){return e.kty===a&&"sig"===e.use}));if(u.length>1){var l="More than one matching key found. Please specify a kid in the id_token header.";return console.error(l),Promise.reject(l)}1===u.length&&(r=u[0])}if(!r&&!n&&e.loadKeys)return e.loadKeys().then((function(t){return e.jwks=t})).then((function(n){return t.validateSignature(e,!0)}));if(!r&&n&&!i){var c="No matching key found.";return console.error(c),Promise.reject(c)}if(!r&&n&&i){var h="expected key not found in property jwks. This property is most likely loaded with the discovery document. Expected key id (kid): "+i;return console.error(h),Promise.reject(h)}var f=Ac.KEYUTIL.getKey(r);return Ac.KJUR.jws.JWS.verifyJWT(e.idToken,f,{alg:this.allowedAlgorithms,gracePeriod:this.gracePeriodInSec})?Promise.resolve():Promise.reject("Signature not valid")}},{key:"alg2kty",value:function(e){switch(e.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+e)}}},{key:"calcHash",value:function(e,t){var n=new Ac.KJUR.crypto.MessageDigest({alg:t}).digestString(e),r=this.toByteArrayAsString(n);return Promise.resolve(r)}},{key:"toByteArrayAsString",value:function(e){for(var t="",n=0;n<e.length;n+=2){var r=e.charAt(n)+e.charAt(n+1),i=parseInt(r,16);t+=String.fromCharCode(i)}return t}}]),t}(Rc),Jc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gc;return{ngModule:e,providers:[Uc,Dc,{provide:Tc,useFactory:Zc},{provide:Fc,useFactory:Qc},{provide:Oc,useClass:n},{provide:Vc,useClass:$c},{provide:zc,useClass:qc},{provide:Kc,useValue:t},{provide:ml,useClass:Wc,multi:!0}]}}}]),e}(),Yc=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).scheduler=e,r.work=n,r}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n>0?_get(_getPrototypeOf(t.prototype),"schedule",this).call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,n){return n>0||this.closed?_get(_getPrototypeOf(t.prototype),"execute",this).call(this,e,n):this._execute(e,n)}},{key:"requestAsyncId",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(t.prototype),"requestAsyncId",this).call(this,e,n,r):e.flush(this)}}]),t}(Wl),Xc=new(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(Zl))(Yc),eh=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).scheduler=n,r.delay=i,r}return _inherits(t,e),_createClass(t,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new th(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(ec.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(ec.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(ec.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),t}(m),th=function e(t,n){_classCallCheck(this,e),this.notification=t,this.destination=n},nh=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,i=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).scheduler=i,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=n<1?1:n,e._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return _inherits(t,e),_createClass(t,[{key:"nextInfiniteTimeWindow",value:function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),_get(_getPrototypeOf(t.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this._events.push(new rh(this._getNow(),e)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(t.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=r.length;if(this.closed)throw new T;if(this.isStopped||this.hasError?t=v.EMPTY:(this.observers.push(e),t=new F(this,e)),i&&e.add(e=new eh(e,i)),n)for(var o=0;o<s&&!e.closed;o++)e.next(r[o]);else for(var a=0;a<s&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||Xc).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,s=0;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}]),t}(P),rh=function e(t,n){_classCallCheck(this,e),this.time=t,this.value=n};function ih(e,t){return e===t}function sh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ih,n=null,r=null;function i(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}return i.reset=function(){n=null,r=null},i}var oh=sh((function(){var e=As();if(!e)return!1;var t=e.injector.get(rs,null);return!!t&&t.some((function(e){return(e&&e.providers||[]).some((function(e){return e&&e.provide&&"MockNgModuleResolver"===e.provide.name||!1}))}))})),ah=function(){function e(){_classCallCheck(this,e),this.bootstrap$=new nh(1)}return _createClass(e,[{key:"bootstrap",value:function(){this.bootstrap$.next(!0),this.bootstrap$.complete()}},{key:"appBootstrapped$",get:function(){return this.bootstrap$.asObservable()}}]),e}(),uh=new Ie("INITIAL_STATE_TOKEN"),lh=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"set",value:function(e){this.value=e}},{key:"pop",value:function(){var e=this.value;return this.value={},e}}]),e}();return e.value={},e}(),ch=new Ie("Internals.StateContextFactory"),hh=new Ie("Internals.StateFactory"),fh=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._value=e,n}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){var n=_get(_getPrototypeOf(t.prototype),"_subscribe",this).call(this,e);return n&&!n.closed&&e.next(this._value),n}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new T;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),t}(P);function dh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(h(r))return ph(r,null);if(f(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return ph(i.map((function(e){return r[e]})),i)}}if("function"==typeof t[t.length-1]){var s=t.pop();return ph(t=1===t.length&&h(t[0])?t[0]:t,null).pipe(U((function(e){return s.apply(void 0,_toConsumableArray(e))})))}return ph(t,null)}function ph(e,t){return new E((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),s=0,o=0,a=function(a){var u=W(e[a]),l=!1;n.add(u.subscribe({next:function(e){l||(l=!0,o++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++s!==r&&l||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)a(u);else n.complete()}))}function vh(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,s=e.windowTime,o=void 0===s?Number.POSITIVE_INFINITY:s,a=e.refCount,u=e.scheduler,l=0,c=!1,h=!1;return function(e){l++,t&&!c||(c=!1,t=new nh(i,o,u),n=e.subscribe({next:function(e){t.next(e)},error:function(e){c=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}));var r=t.subscribe(this);this.add((function(){l--,r.unsubscribe(),n&&!h&&a&&0===l&&(n.unsubscribe(),n=void 0,t=void 0)}))}}(r))}}var gh=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new yh(e,this.project))}}]),e}(),yh=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.hasSubscription||this.tryNext(e)}},{key:"tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new D(this,t,n),i=this.destination;i.add(r);var s=B(this,e,void 0,void 0,r);s!==r&&i.add(s)}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),t}(V);function mh(e){return function(t){return t.lift(new _h(e))}}var _h=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var n=new bh(e),r=B(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}]),e}(),bh=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).seenValue=!1,n}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,n,r,i){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),t}(V);function kh(e,t){return function(n){return n.lift(new wh(e,t))}}var wh=function(){function e(t,n){_classCallCheck(this,e),this.compare=t,this.keySelector=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Ch(e,this.compare,this.keySelector))}}]),e}(),Ch=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return _inherits(t,e),_createClass(t,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),t}(m),Sh={STATE_NAME:"STATE_NAME",STATE_UNIQUE:"STATE_UNIQUE",STATE_NAME_PROPERTY:"STATE_NAME_PROPERTY",STATE_DECORATOR:"STATE_DECORATOR",INCORRECT_PRODUCTION:"INCORRECT_PRODUCTION",INCORRECT_DEVELOPMENT:"INCORRECT_DEVELOPMENT",SELECT_FACTORY_NOT_CONNECTED:"SELECT_FACTORY_NOT_CONNECTED",ACTION_DECORATOR:"ACTION_DECORATOR",SELECTOR_DECORATOR:"SELECTOR_DECORATOR",ZONE_WARNING:"ZONE_WARNING",PATCHING_ARRAY:"PATCHING_ARRAY",PATCHING_PRIMITIVE:"PATCHING_PRIMITIVE",UNDECORATED_STATE_IN_IVY:"UNDECORATED_STATE_IN_IVY"},Eh=(_defineProperty2(r={},Sh.STATE_NAME,(function(e){return"".concat(e," is not a valid state name. It needs to be a valid object property name.")})),_defineProperty2(r,Sh.STATE_NAME_PROPERTY,(function(){return"States must register a 'name' property"})),_defineProperty2(r,Sh.STATE_UNIQUE,(function(e,t,n){return"State name '".concat(e,"' from ").concat(t," already exists in ").concat(n)})),_defineProperty2(r,Sh.STATE_DECORATOR,(function(){return"States must be decorated with @State() decorator"})),_defineProperty2(r,Sh.INCORRECT_PRODUCTION,(function(){return"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })"})),_defineProperty2(r,Sh.INCORRECT_DEVELOPMENT,(function(){return"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })"})),_defineProperty2(r,Sh.SELECT_FACTORY_NOT_CONNECTED,(function(){return"You have forgotten to import the NGXS module!"})),_defineProperty2(r,Sh.ACTION_DECORATOR,(function(){return"@Action() decorator cannot be used with static methods"})),_defineProperty2(r,Sh.SELECTOR_DECORATOR,(function(){return"Selectors only work on methods"})),_defineProperty2(r,Sh.ZONE_WARNING,(function(){return"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })"})),_defineProperty2(r,Sh.PATCHING_ARRAY,(function(){return"Patching arrays is not supported."})),_defineProperty2(r,Sh.PATCHING_PRIMITIVE,(function(){return"Patching primitives is not supported."})),_defineProperty2(r,Sh.UNDECORATED_STATE_IN_IVY,(function(e){return"'".concat(e,"' class should be decorated with @Injectable() right after the @State() decorator")})),r),xh=function(){function e(t,n){_classCallCheck(this,e),this._ngZone=t,this._platformId=n,this.verifyZoneIsNotNooped(this._ngZone)}return _createClass(e,[{key:"enter",value:function(e){return ju(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}},{key:"leave",value:function(e){return this.runInsideAngular(e)}},{key:"runInsideAngular",value:function(e){return fs.isInAngularZone()?e():this._ngZone.run(e)}},{key:"runOutsideAngular",value:function(e){return fs.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}},{key:"verifyZoneIsNotNooped",value:function(e){e instanceof fs||console.warn(Eh[Sh.ZONE_WARNING]())}}]),e}(),Ah=new Ie("ROOT_STATE_TOKEN"),Th=new Ie("FEATURE_STATE_TOKEN"),Fh=new Ie("NGXS_PLUGINS"),Ih=new Ie("NG_TEST_MODE"),Ph=new Ie("NG_DEV_MODE"),Oh="NGXS_META",Rh="NGXS_OPTIONS_META",Dh="NGXS_SELECTOR_META",Nh=function e(){_classCallCheck(this,e),this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=xh},jh=function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r},Lh=new Ie("NGXS_EXECUTION_STRATEGY");function Mh(e){return e.constructor&&e.constructor.type?e.constructor.type:e.type}var Hh=function(e,t,n){e=Object.assign({},e);var r=t.split("."),i=r.length-1;return r.reduce((function(e,t,r){return e[t]=r===i?n:Array.isArray(e[t])?e[t].slice():Object.assign({},e[t]),e&&e[t]}),e),e},Bh=function(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)};function Vh(e){return e.hasOwnProperty(Oh)||Object.defineProperty(e,Oh,{value:{name:null,actions:{},defaults:{},path:null,selectFromAppState:null,children:[]}}),Uh(e)}function Uh(e){return e[Oh]}var Kh={},zh=function(e){return e}({get:function(){return Kh},set:function(e){Kh=Object.assign({},e)}});function qh(e){return e[Dh]}function Wh(e,t){return t&&t.compatibility&&t.compatibility.strictContentSecurityPolicy?function(e){var t=e.slice();return function(e){return t.reduce((function(e,t){return e&&e[t]}),e)}}(e):function(e){for(var t=e,n="store."+t[0],r=0,i=t.length,s=n;++r<i;)s=s+" && "+(n=n+"."+t[r]);return new Function("store","return "+s+";")}(e)}function Gh(e,t){var n=Bh(t.currentAppState,e.depth),r=Bh(t.newAppState,e.depth);return new jh(n,r,!e.isInitialised)}function Zh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qh,r=e.reduce((function(e,t){return e[Mh(t)]=!0,e}),{}),i=t&&function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}(t);return function(e){return e.pipe(function(e,t){return Ju((function(n){var r=Mh(n.action);return e[r]&&(!t||t[n.status])}))}(r,i),n())}}(t,["DISPATCHED"])}function Qh(){return U((function(e){return e.action}))}function $h(e){return function(t){return new E((function(n){return t.subscribe({next:function(t){e.leave((function(){return n.next(t)}))},error:function(t){e.leave((function(){return n.error(t)}))},complete:function(){e.leave((function(){return n.complete()}))}})}))}}var Jh=function(){function e(t){_classCallCheck(this,e),this._executionStrategy=t}return _createClass(e,[{key:"enter",value:function(e){return this._executionStrategy.enter(e)}},{key:"leave",value:function(e){return this._executionStrategy.leave(e)}}]),e}(),Yh=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments)))._itemQueue=[],e._busyPushingNext=!1,e}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,_get(_getPrototypeOf(t.prototype),"next",this).call(this,e);this._itemQueue.length>0;){var n=this._itemQueue.pop();_get(_getPrototypeOf(t.prototype),"next",this).call(this,n)}this._busyPushingNext=!1}}}]),t}(P)),Xh=function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,(function(t){var r=e.pipe($h(n)).subscribe({next:function(e){return t.next(e)},error:function(e){return t.error(e)},complete:function(){return t.complete()}});t.add(r)})))}return _inherits(t,e),t}(E),ef=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,{}))}return _inherits(t,e),t}(fh),tf=function(){function e(t,n){_classCallCheck(this,e),this._parentManager=t,this._pluginHandlers=n,this.plugins=[],this.registerHandlers()}return _createClass(e,[{key:"registerHandlers",value:function(){var e,t=this.getPluginHandlers();(e=this.rootPlugins).push.apply(e,_toConsumableArray(t))}},{key:"getPluginHandlers",value:function(){return(this._pluginHandlers||[]).map((function(e){return e.handle?e.handle.bind(e):e}))}},{key:"rootPlugins",get:function(){return this._parentManager&&this._parentManager.plugins||this.plugins}}]),e}(),nf=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(P),rf=function(){function e(t,n,r,i,s,o){_classCallCheck(this,e),this._errorHandler=t,this._actions=n,this._actionResults=r,this._pluginManager=i,this._stateStream=s,this._ngxsExecutionStrategy=o}return _createClass(e,[{key:"dispatch",value:function(e){var t=this,n=this._ngxsExecutionStrategy.enter((function(){return t.dispatchByEvents(e)}));return n.subscribe({error:function(e){return t._ngxsExecutionStrategy.leave((function(){try{t._errorHandler.handleError(e)}catch(n){}}))}}),n.pipe($h(this._ngxsExecutionStrategy))}},{key:"dispatchByEvents",value:function(e){var t=this;return Array.isArray(e)?dh(e.map((function(e){return t.dispatchSingle(e)}))):this.dispatchSingle(e)}},{key:"dispatchSingle",value:function(e){var t=this,n=this._stateStream.getValue();return function e(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.shift().apply(void 0,r.concat([function(){return e(t).apply(void 0,arguments)}]))}}([].concat(_toConsumableArray(this._pluginManager.plugins),[function(e,r){e!==n&&t._stateStream.next(e);var i=t.getActionResultStream(r);return i.subscribe((function(e){return t._actions.next(e)})),t._actions.next({action:r,status:"DISPATCHED"}),t.createDispatchObservable(i)}]))(n,e).pipe(vh())}},{key:"getActionResultStream",value:function(e){return this._actionResults.pipe(Ju((function(t){return t.action===e&&"DISPATCHED"!==t.status})),cc(1),vh())}},{key:"createDispatchObservable",value:function(e){var t=this;return e.pipe(function e(t,n){return n?function(r){return r.pipe(e((function(e,r){return W(t(e,r)).pipe(U((function(t,i){return n(e,t,r,i)})))})))}:function(e){return e.lift(new gh(t))}}((function(e){switch(e.status){case"SUCCESSFUL":return Qu(t._stateStream.getValue());case"ERRORED":return Vl(e.error);default:return Jl}}))).pipe(vh())}}]),e}(),sf=function e(t,n){_classCallCheck(this,e),this.isDevMode=t,this.isTestMode=n},of=function(){function e(t,n){_classCallCheck(this,e),this._host=t,this._config=n}return _createClass(e,[{key:"verifyDevMode",value:function(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(Eh[Sh.INCORRECT_PRODUCTION]()):this.isIncorrectDevelopment&&console.warn(Eh[Sh.INCORRECT_DEVELOPMENT]()))}},{key:"isIncorrectProduction",get:function(){return!this._host.isDevMode()&&this._config.developmentMode}},{key:"isIncorrectDevelopment",get:function(){return this._host.isDevMode()&&!this._config.developmentMode}}]),e}(),af=function(){function e(t,n,r,i){_classCallCheck(this,e),this._stateStream=t,this._dispatcher=n,this._config=r,i.verifyDevMode()}return _createClass(e,[{key:"getRootStateOperations",value:function(){var e=this,t={getState:function(){return e._stateStream.getValue()},setState:function(t){return e._stateStream.next(t)},dispatch:function(t){return e._dispatcher.dispatch(t)}};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}},{key:"ensureStateAndActionsAreImmutable",value:function(e){return{getState:function(){return e.getState()},setState:function(t){var n=function e(t){Object.freeze(t);var n="function"==typeof t,r=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach((function(i){!r.call(t,i)||n&&("caller"===i||"callee"===i||"arguments"===i)||null===t[i]||"object"!=typeof t[i]&&"function"!=typeof t[i]||Object.isFrozen(t[i])||e(t[i])})),t}(t);return e.setState(n)},dispatch:function(t){return e.dispatch(t)}}}},{key:"setStateToTheCurrentWithNew",value:function(e){var t=this.getRootStateOperations(),n=t.getState();t.setState(Object.assign({},n,e.defaults))}}]),e}(),uf=function(){function e(t){_classCallCheck(this,e),this._internalStateOperations=t}return _createClass(e,[{key:"createStateContext",value:function(e){var t=this._internalStateOperations.getRootStateOperations();function n(t){return Bh(t,e.depth)}function r(n,r){var i=Hh(n,e.depth,r),s=e.instance;if(s.ngxsOnChanges){var o=Gh(e,{currentAppState:n,newAppState:i});s.ngxsOnChanges(o)}return t.setState(i),i}function i(e,t){return r(e,t(n(e)))}return{getState:function(){return n(t.getState())},patchState:function(e){return i(t.getState(),function(e){return function(t){if(Array.isArray(e))throw new Error(Eh[Sh.PATCHING_ARRAY]());if("object"!=typeof e)throw new Error(Eh[Sh.PATCHING_PRIMITIVE]());var n=Object.assign({},t);for(var r in e)n[r]=e[r];return n}}(e))},setState:function(e){var n=t.getState();return"function"==typeof e?i(n,e):r(n,e)},dispatch:function(e){return t.dispatch(e)}}}}]),e}(),lf=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"stateNameErrorMessage",value:function(e){return Eh[Sh.STATE_NAME](e)}},{key:"checkCorrectStateName",value:function(e){if(!e)throw new Error(Eh[Sh.STATE_NAME_PROPERTY]());if(!this.stateNameRegex.test(e))throw new Error(this.stateNameErrorMessage(e))}},{key:"checkStateNameIsUnique",value:function(e,t){var n=this.getValidStateMeta(e).name,r=t[n];if(r&&r!==e)throw new Error(Eh[Sh.STATE_UNIQUE](n,e.name,r.name));return n}},{key:"getValidStateMeta",value:function(e){var t=Uh(e);if(!t)throw new Error(Eh[Sh.STATE_DECORATOR]());return t}}]),e}();return e.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$"),e}(),cf=function(){function e(t,n,r,i,s,o,a){_classCallCheck(this,e),this._injector=t,this._config=n,this._parentFactory=r,this._actions=i,this._actionResults=s,this._stateContextFactory=o,this._initialState=a,this._connected=!1,this._states=[],this._statesByName={}}return _createClass(e,[{key:"add",value:function(t){e.checkStatesAreValid(t);var n=this.addToStatesMap(t).newStates;if(!n.length)return[];var r,i,s,o=function(e){var t=function(t){var n=e.find((function(e){return e===t}));if(!n)throw new Error("Child state not found: ".concat(t,". \r\nYou may have forgotten to add states to module"));return n[Oh].name};return e.reduce((function(e,n){var r=n[Oh],i=r.name,s=r.children;return e[i]=(s||[]).map(t),e}),{})}(n),a=(r=o,i=[],s={},Object.keys(r).forEach((function(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Array.isArray(n)||(n=[]),n.push(t),s[t]=!0,r[t].forEach((function(r){if(n.indexOf(r)>=0)throw new Error("Circular dependency '".concat(r,"' is required by '").concat(t,"': ").concat(n.join(" -> ")));s[r]||e(r,n.slice(0))})),i.indexOf(t)<0&&i.push(t)}(e)})),i.reverse()),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function e(t,n){for(var r in t)if(t.hasOwnProperty(r)&&t[r].indexOf(n)>=0){var i=e(t,r);return null!==i?"".concat(i,".").concat(r):r}return null};for(var r in e)if(e.hasOwnProperty(r)){var i=n(e,r);t[r]=i?"".concat(i,".").concat(r):r}return t}(o),l=n.reduce((function(e,t){return e[t[Oh].name]=t,e}),{}),c=[],h=!0,f=!1,d=void 0;try{for(var p,v=a[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=p.value,y=l[g],m=u[g],_=y[Oh];this.addRuntimeInfoToMeta(_,m);var b={name:g,depth:m,isInitialised:!1,actions:_.actions,instance:this._injector.get(y),defaults:e.cloneDefaults(_.defaults)};this.hasBeenMountedAndBootstrapped(g,m)||c.push(b),this.states.push(b)}}catch(k){f=!0,d=k}finally{try{h||null==v.return||v.return()}finally{if(f)throw d}}return c}},{key:"addAndReturnDefaults",value:function(e){var t=this.add(e||[]);return{defaults:t.reduce((function(e,t){return Hh(e,t.depth,t.defaults)}),{}),states:t}}},{key:"connectActionHandlers",value:function(){var e=this;this._connected||(this._actions.pipe(Ju((function(e){return"DISPATCHED"===e.status})),G((function(t){var n=t.action;return e.invokeActions(e._actions,n).pipe(U((function(){return{action:n,status:"SUCCESSFUL"}})),dc({action:n,status:"CANCELED"}),kc((function(e){return Qu({action:n,status:"ERRORED",error:e})})))}))).subscribe((function(t){return e._actionResults.next(t)})),this._connected=!0)}},{key:"invokeActions",value:function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=this.states[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value,l=Mh(t),c=u.actions[l];if(c){var h=!0,f=!1,d=void 0;try{for(var p,v=c[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=p.value,y=this._stateContextFactory.createStateContext(u);try{var m=u.instance[g.fn](y,t);m instanceof Promise&&(m=W(m)),m instanceof E?g.options.cancelUncompleted&&(m=m.pipe(mh(e.pipe(Zh(t))))):m=Qu({}).pipe(vh()),n.push(m)}catch(_){n.push(Vl(_))}}}catch(b){f=!0,d=b}finally{try{h||null==v.return||v.return()}finally{if(f)throw d}}}}}catch(b){i=!0,s=b}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n.length||n.push(Qu({})),dh(n)}},{key:"addToStatesMap",value:function(e){var t=[],n=this.statesByName,r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value,l=lf.checkStateNameIsUnique(u,n);!n[l]&&(t.push(u),n[l]=u)}}catch(c){i=!0,s=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return{newStates:t}}},{key:"addRuntimeInfoToMeta",value:function(e,t){e.path=t,e.selectFromAppState=Wh(t.split("."),this._config)}},{key:"hasBeenMountedAndBootstrapped",value:function(e,t){var n=void 0!==Bh(this._initialState,t);return this.statesByName[e]&&n}},{key:"states",get:function(){return this._parentFactory?this._parentFactory.states:this._states}},{key:"statesByName",get:function(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}}],[{key:"cloneDefaults",value:function(e){var t;return Array.isArray(e)?e.slice():"object"==typeof(t=e)&&null!==t||"function"==typeof t?Object.assign({},e):void 0===e?{}:e}},{key:"checkStatesAreValid",value:function(e){e.forEach(lf.getValidStateMeta)}}]),e}(),hf=function(){function e(t,n,r){_classCallCheck(this,e),this.internalStateOperations=t,this.stateContextFactory=n,this.bootstrapper=r}return _createClass(e,[{key:"ngxsBootstrap",value:function(e,t){var n=this;this.internalStateOperations.getRootStateOperations().dispatch(e).pipe(Ju((function(){return!!t})),Kl((function(){return n.invokeInit(t.states)})),G((function(){return n.bootstrapper.appBootstrapped$})),Ju((function(e){return!!e}))).subscribe((function(){return n.invokeBootstrap(t.states)}))}},{key:"invokeInit",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value,a=o.instance;if(a.ngxsOnChanges){var u=Gh(o,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});a.ngxsOnChanges(u)}a.ngxsOnInit&&a.ngxsOnInit(this.getStateContext(o)),o.isInitialised=!0}}catch(l){n=!0,r=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"invokeBootstrap",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value,a=o.instance;a.ngxsAfterBootstrap&&a.ngxsAfterBootstrap(this.getStateContext(o))}}catch(u){n=!0,r=u}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"getStateContext",value:function(e){return this.stateContextFactory.createStateContext(e)}}]),e}(),ff={getOptions:function(e){return e&&e.NGXS_SELECTOR_OPTIONS_META||{}},defineOptions:function(e,t){e&&(e.NGXS_SELECTOR_OPTIONS_META=t)}};function df(e,t,n){var r,i=n&&n.containerClass,s=sh((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=t.apply(i,n);return s instanceof Function?sh.apply(null,[s]):s})),o=function(e,t,n){var r,i=((r=e).hasOwnProperty(Dh)||Object.defineProperty(r,Dh,{value:{selectFromAppState:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:function(){return{}}}}),qh(r));i.originalFn=t;var s=function(){return{}};n&&(i.containerClass=n.containerClass,i.selectorName=n.selectorName,s=n.getSelectorOptions||s);var o=Object.assign({},i);return i.getSelectorOptions=function(){return function(e,t){return Object.assign({},zh.get(),ff.getOptions(e.containerClass)||{},ff.getOptions(e.originalFn)||{},e.getSelectorOptions()||{},t)}(o,s())},i}(s,t,n);return o.selectFromAppState=function(t){var n=[],i=(r=r||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{selectorOptions:e.getSelectorOptions(),argumentSelectorFunctions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0===t.length||e.getSelectorOptions().injectContainerState,i=e.containerClass;return i&&r&&Uh(i)&&n.push(i),t&&n.push.apply(n,_toConsumableArray(t)),n}(e,t).map((function(e){return pf(e)}))}}(o,e)).selectorOptions.suppressErrors,a=r.argumentSelectorFunctions;n.push.apply(n,_toConsumableArray(a.map((function(e){return e(t)}))));try{return s.apply(void 0,n)}catch(u){if(u instanceof TypeError&&i)return;throw u}},s}function pf(e){var t=qh(e)||Uh(e);return t&&t.selectFromAppState||e}var vf,gf=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this._stateStream=t,this._internalStateOperations=n,this._config=r,this._internalExecutionStrategy=i,this.initStateStream(s)}return _createClass(e,[{key:"dispatch",value:function(e){return this._internalStateOperations.getRootStateOperations().dispatch(e)}},{key:"select",value:function(e){var t=this,n=pf(e);return this._stateStream.pipe(U(n),kc((function(e){var n=t._config.selectorOptions.suppressErrors;return e instanceof TypeError&&n?Qu(void 0):Vl(e)})),kh(),$h(this._internalExecutionStrategy))}},{key:"selectOnce",value:function(e){return this.select(e).pipe(cc(1))}},{key:"selectSnapshot",value:function(e){return pf(e)(this._stateStream.getValue())}},{key:"subscribe",value:function(e){return this._stateStream.pipe($h(this._internalExecutionStrategy)).subscribe(e)}},{key:"snapshot",value:function(){return this._internalStateOperations.getRootStateOperations().getState()}},{key:"reset",value:function(e){return this._internalStateOperations.getRootStateOperations().setState(e)}},{key:"initStateStream",value:function(e){var t=this._stateStream.value;if(!t||0===Object.keys(t).length){var n=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,e):e;this._stateStream.next(n)}}}]),e}(),yf=function(){var e=function e(t,n){_classCallCheck(this,e),e.store=t,e.config=n};return e.store=null,e.config=null,e}(),mf=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"type",get:function(){return"@@INIT"}}]),e}(),_f=function(){function e(t){_classCallCheck(this,e),this.addedStates=t}return _createClass(e,null,[{key:"type",get:function(){return"@@UPDATE_STATE"}}]),e}(),bf=new nh(1),kf=function e(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;_classCallCheck(this,e),function(){try{var e=window.ng;bf.next(!!e&&"function"==typeof e.getComponent&&"function"==typeof e.markDirty)}catch(t){bf.next(!1)}finally{bf.complete()}}(),zh.set(o.selectorOptions||{});var u=t.addAndReturnDefaults(s);n.setStateToTheCurrentWithNew(u),t.connectActionHandlers(),a.ngxsBootstrap(new mf,u)},wf=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4?arguments[4]:void 0;_classCallCheck(this,e);var o=e.flattenStates(i),a=r.addAndReturnDefaults(o);a.states.length&&(n.setStateToTheCurrentWithNew(a),s.ngxsBootstrap(new _f(a.defaults),a))}return _createClass(e,null,[{key:"flattenStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return e.concat(t)}),[])}}]),e}(),Cf=((vf=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{ngModule:kf,providers:[cf,uf,Xh,Yh,ah,of,sf,hf,rf,nf,af,Jh,gf,ef,yf,tf].concat(_toConsumableArray(t),_toConsumableArray(e.ngxsTokenProviders(t,n)))}}},{key:"forFeature",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{ngModule:wf,providers:[cf,tf].concat(_toConsumableArray(e),[{provide:Th,multi:!0,useValue:e}])}}},{key:"ngxsTokenProviders",value:function(t,n){return[{provide:Ih,useValue:oh},{provide:Ph,useValue:st},{provide:Lh,useClass:n.executionStrategy||xh},{provide:Ah,useValue:t},{provide:e.ROOT_OPTIONS,useValue:n},{provide:Nh,useFactory:e.ngxsConfigFactory,deps:[e.ROOT_OPTIONS]},{provide:qi,useFactory:e.appBootstrapListenerFactory,multi:!0,deps:[ah]},{provide:uh,useFactory:e.getInitialState},{provide:ch,useExisting:uf},{provide:hh,useExisting:cf}]}},{key:"ngxsConfigFactory",value:function(e){return Object.assign(new Nh,e)}},{key:"appBootstrapListenerFactory",value:function(e){return function(){return e.bootstrap()}}},{key:"getInitialState",value:function(){return lh.pop()}}]),e}()).ROOT_OPTIONS=new Ie("ROOT_OPTIONS"),vf);function Sf(e,t){return function(n,r){if(n.hasOwnProperty("prototype"))throw new Error(Eh[Sh.ACTION_DECORATOR]());var i=Vh(n.constructor);Array.isArray(e)||(e=[e]);var s=!0,o=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value.type;i.actions[c]||(i.actions[c]=[]),i.actions[c].push({fn:r,options:t||{},type:c})}}catch(h){o=!0,a=h}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}}}function Ef(e){return function(t){!function(e){bf.asObservable().subscribe((function(t){t&&(e.\u0275prov||console.warn(Eh[Sh.UNDECORATED_STATE_IN_IVY](e.name)))}))}(t);var n=t,r=Vh(n),i=Object.getPrototypeOf(n),s=function(t){return Object.assign({},t[Rh]||{},e)}(i);!function(e){var t=e.meta,n=e.inheritedStateClass,r=e.optionsWithInheritance,i=r.children,s=r.defaults,o=r.name,a="string"==typeof o?o:o&&o.getName()||null;lf.checkCorrectStateName(a),n.hasOwnProperty(Oh)&&(t.actions=Object.assign({},t.actions,(n[Oh]||{}).actions)),t.children=i,t.defaults=s,t.name=a}({meta:r,inheritedStateClass:i,optionsWithInheritance:s}),n[Rh]=s}}var xf=36;function Af(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t,r){var i,s=r.toString(),o="__".concat(s,"__selector"),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"string"==typeof(t=t||function(e){var t=e.length-1;return e.charCodeAt(t)===xf?e.slice(0,t):e}(e))?Wh(n.length?[t].concat(_toConsumableArray(n)):t.split("."),yf.config):t[Oh]&&t[Oh].path?Wh(t[Oh].path.split("."),yf.config):t}(s,e,n);Object.defineProperties(t,(_defineProperty2(i={},o,{writable:!0,enumerable:!1,configurable:!0}),_defineProperty2(i,s,{enumerable:!0,configurable:!0,get:function(){return this[o]||(this[o]=function(e){if(!yf.store)throw new Error(Eh[Sh.SELECT_FACTORY_NOT_CONNECTED]());return yf.store.select(e)}(a))}}),i))}}function Tf(e){return function(t,n,r){if(!r||null===r.value)throw new Error(Eh[Sh.SELECTOR_DECORATOR]());var i=r.value,s=null,o={configurable:!0,get:function(){return s=s||df(e,i,{containerClass:t,selectorName:n.toString(),getSelectorOptions:function(){return{}}})}};return o.originalFn=i,o}}var Ff=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"convert",value:function(e){return e.indicateTime=new Date(e.indicateTime),e.start=new Date(e.start),e.end=new Date(e.end),e}},{key:"getFocusItem",value:function(e){var t=this;return this.httpClient.get("".concat(Vu,"/api/me/focus/").concat(e)).pipe(U((function(e){return t.convert(e),e})))}},{key:"getFocus",value:function(){var e=this;return this.httpClient.get("".concat(Vu,"/api/me/focus")).pipe(U((function(t){return t.forEach(e.convert),t})))}},{key:"patchFocus",value:function(){var e=this;return this.httpClient.patch("".concat(Vu,"/api/me/focus"),{}).pipe(U((function(t){return t.forEach(e.convert),t})))}}]),e}(),If=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"mapEvt",value:function(e){return e.start=new Date(e.start),e.end=new Date(e.end),e}},{key:"getEvents",value:function(e,t){var n=this,r=new sl;return null!=e&&(r=r.set("from",e.toISOString())),null!=t&&(r=r.set("to",t.toISOString())),this.httpClient.get("".concat(Uu,"/api/calendar/me"),{params:r}).pipe(U((function(e){var t=e;return t.forEach(n.mapEvt),t})))}},{key:"getEvent",value:function(e,t){var n=this;return this.httpClient.get("".concat(Uu,"/api/calendar/me/").concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t))).pipe(U((function(e){return n.mapEvt(e)})))}},{key:"getConfigurations",value:function(){return this.httpClient.get("".concat(Uu,"/api/configuration/list")).pipe(U((function(e){return e})))}},{key:"setFeeds",value:function(e,t){return this.httpClient.put("".concat(Uu,"/api/configuration/").concat(e,"/feeds"),t.map((function(e){return e.id})))}},{key:"linkCalendar",value:function(e){return this.httpClient.post("".concat(Uu,"/api/configuration/link"),{calendarType:e,redirectUri:window.location.origin+"/calendar/configure"}).pipe(U((function(e){return e})))}},{key:"removeLink",value:function(e){return this.httpClient.delete("".concat(Uu,"/api/configuration"),{params:{id:e}})}}]),e}(),Pf=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Of=n("Ju5/"),Rf=Of.a.Symbol,Df=Object.prototype,Nf=Df.hasOwnProperty,jf=Df.toString,Lf=Rf?Rf.toStringTag:void 0,Mf=Object.prototype.toString,Hf=Rf?Rf.toStringTag:void 0,Bf=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Hf&&Hf in Object(e)?function(e){var t=Nf.call(e,Lf),n=e[Lf];try{e[Lf]=void 0;var r=!0}catch(s){}var i=jf.call(e);return r&&(t?e[Lf]=n:delete e[Lf]),i}(e):function(e){return Mf.call(e)}(e)},Vf=function(e){return null!=e&&"object"==typeof e},Uf=function(e){return Vf(e)&&"[object Arguments]"==Bf(e)},Kf=Object.prototype,zf=Kf.hasOwnProperty,qf=Kf.propertyIsEnumerable,Wf=Uf(function(){return arguments}())?Uf:function(e){return Vf(e)&&zf.call(e,"callee")&&!qf.call(e,"callee")},Gf=Array.isArray,Zf=Rf?Rf.isConcatSpreadable:void 0,Qf=function(e){return Gf(e)||Wf(e)||!!(Zf&&e&&e[Zf])},$f=function(e,t){return e===t||e!=e&&t!=t},Jf=function(e,t){for(var n=e.length;n--;)if($f(e[n][0],t))return n;return-1},Yf=Array.prototype.splice;function Xf(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Xf.prototype.clear=function(){this.__data__=[],this.size=0},Xf.prototype.delete=function(e){var t=this.__data__,n=Jf(t,e);return!(n<0||(n==t.length-1?t.pop():Yf.call(t,n,1),--this.size,0))},Xf.prototype.get=function(e){var t=this.__data__,n=Jf(t,e);return n<0?void 0:t[n][1]},Xf.prototype.has=function(e){return Jf(this.__data__,e)>-1},Xf.prototype.set=function(e,t){var n=this.__data__,r=Jf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var ed,td=Xf,nd=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},rd=function(e){if(!nd(e))return!1;var t=Bf(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},id=Of.a["__core-js_shared__"],sd=(ed=/[^.]+$/.exec(id&&id.keys&&id.keys.IE_PROTO||""))?"Symbol(src)_1."+ed:"",od=Function.prototype.toString,ad=function(e){if(null!=e){try{return od.call(e)}catch(t){}try{return e+""}catch(t){}}return""},ud=/^\[object .+?Constructor\]$/,ld=Function.prototype,cd=Object.prototype,hd=RegExp("^"+ld.toString.call(cd.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fd=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!nd(e)||(t=e,sd&&sd in t))&&(rd(e)?hd:ud).test(ad(e));var t}(n)?n:void 0},dd=fd(Of.a,"Map"),pd=fd(Object,"create"),vd=Object.prototype.hasOwnProperty,gd=Object.prototype.hasOwnProperty;function yd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}yd.prototype.clear=function(){this.__data__=pd?pd(null):{},this.size=0},yd.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yd.prototype.get=function(e){var t=this.__data__;if(pd){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return vd.call(t,e)?t[e]:void 0},yd.prototype.has=function(e){var t=this.__data__;return pd?void 0!==t[e]:gd.call(t,e)},yd.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pd&&void 0===t?"__lodash_hash_undefined__":t,this};var md=yd,_d=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function bd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bd.prototype.clear=function(){this.size=0,this.__data__={hash:new md,map:new(dd||td),string:new md}},bd.prototype.delete=function(e){var t=_d(this,e).delete(e);return this.size-=t?1:0,t},bd.prototype.get=function(e){return _d(this,e).get(e)},bd.prototype.has=function(e){return _d(this,e).has(e)},bd.prototype.set=function(e,t){var n=_d(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var kd=bd;function wd(e){var t=this.__data__=new td(e);this.size=t.size}wd.prototype.clear=function(){this.__data__=new td,this.size=0},wd.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},wd.prototype.get=function(e){return this.__data__.get(e)},wd.prototype.has=function(e){return this.__data__.has(e)},wd.prototype.set=function(e,t){var n=this.__data__;if(n instanceof td){var r=n.__data__;if(!dd||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new kd(r)}return n.set(e,t),this.size=n.size,this};var Cd=wd;function Sd(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new kd;++t<n;)this.add(e[t])}Sd.prototype.add=Sd.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Sd.prototype.has=function(e){return this.__data__.has(e)};var Ed=Sd,xd=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Ad=function(e,t){return e.has(t)},Td=function(e,t,n,r,i,s){var o=1&n,a=e.length,u=t.length;if(a!=u&&!(o&&u>a))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var c=-1,h=!0,f=2&n?new Ed:void 0;for(s.set(e,t),s.set(t,e);++c<a;){var d=e[c],p=t[c];if(r)var v=o?r(p,d,c,t,e,s):r(d,p,c,e,t,s);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!xd(t,(function(e,t){if(!Ad(f,t)&&(d===e||i(d,e,n,r,s)))return f.push(t)}))){h=!1;break}}else if(d!==p&&!i(d,p,n,r,s)){h=!1;break}}return s.delete(e),s.delete(t),h},Fd=Of.a.Uint8Array,Id=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Pd=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Od=Rf?Rf.prototype:void 0,Rd=Od?Od.valueOf:void 0,Dd=Object.prototype.propertyIsEnumerable,Nd=Object.getOwnPropertySymbols,jd=Nd?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,i=null==t?0:t.length,s=0,o=[];++r<i;){var a=t[r];Dd.call(e,a)&&(o[s++]=a)}return o}(Nd(e)))}:function(){return[]},Ld=n("WOAq"),Md=/^(?:0|[1-9]\d*)$/,Hd=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Md.test(e))&&e>-1&&e%1==0&&e<t},Bd=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Vd={};Vd["[object Float32Array]"]=Vd["[object Float64Array]"]=Vd["[object Int8Array]"]=Vd["[object Int16Array]"]=Vd["[object Int32Array]"]=Vd["[object Uint8Array]"]=Vd["[object Uint8ClampedArray]"]=Vd["[object Uint16Array]"]=Vd["[object Uint32Array]"]=!0,Vd["[object Arguments]"]=Vd["[object Array]"]=Vd["[object ArrayBuffer]"]=Vd["[object Boolean]"]=Vd["[object DataView]"]=Vd["[object Date]"]=Vd["[object Error]"]=Vd["[object Function]"]=Vd["[object Map]"]=Vd["[object Number]"]=Vd["[object Object]"]=Vd["[object RegExp]"]=Vd["[object Set]"]=Vd["[object String]"]=Vd["[object WeakMap]"]=!1;var Ud,Kd=n("xutz"),zd=Kd.a&&Kd.a.isTypedArray,qd=zd?(Ud=zd,function(e){return Ud(e)}):function(e){return Vf(e)&&Bd(e.length)&&!!Vd[Bf(e)]},Wd=Object.prototype.hasOwnProperty,Gd=Object.prototype,Zd=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Qd=Object.prototype.hasOwnProperty,$d=function(e){return null!=e&&Bd(e.length)&&!rd(e)},Jd=function(e){return $d(e)?function(e,t){var n=Gf(e),r=!n&&Wf(e),i=!n&&!r&&Object(Ld.a)(e),s=!n&&!r&&!i&&qd(e),o=n||r||i||s,a=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=a.length;for(var l in e)!Wd.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Hd(l,u))||a.push(l);return a}(e):function(e){if((t=e)!==("function"==typeof(n=t&&t.constructor)&&n.prototype||Gd))return Zd(e);var t,n,r=[];for(var i in Object(e))Qd.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)},Yd=function(e){return function(e,t,n){var r=t(e);return Gf(e)?r:Pf(r,n(e))}(e,Jd,jd)},Xd=Object.prototype.hasOwnProperty,ep=fd(Of.a,"DataView"),tp=fd(Of.a,"Promise"),np=fd(Of.a,"Set"),rp=fd(Of.a,"WeakMap"),ip=ad(ep),sp=ad(dd),op=ad(tp),ap=ad(np),up=ad(rp),lp=Bf;(ep&&"[object DataView]"!=lp(new ep(new ArrayBuffer(1)))||dd&&"[object Map]"!=lp(new dd)||tp&&"[object Promise]"!=lp(tp.resolve())||np&&"[object Set]"!=lp(new np)||rp&&"[object WeakMap]"!=lp(new rp))&&(lp=function(e){var t=Bf(e),n="[object Object]"==t?e.constructor:void 0,r=n?ad(n):"";if(r)switch(r){case ip:return"[object DataView]";case sp:return"[object Map]";case op:return"[object Promise]";case ap:return"[object Set]";case up:return"[object WeakMap]"}return t});var cp=lp,hp=Object.prototype.hasOwnProperty,fp=function e(t,n,r,i,s){return t===n||(null==t||null==n||!Vf(t)&&!Vf(n)?t!=t&&n!=n:function(e,t,n,r,i,s){var o=Gf(e),a=Gf(t),u=o?"[object Array]":cp(e),l=a?"[object Array]":cp(t),c="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),h="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),f=u==l;if(f&&Object(Ld.a)(e)){if(!Object(Ld.a)(t))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new Cd),o||qd(e)?Td(e,t,n,r,i,s):function(e,t,n,r,i,s,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Fd(e),new Fd(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $f(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Id;case"[object Set]":if(a||(a=Pd),e.size!=t.size&&!(1&r))return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var l=Td(a(e),a(t),r,i,s,o);return o.delete(e),l;case"[object Symbol]":if(Rd)return Rd.call(e)==Rd.call(t)}return!1}(e,t,u,n,r,i,s);if(!(1&n)){var d=c&&hp.call(e,"__wrapped__"),p=h&&hp.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,g=p?t.value():t;return s||(s=new Cd),i(v,g,n,r,s)}}return!!f&&(s||(s=new Cd),function(e,t,n,r,i,s){var o=1&n,a=Yd(e),u=a.length;if(u!=Yd(t).length&&!o)return!1;for(var l=u;l--;){var c=a[l];if(!(o?c in t:Xd.call(t,c)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var f=!0;s.set(e,t),s.set(t,e);for(var d=o;++l<u;){var p=e[c=a[l]],v=t[c];if(r)var g=o?r(v,p,c,t,e,s):r(p,v,c,e,t,s);if(!(void 0===g?p===v||i(p,v,n,r,s):g)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(f=!1)}return s.delete(e),s.delete(t),f}(e,t,n,r,i,s))}(t,n,r,i,e,s))},dp=function(e){return e==e&&!nd(e)},pp=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},vp=function(e){return"symbol"==typeof e||Vf(e)&&"[object Symbol]"==Bf(e)},gp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yp=/^\w*$/,mp=function(e,t){if(Gf(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!vp(e))||yp.test(e)||!gp.test(e)||null!=t&&e in Object(t)},_p="Expected a function";function bp(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(_p);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(bp.Cache||kd),n}bp.Cache=kd;var kp,wp,Cp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sp=/\\(\\)?/g,Ep=(kp=bp((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Cp,(function(e,n,r,i){t.push(r?i.replace(Sp,"$1"):n||e)})),t}),(function(e){return 500===wp.size&&wp.clear(),e})),wp=kp.cache,kp),xp=Rf?Rf.prototype:void 0,Ap=xp?xp.toString:void 0,Tp=function(e,t){return Gf(e)?e:mp(e,t)?[e]:Ep(function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(Gf(t))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,e)+"";if(vp(t))return Ap?Ap.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}(e)}(e))},Fp=function(e){if("string"==typeof e||vp(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Ip=function(e,t){for(var n=0,r=(t=Tp(t,e)).length;null!=e&&n<r;)e=e[Fp(t[n++])];return n&&n==r?e:void 0},Pp=function(e,t){return null!=e&&t in Object(e)},Op=function(e){return e},Rp=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Dp=Math.max,Np=function(){try{var e=fd(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),jp=Date.now,Lp=function(e){var t=0,n=0;return function(){var r=jp(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Np?function(e,t){return Np(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Op),Mp=function(e){return e!=e},Hp=function(e,t){return!(null==e||!e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t):function(e,t,n,r){for(var i=e.length,s=-1;++s<i;)if(t(e[s],s,e))return s;return-1}(e,Mp)}(e,t)>-1},Bp=np&&1/Pd(new np([,-0]))[1]==1/0?function(e){return new np(e)}:function(){},Vp=function(e){return Vf(e)&&$d(e)},Up=function(e,t){return Lp(function(e,t,n){return t=Dp(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=Dp(r.length-t,0),o=Array(s);++i<s;)o[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(o),Rp(e,this,a)}}(e,void 0,Op),e+"")}((function(e){var t,n,r,i,s,o,a=(n=null==(t=e)?0:t.length)?t[n-1]:void 0;return Vp(a)&&(a=void 0),function(e,t,n){var r=-1,i=Hp,s=e.length,o=!0,a=[],u=a;if(s>=200){var l=t?null:Bp(e);if(l)return Pd(l);o=!1,i=Ad,u=new Ed}else u=t?[]:a;e:for(;++r<s;){var c=e[r],h=t?t(c):c;if(c=0!==c?c:0,o&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),a.push(c)}else i(u,h,void 0)||(u!==a&&u.push(h),a.push(c))}return a}(function e(t,n,r,i,s){var o=-1,a=t.length;for(r||(r=Qf),s||(s=[]);++o<a;){var u=t[o];n>0&&r(u)?n>1?e(u,n-1,r,i,s):Pf(s,u):i||(s[s.length]=u)}return s}(e,1,Vp,!0),"function"==typeof(r=a)?r:null==r?Op:"object"==typeof r?Gf(r)?function(e,t){return mp(e)&&dp(t)?pp(Fp(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:Ip(e,t);return void 0===r?void 0:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Tp(t,e)).length,s=!1;++r<i;){var o=Fp(t[r]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&Bd(i)&&Hd(o,i)&&(Gf(e)||Wf(e))}(e,t,Pp)}(n,e):fp(t,r,3)}}(r[0],r[1]):1==(o=function(e){for(var t=Jd(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,dp(i)]}return t}(s=r)).length&&o[0][2]?pp(o[0][0],o[0][1]):function(e){return e===s||function(e,t,n,r){var i=n.length,s=i;if(null==e)return!s;for(e=Object(e);i--;){var o=n[i];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){var a=(o=n[i])[0],u=e[a],l=o[1];if(o[2]){if(void 0===u&&!(a in e))return!1}else{var c=new Cd;if(!fp(l,u,3,void 0,c))return!1}}return!0}(e,0,o)}:mp(i=r)?function(e){return function(t){return null==t?void 0:t[e]}}(Fp(i)):function(e){return function(t){return Ip(t,e)}}(i))})),Kp=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"getDirections",value:function(e){var t=this,n=new sl;return e.startLat&&e.startLng?n=(n=n.set("startLat",e.startLat.toString())).set("startLng",e.startLng.toString()):e.startAddress&&(n=n.set("startAddress",e.startAddress)),n=n.set("endAddress",e.endAddress),e.departureTime?n=n.set("departureTime",e.departureTime.toISOString()):e.arrivalTime&&(n=n.set("arrivalTime",e.arrivalTime.toISOString())),this.httpClient.get("".concat(zu,"/api/directions"),{params:n,observe:"response"}).pipe(U((function(e){return{key:e.headers.get("ETag").replace(/"/g,""),directions:t.mapData(e.body)}})))}},{key:"getDirectionsByKey",value:function(e){return this.httpClient.get("".concat(zu,"/api/directions/").concat(e)).pipe(U(this.mapData))}},{key:"mapData",value:function(e){var t=e;return t.routes&&t.routes.length&&t.routes.forEach((function(e){e.arrivalTime=new Date(e.arrivalTime),e.depatureTime=new Date(e.depatureTime),e.steps&&e.steps.length&&e.steps.forEach((function(e){e.arrivalTime=new Date(e.arrivalTime),e.departureTime=new Date(e.departureTime)}))})),t}}]),e}(),zp=function(e){function t(t,n){var r=this,i=this.constructor.prototype;return(r=e.call(this,t)||this).statusCode=n,r.__proto__=i,r}return Rl(t,e),t}(Error),qp=function(e){function t(t){void 0===t&&(t="A timeout occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return Rl(t,e),t}(Error),Wp=function(e){function t(t){void 0===t&&(t="An abort occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return Rl(t,e),t}(Error),Gp=function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n},Zp=function(){function e(){}return e.prototype.get=function(e,t){return this.send(Dl({},t,{method:"GET",url:e}))},e.prototype.post=function(e,t){return this.send(Dl({},t,{method:"POST",url:e}))},e.prototype.delete=function(e,t){return this.send(Dl({},t,{method:"DELETE",url:e}))},e.prototype.getCookieString=function(e){return""},e}(),Qp=function(e){return e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None",e}({}),$p=function(){function e(){}return e.prototype.log=function(e,t){},e.instance=new e,e}(),Jp=function(){function e(){}return e.isRequired=function(e,t){if(null==e)throw new Error("The '"+t+"' argument is required.")},e.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},e}();function Yp(e,t){var n="";return Xp(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+function(e){var t=new Uint8Array(e),n="";return t.forEach((function(e){n+="0x"+(e<16?"0":"")+e.toString(16)+" "})),n.substr(0,n.length-1)}(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function Xp(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function ev(e,t,n,r,i,s,o){return Ll(this,void 0,void 0,(function(){var a,u,l,c,h;return Ml(this,(function(f){switch(f.label){case 0:return i?[4,i()]:[3,2];case 1:(l=f.sent())&&((a={}).Authorization="Bearer "+l,u=a),f.label=2;case 2:return e.log(Qp.Trace,"("+t+" transport) sending data. "+Yp(s,o)+"."),c=Xp(s)?"arraybuffer":"text",[4,n.post(r,{content:s,headers:u,responseType:c})];case 3:return h=f.sent(),e.log(Qp.Trace,"("+t+" transport) request complete. Response status: "+h.statusCode+"."),[2]}}))}))}var tv,nv=function(){function e(){this.observers=[]}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++)n[t].next(e)},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){return this.observers.push(e),new rv(this,e)},e}(),rv=function(){function e(e,t){this.subject=e,this.observer=t}return e.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);e>-1&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch((function(e){}))},e}(),iv=function(){function e(e){this.minimumLogLevel=e}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case Qp.Critical:case Qp.Error:console.error("["+(new Date).toISOString()+"] "+Qp[e]+": "+t);break;case Qp.Warning:console.warn("["+(new Date).toISOString()+"] "+Qp[e]+": "+t);break;case Qp.Information:console.info("["+(new Date).toISOString()+"] "+Qp[e]+": "+t);break;default:console.log("["+(new Date).toISOString()+"] "+Qp[e]+": "+t)}},e}(),sv=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ov=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};if("undefined"==typeof XMLHttpRequest){var av=require;tv=av("request")}var uv=function(e){function t(t){var n=e.call(this)||this;if(void 0===tv)throw new Error("The 'request' module could not be loaded.");return n.logger=t,n.cookieJar=tv.jar(),n.request=tv.defaults({jar:n.cookieJar}),n}return sv(t,e),t.prototype.send=function(e){var t=this;return new Promise((function(n,r){var i;i=Xp(e.content)?Buffer.from(e.content):e.content||"";var s=t.request(e.url,{body:i,encoding:"arraybuffer"===e.responseType?null:"utf8",headers:ov({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,timeout:e.timeout},(function(i,s,o){if(e.abortSignal&&(e.abortSignal.onabort=null),i)return"ETIMEDOUT"===i.code&&(t.logger.log(Qp.Warning,"Timeout from HTTP request."),r(new qp)),t.logger.log(Qp.Warning,"Error from HTTP request. "+i),void r(i);s.statusCode>=200&&s.statusCode<300?n(new Gp(s.statusCode,s.statusMessage||"",o)):r(new zp(s.statusMessage||"",s.statusCode||0))}));e.abortSignal&&(e.abortSignal.onabort=function(){s.abort(),r(new Wp)})}))},t.prototype.getCookieString=function(e){return this.cookieJar.getCookieString(e)},t}(Zp),lv=function(e){function t(t){var n=e.call(this)||this;return n.logger=t,n}return Rl(t,e),t.prototype.send=function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Wp):e.method?e.url?new Promise((function(n,r){var i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=!0,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var s=e.headers;s&&Object.keys(s).forEach((function(e){i.setRequestHeader(e,s[e])})),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){i.abort(),r(new Wp)}),e.timeout&&(i.timeout=e.timeout),i.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?n(new Gp(i.status,i.statusText,i.response||i.responseText)):r(new zp(i.statusText,i.status))},i.onerror=function(){t.logger.log(Qp.Warning,"Error from HTTP request. "+i.status+": "+i.statusText+"."),r(new zp(i.statusText,i.status))},i.ontimeout=function(){t.logger.log(Qp.Warning,"Timeout from HTTP request."),r(new qp)},i.send(e.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(Zp),cv=function(e){function t(t){var n=e.call(this)||this;return n.httpClient="undefined"!=typeof XMLHttpRequest?new lv(t):new uv(t),n}return Rl(t,e),t.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Wp):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},t}(Zp),hv=function(){function e(){}return e.write=function(t){return""+t+e.RecordSeparator},e.parse=function(t){if(t[t.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n},e.RecordSeparatorCode=30,e.RecordSeparator=String.fromCharCode(e.RecordSeparatorCode),e}(),fv=function(){function e(){}return e.prototype.writeHandshakeRequest=function(e){return hv.write(JSON.stringify(e))},e.prototype.parseHandshakeResponse=function(e){var t,n;if(Xp(e)||"undefined"!=typeof Buffer&&e instanceof Buffer){var r=new Uint8Array(e);if(-1===(s=r.indexOf(hv.RecordSeparatorCode)))throw new Error("Message is incomplete.");var i=s+1;t=String.fromCharCode.apply(null,r.slice(0,i)),n=r.byteLength>i?r.slice(i).buffer:null}else{var s,o=e;if(-1===(s=o.indexOf(hv.RecordSeparator)))throw new Error("Message is incomplete.");t=o.substring(0,i=s+1),n=o.length>i?o.substring(i):null}var a=hv.parse(t),u=JSON.parse(a[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[n,u]},e}(),dv=function(e){return e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e}({}),pv=3e4,vv=15e3,gv=function(e){return e[e.Disconnected=0]="Disconnected",e[e.Connected=1]="Connected",e}({}),yv=function(){function e(e,t,n){var r=this;Jp.isRequired(e,"connection"),Jp.isRequired(t,"logger"),Jp.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=pv,this.keepAliveIntervalInMilliseconds=vv,this.logger=t,this.protocol=n,this.connection=e,this.handshakeProtocol=new fv,this.connection.onreceive=function(e){return r.processIncomingData(e)},this.connection.onclose=function(e){return r.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.id=0,this.receivedHandshakeResponse=!1,this.connectionState=gv.Disconnected,this.cachedPingMessage=this.protocol.writeMessage({type:dv.Ping})}return e.create=function(t,n,r){return new e(t,n,r)},Object.defineProperty(e.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),e.prototype.start=function(){return Ll(this,void 0,void 0,(function(){var e,t,n=this;return Ml(this,(function(r){switch(r.label){case 0:return e={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(Qp.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,t=new Promise((function(e,t){n.handshakeResolver=e,n.handshakeRejecter=t})),[4,this.connection.start(this.protocol.transferFormat)];case 1:return r.sent(),this.logger.log(Qp.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(e))];case 2:return r.sent(),this.logger.log(Qp.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,t];case 3:return r.sent(),this.connectionState=gv.Connected,[2]}}))}))},e.prototype.stop=function(){return this.logger.log(Qp.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),this.connection.stop()},e.prototype.stream=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i,s=this.createStreamInvocation(e,n),o=new nv;o.cancelCallback=function(){var e=t.createCancelInvocation(s.invocationId),n=t.protocol.writeMessage(e);return delete t.callbacks[s.invocationId],i.then((function(){return t.sendMessage(n)}))},this.callbacks[s.invocationId]=function(e,t){t?o.error(t):e&&(e.type===dv.Completion?e.error?o.error(new Error(e.error)):o.complete():o.next(e.item))};var a=this.protocol.writeMessage(s);return i=this.sendMessage(a).catch((function(e){o.error(e),delete t.callbacks[s.invocationId]})),o},e.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.createInvocation(e,t,!0),i=this.protocol.writeMessage(r);return this.sendMessage(i)},e.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.createInvocation(e,n,!1),s=new Promise((function(e,n){t.callbacks[i.invocationId]=function(t,r){r?n(r):t&&(t.type===dv.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: "+t.type)))};var r=t.protocol.writeMessage(i);t.sendMessage(r).catch((function(e){n(e),delete t.callbacks[i.invocationId]}))}));return s},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},e.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var r=n[t];switch(r.type){case dv.Invocation:this.invokeClientMethod(r);break;case dv.StreamItem:case dv.Completion:var i=this.callbacks[r.invocationId];null!=i&&(r.type===dv.Completion&&delete this.callbacks[r.invocationId],i(r));break;case dv.Ping:break;case dv.Close:this.logger.log(Qp.Information,"Close message received from server."),this.connection.stop(r.error?new Error("Server returned an error on close: "+r.error):void 0);break;default:this.logger.log(Qp.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},e.prototype.processHandshakeResponse=function(e){var t,n,r;try{r=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(o){var i;this.logger.log(Qp.Error,i="Error parsing handshake response: "+o);var s=new Error(i);throw this.connection.stop(s),this.handshakeRejecter(s),s}if(n.error)throw this.logger.log(Qp.Error,i="Server returned handshake error: "+n.error),this.handshakeRejecter(i),this.connection.stop(new Error(i)),new Error(i);return this.logger.log(Qp.Debug,"Server handshake complete."),this.handshakeResolver(),r},e.prototype.resetKeepAliveInterval=function(){var e=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout((function(){return Ll(e,void 0,void 0,(function(){return Ml(this,(function(e){switch(e.label){case 0:if(this.connectionState!==gv.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}}))}))}),this.keepAliveIntervalInMilliseconds)},e.prototype.resetTimeoutPeriod=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout((function(){return e.serverTimeout()}),this.serverTimeoutInMilliseconds))},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods[e.target.toLowerCase()];if(n){if(n.forEach((function(n){return n.apply(t,e.arguments)})),e.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(Qp.Error,r),this.connection.stop(new Error(r))}}else this.logger.log(Qp.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){var t=this,n=this.callbacks;this.callbacks={},this.connectionState=gv.Disconnected,this.handshakeRejecter&&this.handshakeRejecter(e),Object.keys(n).forEach((function(t){(0,n[t])(null,e||new Error("Invocation canceled due to connection being closed."))})),this.cleanupTimeout(),this.cleanupPingTimer(),this.closedCallbacks.forEach((function(n){return n.apply(t,[e])}))},e.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},e.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},e.prototype.createInvocation=function(e,t,n){if(n)return{arguments:t,target:e,type:dv.Invocation};var r=this.id;return this.id++,{arguments:t,invocationId:r.toString(),target:e,type:dv.Invocation}},e.prototype.createStreamInvocation=function(e,t){var n=this.id;return this.id++,{arguments:t,invocationId:n.toString(),target:e,type:dv.StreamInvocation}},e.prototype.createCancelInvocation=function(e){return{invocationId:e,type:dv.CancelInvocation}},e}(),mv=function(e){return e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling",e}({}),_v=function(e){return e[e.Text=1]="Text",e[e.Binary=2]="Binary",e}({}),bv=function(){function e(){this.isAborted=!1,this.onabort=null}return e.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(e.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),e}(),kv=function(){function e(e,t,n,r){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new bv,this.logMessageContent=r,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(e.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),e.prototype.connect=function(e,t){return Ll(this,void 0,void 0,(function(){var n,r,i,s;return Ml(this,(function(o){switch(o.label){case 0:if(Jp.isRequired(e,"url"),Jp.isRequired(t,"transferFormat"),Jp.isIn(t,_v,"transferFormat"),this.url=e,this.logger.log(Qp.Trace,"(LongPolling transport) Connecting."),t===_v.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return n={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},t===_v.Binary&&(n.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return r=o.sent(),this.updateHeaderToken(n,r),i=e+"&_="+Date.now(),this.logger.log(Qp.Trace,"(LongPolling transport) polling: "+i+"."),[4,this.httpClient.get(i,n)];case 2:return 200!==(s=o.sent()).statusCode?(this.logger.log(Qp.Error,"(LongPolling transport) Unexpected response code: "+s.statusCode+"."),this.closeError=new zp(s.statusText||"",s.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,n),[2]}}))}))},e.prototype.getAccessToken=function(){return Ll(this,void 0,void 0,(function(){return Ml(this,(function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}}))}))},e.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},e.prototype.poll=function(e,t){return Ll(this,void 0,void 0,(function(){var n,r,i,s;return Ml(this,(function(o){switch(o.label){case 0:o.trys.push([0,,8,9]),o.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=o.sent(),this.updateHeaderToken(t,n),o.label=3;case 3:return o.trys.push([3,5,,6]),r=e+"&_="+Date.now(),this.logger.log(Qp.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,t)];case 4:return 204===(i=o.sent()).statusCode?(this.logger.log(Qp.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==i.statusCode?(this.logger.log(Qp.Error,"(LongPolling transport) Unexpected response code: "+i.statusCode+"."),this.closeError=new zp(i.statusText||"",i.statusCode),this.running=!1):i.content?(this.logger.log(Qp.Trace,"(LongPolling transport) data received. "+Yp(i.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(i.content)):this.logger.log(Qp.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return s=o.sent(),this.running?s instanceof qp?this.logger.log(Qp.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=s,this.running=!1):this.logger.log(Qp.Trace,"(LongPolling transport) Poll errored after shutdown: "+s.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(Qp.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}}))}))},e.prototype.send=function(e){return Ll(this,void 0,void 0,(function(){return Ml(this,(function(t){return this.running?[2,ev(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return Ll(this,void 0,void 0,(function(){var e,t;return Ml(this,(function(n){switch(n.label){case 0:this.logger.log(Qp.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),n.label=1;case 1:return n.trys.push([1,,5,6]),[4,this.receiving];case 2:return n.sent(),this.logger.log(Qp.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),e={headers:{}},[4,this.getAccessToken()];case 3:return t=n.sent(),this.updateHeaderToken(e,t),[4,this.httpClient.delete(this.url,e)];case 4:return n.sent(),this.logger.log(Qp.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(Qp.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}}))}))},e.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(Qp.Trace,e),this.onclose(this.closeError)}},e}(),wv=function(){function e(e,t,n,r,i){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=r,this.eventSourceConstructor=i,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return Ll(this,void 0,void 0,(function(){var n,r=this;return Ml(this,(function(i){switch(i.label){case 0:return Jp.isRequired(e,"url"),Jp.isRequired(t,"transferFormat"),Jp.isIn(t,_v,"transferFormat"),this.logger.log(Qp.Trace,"(SSE transport) Connecting."),this.url=e,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=i.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),i.label=2;case 2:return[2,new Promise((function(n,i){var s=!1;if(t===_v.Text){var o;if("undefined"!=typeof window)o=new r.eventSourceConstructor(e,{withCredentials:!0});else{var a=r.httpClient.getCookieString(e);o=new r.eventSourceConstructor(e,{withCredentials:!0,headers:{Cookie:a}})}try{o.onmessage=function(e){if(r.onreceive)try{r.logger.log(Qp.Trace,"(SSE transport) data received. "+Yp(e.data,r.logMessageContent)+"."),r.onreceive(e.data)}catch(t){return void r.close(t)}},o.onerror=function(e){var t=new Error(e.data||"Error occurred");s?r.close(t):i(t)},o.onopen=function(){r.logger.log(Qp.Information,"SSE connected to "+r.url),r.eventSource=o,s=!0,n()}}catch(u){return void i(u)}}else i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))]}}))}))},e.prototype.send=function(e){return Ll(this,void 0,void 0,(function(){return Ml(this,(function(t){return this.eventSource?[2,ev(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return this.close(),Promise.resolve()},e.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},e}(),Cv=function(){function e(e,t,n,r,i){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=r,this.webSocketConstructor=i,this.httpClient=e,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return Ll(this,void 0,void 0,(function(){var n,r=this;return Ml(this,(function(i){switch(i.label){case 0:return Jp.isRequired(e,"url"),Jp.isRequired(t,"transferFormat"),Jp.isIn(t,_v,"transferFormat"),this.logger.log(Qp.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=i.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),i.label=2;case 2:return[2,new Promise((function(n,i){var s;e=e.replace(/^http/,"ws");var o=r.httpClient.getCookieString(e);"undefined"==typeof window&&o&&(s=new r.webSocketConstructor(e,void 0,{headers:{Cookie:""+o}})),s||(s=new r.webSocketConstructor(e)),t===_v.Binary&&(s.binaryType="arraybuffer"),s.onopen=function(t){r.logger.log(Qp.Information,"WebSocket connected to "+e+"."),r.webSocket=s,n()},s.onerror=function(e){var t=null;"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent&&(t=e.error),i(t)},s.onmessage=function(e){r.logger.log(Qp.Trace,"(WebSockets transport) data received. "+Yp(e.data,r.logMessageContent)+"."),r.onreceive&&r.onreceive(e.data)},s.onclose=function(e){return r.close(e)}}))]}}))}))},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(Qp.Trace,"(WebSockets transport) sending data. "+Yp(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0,this.close(void 0)),Promise.resolve()},e.prototype.close=function(e){this.logger.log(Qp.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!e||!1!==e.wasClean&&1e3===e.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},e}(),Sv=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,a)}u((r=r.apply(e,t||[])).next())}))},Ev=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},xv=null,Av=null;if("undefined"==typeof window){var Tv=require;xv=Tv("ws"),Av=Tv("eventsource")}var Fv=function(){function e(e,t){var n;void 0===t&&(t={}),this.features={},Jp.isRequired(e,"url"),this.logger=void 0===(n=t.logger)?new iv(Qp.Information):null===n?$p.instance:n.log?n:new iv(n),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent||!1;var r="undefined"==typeof window;r||"undefined"==typeof WebSocket||t.WebSocket?r&&!t.WebSocket&&xv&&(t.WebSocket=xv):t.WebSocket=WebSocket,r||"undefined"==typeof EventSource||t.EventSource?r&&!t.EventSource&&void 0!==Av&&(t.EventSource=Av):t.EventSource=EventSource,this.httpClient=t.httpClient||new cv(this.logger),this.connectionState=2,this.options=t,this.onreceive=null,this.onclose=null}return e.prototype.start=function(e){return Jp.isIn(e=e||_v.Binary,_v,"transferFormat"),this.logger.log(Qp.Debug,"Starting connection with transfer format '"+_v[e]+"'."),2!==this.connectionState?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(e),this.startPromise)},e.prototype.send=function(e){if(1!==this.connectionState)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(e)},e.prototype.stop=function(e){return Sv(this,void 0,void 0,(function(){return Ev(this,(function(t){switch(t.label){case 0:this.connectionState=2,this.stopError=e,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startPromise];case 2:case 3:return t.sent(),[3,4];case 4:return this.transport?[4,this.transport.stop()]:[3,6];case 5:t.sent(),this.transport=void 0,t.label=6;case 6:return[2]}}))}))},e.prototype.startInternal=function(e){return Sv(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u=this;return Ev(this,(function(l){switch(l.label){case 0:t=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,l.label=1;case 1:return l.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==mv.WebSockets?[3,3]:(this.transport=this.constructTransport(mv.WebSockets),[4,this.transport.connect(t,e)]):[3,5];case 2:return l.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,r=0,i=function(){var e;return Ev(this,(function(i){switch(i.label){case 0:return[4,s.getNegotiationResponse(t)];case 1:if(n=i.sent(),2===s.connectionState)return[2,{value:void 0}];if(n.error)throw Error(n.error);if(n.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(t=n.url),n.accessToken&&(e=n.accessToken,s.accessTokenFactory=function(){return e}),r++,[2]}}))},s=this,l.label=6;case 6:return[5,i()];case 7:if("object"==typeof(o=l.sent()))return[2,o.value];l.label=8;case 8:if(n.url&&r<100)return[3,6];l.label=9;case 9:if(100===r&&n.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(t,this.options.transport,n,e)];case 10:l.sent(),l.label=11;case 11:return this.transport instanceof kv&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return u.stopConnection(e)},this.changeState(0,1),[3,13];case 12:throw a=l.sent(),this.logger.log(Qp.Error,"Failed to start the connection: "+a),this.connectionState=2,this.transport=void 0,a;case 13:return[2]}}))}))},e.prototype.getNegotiationResponse=function(e){return Sv(this,void 0,void 0,(function(){var t,n,r,i,s,o;return Ev(this,(function(a){switch(a.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(r=a.sent())&&((t={}).Authorization="Bearer "+r,n=t),a.label=2;case 2:i=this.resolveNegotiateUrl(e),this.logger.log(Qp.Debug,"Sending negotiation request: "+i+"."),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.httpClient.post(i,{content:"",headers:n})];case 4:if(200!==(s=a.sent()).statusCode)throw Error("Unexpected status code returned from negotiate "+s.statusCode);return[2,JSON.parse(s.content)];case 5:throw o=a.sent(),this.logger.log(Qp.Error,"Failed to complete negotiation with the server: "+o),o;case 6:return[2]}}))}))},e.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},e.prototype.createTransport=function(e,t,n,r){return Sv(this,void 0,void 0,(function(){var i,s,o,a,u,l;return Ev(this,(function(c){switch(c.label){case 0:return i=this.createConnectUrl(e,n.connectionId),this.isITransport(t)?(this.logger.log(Qp.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.transport.connect(i,r)]):[3,2];case 1:return c.sent(),this.changeState(0,1),[2];case 2:s=0,o=n.availableTransports||[],c.label=3;case 3:return s<o.length?(a=o[s],this.connectionState=0,"number"!=typeof(u=this.resolveTransport(a,t,r))?[3,8]:(this.transport=this.constructTransport(u),n.connectionId?[3,5]:[4,this.getNegotiationResponse(e)])):[3,9];case 4:n=c.sent(),i=this.createConnectUrl(e,n.connectionId),c.label=5;case 5:return c.trys.push([5,7,,8]),[4,this.transport.connect(i,r)];case 6:return c.sent(),this.changeState(0,1),[2];case 7:return l=c.sent(),this.logger.log(Qp.Error,"Failed to start the transport '"+mv[u]+"': "+l),this.connectionState=2,n.connectionId=void 0,[3,8];case 8:return s++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.")}}))}))},e.prototype.constructTransport=function(e){switch(e){case mv.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Cv(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case mv.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new wv(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case mv.LongPolling:return new kv(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+e+".")}},e.prototype.resolveTransport=function(e,t,n){var r=mv[e.transport];if(null==r)this.logger.log(Qp.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client.");else{var i=e.transferFormats.map((function(e){return _v[e]}));if(function(e,t){return!e||0!=(t&e)}(t,r))if(i.indexOf(n)>=0){if((r!==mv.WebSockets||this.options.WebSocket)&&(r!==mv.ServerSentEvents||this.options.EventSource))return this.logger.log(Qp.Debug,"Selecting transport '"+mv[r]+"'."),r;this.logger.log(Qp.Debug,"Skipping transport '"+mv[r]+"' because it is not supported in your environment.'")}else this.logger.log(Qp.Debug,"Skipping transport '"+mv[r]+"' because it does not support the requested transfer format '"+_v[n]+"'.");else this.logger.log(Qp.Debug,"Skipping transport '"+mv[r]+"' because it was disabled by the client.")}return null},e.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},e.prototype.changeState=function(e,t){return this.connectionState===e&&(this.connectionState=t,!0)},e.prototype.stopConnection=function(e){this.transport=void 0,(e=this.stopError||e)?this.logger.log(Qp.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(Qp.Information,"Connection disconnected."),this.connectionState=2,this.onclose&&this.onclose(e)},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if("undefined"==typeof window||!window||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(Qp.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),(n+="negotiate")+(-1===t?"":e.substring(t))},e}(),Iv="json",Pv=function(){function e(){this.name=Iv,this.version=1,this.transferFormat=_v.Text}return e.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=$p.instance);for(var n=[],r=0,i=hv.parse(e);r<i.length;r++){var s=JSON.parse(i[r]);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case dv.Invocation:this.isInvocationMessage(s);break;case dv.StreamItem:this.isStreamItemMessage(s);break;case dv.Completion:this.isCompletionMessage(s);break;case dv.Ping:case dv.Close:break;default:t.log(Qp.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n},e.prototype.writeMessage=function(e){return hv.write(JSON.stringify(e))},e.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},e.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},e.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},e.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},e}(),Ov=function(){function e(){}return e.prototype.configureLogging=function(e){return Jp.isRequired(e,"logging"),this.logger=void 0!==e.log?e:new iv(e),this},e.prototype.withUrl=function(e,t){return Jp.isRequired(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?t:{transport:t},this},e.prototype.withHubProtocol=function(e){return Jp.isRequired(e,"protocol"),this.protocol=e,this},e.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new Fv(this.url,e);return yv.create(t,this.logger||$p.instance,this.protocol||new Pv)},e}();function Rv(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Dv(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}var Nv,jv=36e5;function Lv(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return function(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Dv(e).getTime(),r=Rv(t);return new Date(n+r)}(e,Rv(t)*jv)}var Mv,Hv=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[Focus] Load",e}(),Bv=function(){var e=function e(t){_classCallCheck(this,e),this.id=t};return e.type="[Focus] Load Item",e}(),Vv=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[Focus] Connect Hub",e}(),Uv=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[Focus] Disconnect Hub",e}(),Kv=function(){var e=function e(t){_classCallCheck(this,e),this.force=t};return e.type="[Focus] Patch",e}(),zv=function(){var e=function e(t){_classCallCheck(this,e),this.eventIds=t};return e.type="[Calendar] Load Event",e}(),qv=function(){var e=function e(t,n){_classCallCheck(this,e),this.from=t,this.to=n};return e.type="[Calendar] Load View",e}(),Wv=function(){var e=function e(t){_classCallCheck(this,e),this.directionKeys=t};return e.type="[Directions] Load",e}(),Gv=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[App] Load User",e}(),Zv=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[App] Create User",e}(),Qv=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[App] Patch User",e}(),$v=(Mv=Nv=function(){function e(t,n,r,i,s,o){_classCallCheck(this,e),this.digitService=t,this.calendarService=n,this.travelService=r,this.oauthService=i,this.httpClient=s,this.matSnackBar=o}return _createClass(e,[{key:"loadCalendarForFocusItems",value:function(e,t){return t.dispatch(new zv(e.map((function(e){return{feedId:e.calendarEventFeedId,eventId:e.calendarEventId}}))))}},{key:"loadDirectionsForFocusItems",value:function(e,t){return t.dispatch(new Wv(e.filter((function(e){return null!=e.directionsMetadata&&null!=e.directionsMetadata.key})).map((function(e){return e.directionsMetadata.key}))))}},{key:"loadCalendarAndDirections",value:function(e){var t=this;return w(Kl((function(n){return t.loadCalendarForFocusItems(n,e)})),G((function(n){return t.loadDirectionsForFocusItems(n,e)})))}},{key:"loadFocus",value:function(e,t){var n=e.getState();e.setState(Object.assign({},n,{focusItemsLoading:!0}));var r=new Date;return this.digitService.getFocus().pipe(Kl((function(t){var n=e.getState();e.setState(Object.assign({},n,{focusItems:Up(n.focusItems.filter((function(e){return!(e.start<Lv(r,2)&&r<e.end)})),t,(function(e){return e.id})),focusItemsLoading:!1,focusItemsLoaded:!0}))})),this.loadCalendarAndDirections(e))}},{key:"loadFocusItem",value:function(e,t){return this.digitService.getFocusItem(t.id).pipe(Kl((function(t){var n=e.getState();e.setState(Object.assign({},n,{focusItems:Up(n.focusItems,[t],(function(e){return e.id}))}))})),U((function(e){return[e]})),this.loadCalendarAndDirections(e))}},{key:"connectFocusHub",value:function(e,t){var n=this,r=e.getState();r.hubConnection&&r.hubConnection.stop();var i=(new Ov).withUrl("".concat(Vu,"/hubs/focus"),{accessTokenFactory:function(){return n.oauthService.getAccessToken()}}).build();i.on("focusChanged",(function(t){t.forEach((function(e){e.indicateTime=new Date(e.indicateTime),e.start=new Date(e.start),e.end=new Date(e.end)})),e.setState(Object.assign({},e.getState(),{focusItems:Up(r.focusItems,t,(function(e){return e.id}))})),n.loadCalendarForFocusItems(t,e),n.loadDirectionsForFocusItems(t,e)})),i.start()}},{key:"disconnectFocusHub",value:function(e,t){var n=e.getState();n.hubConnection&&(n.hubConnection.stop(),e.setState(Object.assign({},n,{hubConnection:null})))}},{key:"patchFocus",value:function(e,t){var n=e.getState();return!(!t.force&&n.patchedAt&&+new Date-+n.patchedAt<6e4)&&(e.setState(Object.assign({},n,{focusItemsLoading:!0})),this.digitService.patchFocus().pipe(Kl((function(t){var n=e.getState();e.setState(Object.assign({},n,{focusItems:Up(n.focusItems,t,(function(e){return e.id})),focusItemsLoading:!1,patchedAt:new Date}))})),this.loadCalendarAndDirections(e)))}},{key:"createUser",value:function(e,t){var n=this;return this.matSnackBar.open("Account wird zum ersten Mal konfiguriert."),this.httpClient.post("".concat(Vu,"/api/user"),null).pipe(kc((function(e){return n.matSnackBar.open("Account konnte nicht konfiguriert werden."),Vl("Create user failed")})),Kl((function(t){n.matSnackBar.open("Account wurde angelegt.");var r=e.getState();e.setState(Object.assign({},r,{userInformation:t}))})))}},{key:"patchUser",value:function(e,t){var n=this;return this.matSnackBar.open("Es wird eine automatische Wartung ausgef\xfchrt."),this.httpClient.patch("".concat(Vu,"/api/user"),null).pipe(kc((function(e){return n.matSnackBar.open("Beim Ausf\xfchren einer automatischen Wartung kam es zu einem Fehler."),Vl("Create user failed")})),Kl((function(t){n.matSnackBar.open("Es wurde eine automatische Wartung ausgef\xfchrt.");var r=e.getState();e.setState(Object.assign({},r,{userInformation:t}))})))}},{key:"loadUser",value:function(e,t){return this.httpClient.get("".concat(Vu,"/api/user")).pipe(kc((function(t){return 404==t.status&&e.dispatch(new Zv),Vl("Get user failed")})),Kl((function(t){var n=e.getState();if(e.setState(Object.assign({},n,{userInformation:t})),!t.calendarReminderActive)return e.dispatch(new Qv)})))}},{key:"loadCalendarEvents",value:function(e,t){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,s,o,a,u,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.setState(Object.assign({},e.getState(),{calendarEventsLoading:!0})),r=[],i=!0,s=!1,o=void 0,n.prev=5,a=t.eventIds[Symbol.iterator]();case 7:if(i=(u=a.next()).done){n.next=22;break}return l=u.value,n.prev=9,n.t0=r,n.next=13,this.calendarService.getEvent(l.feedId,l.eventId).toPromise();case 13:n.t1=n.sent,n.t0.push.call(n.t0,n.t1),n.next=19;break;case 17:n.prev=17,n.t2=n.catch(9);case 19:i=!0,n.next=7;break;case 22:n.next=28;break;case 24:n.prev=24,n.t3=n.catch(5),s=!0,o=n.t3;case 28:n.prev=28,n.prev=29,i||null==a.return||a.return();case 31:if(n.prev=31,!s){n.next=34;break}throw o;case 34:return n.finish(31);case 35:return n.finish(28);case 36:c=e.getState(),e.setState(Object.assign({},c,{calendarItems:Up(r,c.calendarItems,(function(e){return{feedId:e.feedId,id:e.id}})),calendarEventsLoading:!1}));case 38:case"end":return n.stop()}}),n,this,[[5,24,28,36],[9,17],[29,,31,35]])})))}},{key:"loadCalendarView",value:function(e,t){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.calendarService.getEvents(t.from,t.to).toPromise();case 2:r=n.sent,i=e.getState(),e.setState(Object.assign({},i,{calendarItems:Up(i.calendarItems,r,(function(e){return{feedId:e.feedId,id:e.id}}))}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"loadDirections",value:function(e,t){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,s,o,a,u,l,c,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.setState(Object.assign({},e.getState(),{directionsLoading:!0})),r=!1,i={},s=!0,o=!1,a=void 0,n.prev=5,u=t.directionKeys[Symbol.iterator]();case 7:if(s=(l=u.next()).done){n.next=21;break}return c=l.value,n.prev=9,n.next=12,this.travelService.getDirectionsByKey(c).toPromise();case 12:i[c]=n.sent,n.next=18;break;case 15:n.prev=15,n.t0=n.catch(9),r=!0;case 18:s=!0,n.next=7;break;case 21:n.next=27;break;case 23:n.prev=23,n.t1=n.catch(5),o=!0,a=n.t1;case 27:n.prev=27,n.prev=28,s||null==u.return||u.return();case 30:if(n.prev=30,!o){n.next=33;break}throw a;case 33:return n.finish(30);case 34:return n.finish(27);case 35:if(h=e.getState(),e.setState(Object.assign({},h,{directions:Object.assign({},h.directions,i),directionsLoading:!1})),n.t2=r,!n.t2){n.next=41;break}return n.next=41,e.dispatch(new Kv(!1)).toPromise();case 41:case"end":return n.stop()}}),n,this,[[5,23,27,35],[9,15],[28,,30,34]])})))}}],[{key:"focusItemsLoading",value:function(e){return e.focusItemsLoading||e.directionsLoading||e.calendarEventsLoading}},{key:"focusItemsLoaded",value:function(e){return e.focusItemsLoaded}},{key:"mapFocusDisplay",value:function(e,t){var n=!(!t.calendarEventId||!t.calendarEventFeedId),r=n?e.calendarItems.find((function(e){return e.id==t.calendarEventId&&e.feedId==t.calendarEventFeedId})):null,i=t.directionsMetadata&&t.directionsMetadata.key?e.directions[t.directionsMetadata.key]:null;return{id:t.id,indicateTime:t.indicateTime,isEvent:n,isLoading:n&&null==r,event:r,directions:i,directionsMetadata:t.directionsMetadata,late:r&&i?+i.routes[0].arrivalTime-+r.start:null}}},{key:"activeFocusItems",value:function(e){var t=this;return e.focusItems.filter((function(e){return e.start<Lv(new Date,2)&&new Date<e.end})).sort((function(e){return-1*+e.indicateTime})).map((function(n){return t.mapFocusDisplay(e,n)}))}},{key:"focusItem",value:function(e){var t=this;return df([Nv],(function(n){return t.mapFocusDisplay(n,n.focusItems.find((function(t){return t.id===e})))}))}}]),e}(),Nl([Sf(Hv),jl("design:type",Function),jl("design:paramtypes",[Object,Hv]),jl("design:returntype",void 0)],Mv.prototype,"loadFocus",null),Nl([Sf(Bv),jl("design:type",Function),jl("design:paramtypes",[Object,Bv]),jl("design:returntype",void 0)],Mv.prototype,"loadFocusItem",null),Nl([Sf(Vv),jl("design:type",Function),jl("design:paramtypes",[Object,Vv]),jl("design:returntype",void 0)],Mv.prototype,"connectFocusHub",null),Nl([Sf(Uv),jl("design:type",Function),jl("design:paramtypes",[Object,Uv]),jl("design:returntype",void 0)],Mv.prototype,"disconnectFocusHub",null),Nl([Sf(Kv),jl("design:type",Function),jl("design:paramtypes",[Object,Kv]),jl("design:returntype",void 0)],Mv.prototype,"patchFocus",null),Nl([Sf(Zv),jl("design:type",Function),jl("design:paramtypes",[Object,Zv]),jl("design:returntype",void 0)],Mv.prototype,"createUser",null),Nl([Sf(Qv),jl("design:type",Function),jl("design:paramtypes",[Object,Qv]),jl("design:returntype",void 0)],Mv.prototype,"patchUser",null),Nl([Sf(Gv),jl("design:type",Function),jl("design:paramtypes",[Object,Gv]),jl("design:returntype",void 0)],Mv.prototype,"loadUser",null),Nl([Sf(zv),jl("design:type",Function),jl("design:paramtypes",[Object,zv]),jl("design:returntype",Promise)],Mv.prototype,"loadCalendarEvents",null),Nl([Sf(qv),jl("design:type",Function),jl("design:paramtypes",[Object,qv]),jl("design:returntype",Promise)],Mv.prototype,"loadCalendarView",null),Nl([Sf(Wv),jl("design:type",Function),jl("design:paramtypes",[Object,Wv]),jl("design:returntype",Promise)],Mv.prototype,"loadDirections",null),Nl([Tf(),jl("design:type",Function),jl("design:paramtypes",[Object]),jl("design:returntype",Boolean)],Mv,"focusItemsLoading",null),Nl([Tf(),jl("design:type",Function),jl("design:paramtypes",[Object]),jl("design:returntype",Boolean)],Mv,"focusItemsLoaded",null),Nl([Tf(),jl("design:type",Function),jl("design:paramtypes",[Object]),jl("design:returntype",Array)],Mv,"activeFocusItems",null),Nv=Nl([Ef({name:"focusState",defaults:{focusItems:[],calendarItems:[],directions:{},focusItemsLoaded:!1,focusItemsLoading:!1,directionsLoading:!1,calendarEventsLoading:!1,patchedAt:null,hubConnection:null,userInformation:null}})],Mv)),Jv=function(){function e(t,n,r,i,s){var o=this;_classCallCheck(this,e),this.oauthService=t,this.router=n,this.store=s,this.title="app",this.oauthService.configure(Zu),this.oauthService.setStorage(localStorage),this.oauthService.tokenValidationHandler=new $c,this.oauthService.loadDiscoveryDocumentAndTryLogin().then((function(e){e&&(n.navigate(["/focus"]),s.dispatch(new Gv))})),this.mobileQuery=i.matchMedia("(max-width: 600px)"),this._mobileQueryListener=function(){return r.detectChanges()},this.mobileQuery.addListener(this._mobileQueryListener),this.mobileQuery.addListener(this.mobileQueryListener),this.oauthService.hasValidAccessToken()&&this.store.dispatch(new Gv),this.router$=this.store.select((function(e){return e.router})),this.sub=this.router$.subscribe((function(e){if(e.state&&e.state.root){for(var t=e.state.root;t.firstChild;)t=t.firstChild;o.pageTitle=t.data.title}}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.mobileQuery.removeListener(this._mobileQueryListener),this.sub.unsubscribe()}},{key:"mobileQueryListener",value:function(e){}},{key:"logout",value:function(){this.oauthService.logOut(!0),this.router.navigate(["/home"])}},{key:"isLoggedIn",get:function(){return this.oauthService.hasValidAccessToken()}}]),e}(),Yv={};function Xv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,i=null;return R(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),Y(t,i).lift(new eg(r))}var eg=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new tg(e,this.resultSelector))}}]),e}(),tg=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.values.push(Yv),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(B(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,i){var s=this.values,o=this.toRespond?s[n]===Yv?--this.toRespond:this.toRespond:0;s[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),t}(V);function ng(e){return new E((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?W(n):Yl()).subscribe(t)}))}function rg(){return J(1)}function ig(e){return function(t){return 0===e?Yl():t.lift(new sg(e))}}var sg=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new lc}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new og(e,this.total))}}]),e}(),og=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=n,r.ring=new Array,r.count=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var s=t++%n;e.next(r[s])}e.complete()}}]),t}(m);function ag(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ju((function(t,n){return e(t,n,r)})):$,ig(1),n?dc(t):gc((function(){return new uc})))}}var ug=function(){function e(t,n,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=n,this.source=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new lg(e,this.predicate,this.thisArg,this.source))}}]),e}(),lg=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=n,s.thisArg=r,s.source=i,s.index=0,s.thisArg=r||_assertThisInitialized(s),s}return _inherits(t,e),_createClass(t,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),t}(m);function cg(){return rg()(Qu.apply(void 0,arguments))}function hg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return R(r)?(t.pop(),function(e){return cg(t,e,r)}):function(e){return cg(t,e)}}function fg(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new dg(e,t,n))}}var dg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new pg(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),pg=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).accumulator=n,s._seed=r,s.hasSeed=i,s.index=0,s}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),t}(m),vg=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new gg(e,this.callback))}}]),e}(),gg=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).add(new v(n)),r}return _inherits(t,e),t}(m),yg=null;function mg(){return yg}var _g,bg=function(e){function t(){var e;_classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(s).forEach((function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=s[t])}))}catch(o){e._animationPrefix=null,e._transitionEnd=null}return e}return _inherits(t,e),_createClass(t,[{key:"getDistributedNodes",value:function(e){return e.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(e,t,n){e.href=null==n?t:t+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),t}(function(){function e(){_classCallCheck(this,e),this.resourceLoaderType=null}return _createClass(e,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e}}]),e}()),kg={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},wg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cg={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Sg=function(){if(Fe.Node)return Fe.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}}(),Eg=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"parse",value:function(e){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(e,t){return t in e}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"getProperty",value:function(e,t){return e[t]}},{key:"invoke",value:function(e,t,n){e[t].apply(e,_toConsumableArray(n))}},{key:"logError",value:function(e){window.console&&(console.error?console.error(e):console.log(e))}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"contains",value:function(e,t){return Sg.call(e,t)}},{key:"querySelector",value:function(e,t){return e.querySelector(t)}},{key:"querySelectorAll",value:function(e,t){return e.querySelectorAll(t)}},{key:"on",value:function(e,t,n){e.addEventListener(t,n,!1)}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"createMouseEvent",value:function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}},{key:"createEvent",value:function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}},{key:"preventDefault",value:function(e){e.preventDefault(),e.returnValue=!1}},{key:"isPrevented",value:function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}},{key:"getInnerHTML",value:function(e){return e.innerHTML}},{key:"getTemplateContent",value:function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}},{key:"getOuterHTML",value:function(e){return e.outerHTML}},{key:"nodeName",value:function(e){return e.nodeName}},{key:"nodeValue",value:function(e){return e.nodeValue}},{key:"type",value:function(e){return e.type}},{key:"content",value:function(e){return this.hasProperty(e,"content")?e.content:e}},{key:"firstChild",value:function(e){return e.firstChild}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"parentElement",value:function(e){return e.parentNode}},{key:"childNodes",value:function(e){return e.childNodes}},{key:"childNodesAsList",value:function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n}},{key:"clearNodes",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"removeChild",value:function(e,t){e.removeChild(t)}},{key:"replaceChild",value:function(e,t,n){e.replaceChild(t,n)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"insertBefore",value:function(e,t,n){e.insertBefore(n,t)}},{key:"insertAllBefore",value:function(e,t,n){n.forEach((function(n){return e.insertBefore(n,t)}))}},{key:"insertAfter",value:function(e,t,n){e.insertBefore(n,t.nextSibling)}},{key:"setInnerHTML",value:function(e,t){e.innerHTML=t}},{key:"getText",value:function(e){return e.textContent}},{key:"setText",value:function(e,t){e.textContent=t}},{key:"getValue",value:function(e){return e.value}},{key:"setValue",value:function(e,t){e.value=t}},{key:"getChecked",value:function(e){return e.checked}},{key:"setChecked",value:function(e,t){e.checked=t}},{key:"createComment",value:function(e){return this.getDefaultDocument().createComment(e)}},{key:"createTemplate",value:function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createElementNS",value:function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}},{key:"createTextNode",value:function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}},{key:"createScriptTag",value:function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}},{key:"createStyleElement",value:function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}},{key:"createShadowRoot",value:function(e){return e.createShadowRoot()}},{key:"getShadowRoot",value:function(e){return e.shadowRoot}},{key:"getHost",value:function(e){return e.host}},{key:"clone",value:function(e){return e.cloneNode(!0)}},{key:"getElementsByClassName",value:function(e,t){return e.getElementsByClassName(t)}},{key:"getElementsByTagName",value:function(e,t){return e.getElementsByTagName(t)}},{key:"classList",value:function(e){return Array.prototype.slice.call(e.classList,0)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"hasClass",value:function(e,t){return e.classList.contains(t)}},{key:"setStyle",value:function(e,t,n){e.style[t]=n}},{key:"removeStyle",value:function(e,t){e.style[t]=""}},{key:"getStyle",value:function(e,t){return e.style[t]}},{key:"hasStyle",value:function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0}},{key:"tagName",value:function(e){return e.tagName}},{key:"attributeMap",value:function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t}},{key:"hasAttribute",value:function(e,t){return e.hasAttribute(t)}},{key:"hasAttributeNS",value:function(e,t,n){return e.hasAttributeNS(t,n)}},{key:"getAttribute",value:function(e,t){return e.getAttribute(t)}},{key:"getAttributeNS",value:function(e,t,n){return e.getAttributeNS(t,n)}},{key:"setAttribute",value:function(e,t,n){e.setAttribute(t,n)}},{key:"setAttributeNS",value:function(e,t,n,r){e.setAttributeNS(t,n,r)}},{key:"removeAttribute",value:function(e,t){e.removeAttribute(t)}},{key:"removeAttributeNS",value:function(e,t,n){e.removeAttributeNS(t,n)}},{key:"templateAwareRoot",value:function(e){return this.isTemplateElement(e)?this.content(e):e}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(e){return e.title}},{key:"setTitle",value:function(e,t){e.title=t||""}},{key:"elementMatches",value:function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}},{key:"isTemplateElement",value:function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}},{key:"isTextNode",value:function(e){return e.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(e){return e.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(e){return null!=e.shadowRoot&&e instanceof HTMLElement}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"importIntoDoc",value:function(e){return document.importNode(this.templateAwareRoot(e),!0)}},{key:"adoptNode",value:function(e){return document.adoptNode(e)}},{key:"getHref",value:function(e){return e.getAttribute("href")}},{key:"getEventKey",value:function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Cg.hasOwnProperty(t)&&(t=Cg[t]))}return wg[t]||t}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=xg||(xg=document.querySelector("base"))?xg.getAttribute("href"):null;return null==n?null:(t=n,_g||(_g=document.createElement("a")),_g.setAttribute("href",t),"/"===_g.pathname.charAt(0)?_g.pathname:"/"+_g.pathname)}},{key:"resetBaseElement",value:function(){xg=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(e,t,n){this.setAttribute(e,"data-"+t,n)}},{key:"getData",value:function(e,t){return this.getAttribute(e,"data-"+t)}},{key:"getComputedStyle",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return getComputedStyle(e)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return hu(document.cookie,e)}},{key:"setCookie",value:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}},{key:"attrToPropMap",get:function(){return kg}}],[{key:"makeCurrent",value:function(){var e;e=new t,yg||(yg=e)}}]),t}(bg),xg=null;function Ag(){return!!window.history.pushState}var Tg=new Ie("TRANSITION_ID"),Fg=[{provide:Mi,useFactory:function(e,t,n){return function(){n.get(Hi).donePromise.then((function(){var n=mg();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter((function(t){return n.getAttribute(t,"ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[Tg,Ou,Lt],multi:!0}],Ig=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){Fe.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Fe.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Fe.getAllAngularRootElements=function(){return e.getAllRootElements()},Fe.frameworkStabilizers||(Fe.frameworkStabilizers=[]),Fe.frameworkStabilizers.push((function(e){var t=Fe.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?mg().isShadowRoot(t)?this.findTestabilityInTree(e,mg().getHost(t),!0):this.findTestabilityInTree(e,mg().parentElement(t),!0):null}}],[{key:"init",value:function(){var t;t=new e,ws=t}}]),e}();function Pg(e,t){"undefined"!=typeof COMPILED&&COMPILED||((Fe.ng=Fe.ng||{})[e]=t)}var Og={ApplicationRef:Ps,NgZone:fs};function Rg(e){return Us(e)}var Dg=new Ie("EventManagerPlugins"),Ng=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}(),jg=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=mg().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),Lg=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}(),Mg=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return _inherits(t,e),_createClass(t,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return mg().remove(e)}))}}]),t}(Lg),Hg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bg=/%COMP%/g,Vg="_nghost-%COMP%",Ug="_ngcontent-%COMP%";function Kg(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?Kg(e,i,n):(i=i.replace(Bg,e),n.push(i))}return n}function zg(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var qg=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Wg(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Ze.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Qg(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case Ze.Native:case Ze.ShadowDom:return new $g(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Kg(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}(),Wg=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Hg[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=Hg[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=Hg[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&vn.DashCase?e.style.setProperty(t,n,r&vn.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&vn.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){Zg(t,"property"),e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return Zg(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zg(n)):this.eventManager.addEventListener(e,t,zg(n))}}]),e}(),Gg="@".charCodeAt(0);function Zg(e,t){if(e.charCodeAt(0)===Gg)throw new Error("Found the synthetic ".concat(t," ").concat(e,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var Qg=function(e){function t(e,n,r,i){var s;_classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).component=r;var o=Kg(i+"-"+r.id,r.styles,[]);return n.addStyles(o),s.contentAttr=Ug.replace(Bg,i+"-"+r.id),s.hostAttr=Vg.replace(Bg,i+"-"+r.id),s}return _inherits(t,e),_createClass(t,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,n){var r=_get(_getPrototypeOf(t.prototype),"createElement",this).call(this,e,n);return _get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),t}(Wg),$g=function(e){function t(e,n,r,i){var s;_classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).sharedStylesHost=n,s.hostEl=r,s.component=i,s.shadowRoot=i.encapsulation===Ze.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),s.sharedStylesHost.addHost(s.shadowRoot);for(var o=Kg(i.id,i.styles,[]),a=0;a<o.length;a++){var u=document.createElement("style");u.textContent=o[a],s.shadowRoot.appendChild(u)}return s}return _inherits(t,e),_createClass(t,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,n){return _get(_getPrototypeOf(t.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"insertBefore",value:function(e,n,r){return _get(_getPrototypeOf(t.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),n,r)}},{key:"removeChild",value:function(e,n){return _get(_getPrototypeOf(t.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(t.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),t}(Wg),Jg="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Yg=Jg("addEventListener"),Xg=Jg("removeEventListener"),ey={},ty="__zone_symbol__propagationStopped",ny=function(){var e="undefined"!=typeof Zone&&Zone[Jg("BLACK_LISTED_EVENTS")];if(e){var t={};return e.forEach((function(e){t[e]=e})),t}}(),ry=function(e){return!!ny&&ny.hasOwnProperty(e)},iy=function(e){var t=ey[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length){var i=n[0];return i.zone!==Zone.current?i.zone.run(i.handler,this,r):i.handler.apply(this,r)}for(var s=n.slice(),o=0;o<s.length&&!0!==e[ty];o++){var a=s[o];a.zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},sy=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).ngZone=n,r&&ju(r)||i.patchEvent(),i}return _inherits(t,e),_createClass(t,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[ty]=!0),e&&e.apply(this,arguments)}}}},{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this,i=n;if(!e[Yg]||fs.isInAngularZone()&&!ry(t))e.addEventListener(t,i,!1);else{var s=ey[t];s||(s=ey[t]=Jg("ANGULAR"+t+"FALSE"));var o=e[s],a=o&&o.length>0;o||(o=e[s]=[]);var u=ry(t)?Zone.root:Zone.current;if(0===o.length)o.push({zone:u,handler:i});else{for(var l=!1,c=0;c<o.length;c++)if(o[c].handler===i){l=!0;break}l||o.push({zone:u,handler:i})}a||e[Yg](t,iy,!1)}return function(){return r.removeEventListener(e,t,i)}}},{key:"removeEventListener",value:function(e,t,n){var r=e[Xg];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var i=ey[t],s=i&&e[i];if(!s)return e.removeEventListener.apply(e,[t,n,!1]);for(var o=!1,a=0;a<s.length;a++)if(s[a].handler===n){o=!0,s.splice(a,1);break}o?0===s.length&&r.apply(e,[t,iy,!1]):e.removeEventListener.apply(e,[t,n,!1])}}]),t}(jg),oy={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ay=new Ie("HammerGestureConfig"),uy=new Ie("HammerLoader"),ly=function(){function e(){_classCallCheck(this,e),this.events=[],this.overrides={}}return _createClass(e,[{key:"buildHammer",value:function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t}}]),e}(),cy=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._config=n,s.console=r,s.loader=i,s}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return!(!oy.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(e,'" event cannot be bound because Hammer.JS is not ')+"loaded and no custom loader has been specified."),1))}},{key:"addEventListener",value:function(e,t,n){var r=this,i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var s=!1,o=function(){s=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(o=function(){});s||(o=r.addEventListener(e,t,n))})).catch((function(){r.console.warn('The "'.concat(t,'" event cannot be bound because the custom ')+"Hammer.JS loader failed."),o=function(){}})),function(){o()}}return i.runOutsideAngular((function(){var s=r._config.buildHammer(e),o=function(e){i.runGuarded((function(){n(e)}))};return s.on(t,o),function(){s.off(t,o),"function"==typeof s.destroy&&s.destroy()}}))}},{key:"isCustomEvent",value:function(e){return this._config.events.indexOf(e)>-1}}]),t}(jg),hy=["alt","control","meta","shift"],fy={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},dy=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return null!=t.parseEventName(e)}},{key:"addEventListener",value:function(e,n,r){var i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return mg().onAndCancel(e,i.domEventName,s)}))}}],[{key:"parseEventName",value:function(e){var n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=t._normalizeKey(n.pop()),s="";if(hy.forEach((function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")})),s+=i,0!=n.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=s,o}},{key:"getEventFullKey",value:function(e){var t="",n=mg().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),hy.forEach((function(r){r!=n&&(0,fy[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,n,r){return function(i){t.getEventFullKey(i)===e&&r.runGuarded((function(){return n(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),t}(jg),py=function e(){_classCallCheck(this,e)},vy=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n}return _inherits(t,e),_createClass(t,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case At.NONE:return t;case At.HTML:return t instanceof yy?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=null;try{ft=ft||new ot(e);var r=t?String(t):"";n=ft.getInertBodyElement(r);var i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=ft.getInertBodyElement(r)}while(r!==s);var o=new wt,a=o.sanitizeChildren(xt(n)||n);return st()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n)for(var u=xt(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(t)));case At.STYLE:return t instanceof my?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(It);return t&&lt(t[1])===t[1]||e.match(Ft)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(st()&&console.warn("WARNING: sanitizing unsafe style value ".concat(e," (see http://g.co/ng/security#xss).")),"unsafe")}(t));case At.SCRIPT:if(t instanceof _y)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case At.URL:return t instanceof ky||t instanceof by?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),lt(String(t)));case At.RESOURCE_URL:if(t instanceof ky)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(e,t){if(e instanceof gy)throw new Error("Required a safe ".concat(t,", got a ").concat(e.getTypeName()," ")+"(see http://g.co/ng/security#xss)")}},{key:"bypassSecurityTrustHtml",value:function(e){return new yy(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return new my(e)}},{key:"bypassSecurityTrustScript",value:function(e){return new _y(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return new by(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return new ky(e)}}]),t}(py),gy=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),e}(),yy=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"HTML"}}]),t}(gy),my=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"Style"}}]),t}(gy),_y=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"Script"}}]),t}(gy),by=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"URL"}}]),t}(gy),ky=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),t}(gy),wy=xs(zs,"browser",[{provide:zi,useValue:Ru},{provide:Ki,useValue:function(){Eg.makeCurrent(),Ig.init()},multi:!0},{provide:wa,useClass:function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n._init(),n}return _inherits(t,e),_createClass(t,[{key:"_init",value:function(){this.location=mg().getLocation(),this._history=mg().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return mg().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){mg().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){mg().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,n){Ag()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Ag()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),t}(wa),deps:[Ou]},{provide:Ou,useFactory:function(){return document},deps:[]}]);function Cy(){return new nt}var Sy=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Bi,useValue:t.appId},{provide:Tg,useExisting:Bi},Fg]}}}]),e}();"undefined"!=typeof window&&window;var Ey=function e(t,n){_classCallCheck(this,e),this.id=t,this.url=n},xy=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).navigationTrigger=i,r.restoredState=s,r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(Ey),Ay=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),t}(Ey),Ty=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).reason=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(Ey),Fy=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).error=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),t}(Ey),Iy=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,s.state=i,s}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Ey),Py=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,s.state=i,s}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Ey),Oy=function(e){function t(e,n,r,i,s){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o.shouldActivate=s,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),t}(Ey),Ry=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,s.state=i,s}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Ey),Dy=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,s.state=i,s}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Ey),Ny=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),jy=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Ly=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),My=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Hy=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),By=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Vy=function(){function e(t,n,r){_classCallCheck(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),Uy=function e(){_classCallCheck(this,e)},Ky="primary",zy=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function qy(e){return new zy(e)}var Wy="ngNavigationCancelingError";function Gy(e){var t=Error("NavigationCancelingError: "+e);return t[Wy]=!0,t}function Zy(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},s=0;s<r.length;s++){var o=r[s],a=e[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}var Qy=function e(t,n){_classCallCheck(this,e),this.routes=t,this.module=n};function $y(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];Jy(r,Yy(t,r))}}function Jy(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Ky)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&$y(e.children,t)}function Yy(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Xy(e){var t=e.children&&e.children.map(Xy),n=t?Object.assign({},e,{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ky&&(n.component=Uy),n}function em(e,t){var n,r=Object.keys(e),i=Object.keys(t);if(!r||!i||r.length!=i.length)return!1;for(var s=0;s<r.length;s++)if(e[n=r[s]]!==t[n])return!1;return!0}function tm(e){return Array.prototype.concat.apply([],e)}function nm(e){return e.length>0?e[e.length-1]:null}function rm(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function im(e){return en(e)?e:Xt(e)?W(Promise.resolve(e)):Qu(e)}function sm(e,t,n){return n?function(e,t){return em(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!lm(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return t[n]===e[n]}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!lm(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!lm(n.segments,i))return!1;for(var s in r.children){if(!n.children[s])return!1;if(!e(n.children[s],r.children[s]))return!1}return!0}var o=i.slice(0,n.segments.length),a=i.slice(n.segments.length);return!!lm(n.segments,o)&&!!n.children[Ky]&&t(n.children[Ky],r,a)}(t,n,n.segments)}(e.root,t.root)}var om=function(){function e(t,n,r){_classCallCheck(this,e),this.root=t,this.queryParams=n,this.fragment=r}return _createClass(e,[{key:"toString",value:function(){return dm.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=qy(this.queryParams)),this._queryParamMap}}]),e}(),am=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.segments=t,this.children=n,this.parent=null,rm(n,(function(e,t){return e.parent=r}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return pm(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),um=function(){function e(t,n){_classCallCheck(this,e),this.path=t,this.parameters=n}return _createClass(e,[{key:"toString",value:function(){return bm(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=qy(this.parameters)),this._parameterMap}}]),e}();function lm(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function cm(e,t){var n=[];return rm(e.children,(function(e,r){r===Ky&&(n=n.concat(t(e,r)))})),rm(e.children,(function(e,r){r!==Ky&&(n=n.concat(t(e,r)))})),n}var hm=function e(){_classCallCheck(this,e)},fm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new Em(e);return new om(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"".concat("/".concat(function e(t,n){if(!t.hasChildren())return pm(t);if(n){var r=t.children[Ky]?e(t.children[Ky],!1):"",i=[];return rm(t.children,(function(t,n){n!==Ky&&i.push("".concat(n,":").concat(e(t,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var s=cm(t,(function(n,r){return r===Ky?[e(t.children[Ky],!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(pm(t),"/(").concat(s.join("//"),")")}(e.root,!0)),(n=e.queryParams,r=Object.keys(n).map((function(e){var t=n[e];return Array.isArray(t)?t.map((function(t){return"".concat(gm(e),"=").concat(gm(t))})).join("&"):"".concat(gm(e),"=").concat(gm(t))})),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),dm=new fm;function pm(e){return e.segments.map((function(e){return bm(e)})).join("/")}function vm(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gm(e){return vm(e).replace(/%3B/gi,";")}function ym(e){return vm(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mm(e){return decodeURIComponent(e)}function _m(e){return mm(e.replace(/\+/g,"%20"))}function bm(e){return"".concat(ym(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(ym(e),"=").concat(ym(t[e]))})).join("")));var t}var km=/^[^\/()?;=#]+/;function wm(e){var t=e.match(km);return t?t[0]:""}var Cm=/^[^=?&#]+/,Sm=/^[^?&#]+/,Em=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new am([],{}):new am([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Ky]=new am(e,t)),n}},{key:"parseSegment",value:function(){var e=wm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new um(mm(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=wm(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=wm(this.remaining);r&&this.capture(n=r)}e[mm(t)]=mm(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Cm);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Sm);return t?t[0]:""}(this.remaining);r&&this.capture(n=r)}var i=_m(t),s=_m(n);if(e.hasOwnProperty(i)){var o=e[i];Array.isArray(o)||(e[i]=o=[o]),o.push(s)}else e[i]=s}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=wm(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ky);var s=this.parseChildren();t[i]=1===Object.keys(s).length?s[Ky]:new am([],s),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),xm=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Am(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=Am(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Tm(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return Tm(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function Am(e,t){if(e===t.value)return t;var n=!0,r=!1,i=void 0;try{for(var s,o=t.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=Am(e,s.value);if(a)return a}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function Tm(e,t){if(e===t.value)return[t];var n=!0,r=!1,i=void 0;try{for(var s,o=t.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=Tm(e,s.value);if(a.length)return a.unshift(t),a}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return[]}var Fm=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.children=n}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Im(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var Pm=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).snapshot=n,Lm(_assertThisInitialized(r),e),r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return this.snapshot.toString()}}]),t}(xm);function Om(e,t){var n=function(e,t){var n=new Nm([],{},{},"",{},Ky,t,null,e.root,-1,{});return new jm("",new Fm(n,[]))}(e,t),r=new fh([new um("",{})]),i=new fh({}),s=new fh({}),o=new fh({}),a=new fh(""),u=new Rm(r,i,o,a,s,Ky,t,n.root);return u.snapshot=n.root,new Pm(new Fm(u,[]),n)}var Rm=function(){function e(t,n,r,i,s,o,a,u){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=u}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(U((function(e){return qy(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(U((function(e){return qy(e)})))),this._queryParamMap}}]),e}();function Dm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign({},e.params,t.params),data:Object.assign({},e.data,t.data),resolve:Object.assign({},e.resolve,t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Nm=function(){function e(t,n,r,i,s,o,a,u,l,c,h){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=qy(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=qy(this.queryParams)),this._queryParamMap}}]),e}(),jm=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).url=e,Lm(_assertThisInitialized(r),n),r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return Mm(this._root)}}]),t}(xm);function Lm(e,t){t.value._routerState=e,t.children.forEach((function(t){return Lm(e,t)}))}function Mm(e){var t=e.children.length>0?" { ".concat(e.children.map(Mm).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Hm(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,em(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),em(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!em(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),em(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Bm(e,t){var n,r;return em(e.params,t.params)&&lm(n=e.url,r=t.url)&&n.every((function(e,t){return em(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||Bm(e.parent,t.parent))}function Vm(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Um(e,t,n,r,i){var s={};return r&&rm(r,(function(e,t){s[t]=Array.isArray(e)?e.map((function(e){return"".concat(e)})):"".concat(e)})),new om(n.root===e?t:function e(t,n,r){var i={};return rm(t.children,(function(t,s){i[s]=t===n?r:e(t,n,r)})),new am(t.segments,i)}(n.root,e,t),s,i)}var Km=function(){function e(t,n,r){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Vm(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(i&&i!==nm(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),zm=function e(t,n,r){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function qm(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[Ky]:"".concat(e)}function Wm(e,t,n){if(e||(e=new am([],{})),0===e.segments.length&&e.hasChildren())return Gm(e,t,n);var r=function(e,t,n){for(var r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return s;var o=e.segments[i],a=qm(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Jm(a,u,o))return s;r+=2}else{if(!Jm(a,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var s=new am(e.segments.slice(0,r.pathIndex),{});return s.children[Ky]=new am(e.segments.slice(r.pathIndex),e.children),Gm(s,0,i)}return r.match&&0===i.length?new am(e.segments,{}):r.match&&!e.hasChildren()?Zm(e,t,n):r.match?Gm(e,0,i):Zm(e,t,n)}function Gm(e,t,n){if(0===n.length)return new am(e.segments,{});var r=function(e){return"object"!=typeof e[0]?_defineProperty2({},Ky,e):void 0===e[0].outlets?_defineProperty2({},Ky,e):e[0].outlets}(n),i={};return rm(r,(function(n,r){null!==n&&(i[r]=Wm(e.children[r],t,n))})),rm(e.children,(function(e,t){void 0===r[t]&&(i[t]=e)})),new am(e.segments,i)}function Zm(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var s=Qm(n[i].outlets);return new am(r,s)}if(0===i&&Vm(n[0]))r.push(new um(e.segments[t].path,n[0])),i++;else{var o=qm(n[i]),a=i<n.length-1?n[i+1]:null;o&&a&&Vm(a)?(r.push(new um(o,$m(a))),i+=2):(r.push(new um(o,{})),i++)}}return new am(r,{})}function Qm(e){var t={};return rm(e,(function(e,n){null!==e&&(t[n]=Zm(new am([],{}),0,e))})),t}function $m(e){var t={};return rm(e,(function(e,n){return t[n]="".concat(e)})),t}function Jm(e,t,n){return e==n.path&&em(t,n.parameters)}var Ym=function(){function e(t,n,r,i){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Hm(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=Im(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]})),rm(i,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var i=Im(e),s=e.value.component?r.children:t;rm(i,(function(e,t){return n.deactivateRouteAndItsChildren(e,s)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=Im(t);e.children.forEach((function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new By(e.value.snapshot))})),e.children.length&&this.forwardEvent(new My(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Hm(r),r===i)if(r.component){var s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Xm(a.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),l=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function Xm(e){Hm(e.value),e.children.forEach(Xm)}function e_(e){return"function"==typeof e}function t_(e){return e instanceof om}var n_=function e(t){_classCallCheck(this,e),this.segmentGroup=t||null},r_=function e(t){_classCallCheck(this,e),this.urlTree=t};function i_(e){return new E((function(t){return t.error(new n_(e))}))}function s_(e){return new E((function(t){return t.error(new r_(e))}))}function o_(e){return new E((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var a_=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(ze)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Ky).pipe(U((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(kc((function(t){if(t instanceof r_)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof n_)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ky).pipe(U((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(kc((function(e){if(e instanceof n_)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new am([],_defineProperty2({},Ky,e)):e;return new om(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(U((function(e){return new am([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Qu({});var s=[],o=[],a={};return rm(n,(function(n,i){var u,l,c=(u=i,l=n,r.expandSegmentGroup(e,t,l,u)).pipe(U((function(e){return a[i]=e})));i===Ky?s.push(c):o.push(c)})),Qu.apply(null,s.concat(o)).pipe(rg(),ag(),U((function(){return a})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,i,s){var o=this;return Qu.apply(void 0,_toConsumableArray(n)).pipe(U((function(a){return o.expandSegmentAgainstRoute(e,t,n,a,r,i,s).pipe(kc((function(e){if(e instanceof n_)return Qu(null);throw e})))})),rg(),bc((function(e){return!!e})),kc((function(e,n){if(e instanceof uc||"EmptyError"===e.name){if(o.noLeftoversInUrl(t,r,i))return Qu(new am([],{}));throw new n_(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,s,o){return h_(r)!==s?i_(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):i_(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?s_(s):this.lineralizeSegments(n,s).pipe(G((function(n){var s=new am(n,{});return i.expandSegment(e,s,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,s){var o=this,a=u_(t,r,i),u=a.matched,l=a.consumedSegments,c=a.lastChild,h=a.positionalParamSegments;if(!u)return i_(t);var f=this.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?s_(f):this.lineralizeSegments(r,f).pipe(G((function(r){return o.expandSegment(e,t,n,r.concat(i.slice(c)),s,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(U((function(e){return n._loadedConfig=e,new am(r,{})}))):Qu(new am(r,{}));var s=u_(t,n,r),o=s.matched,a=s.consumedSegments,u=s.lastChild;if(!o)return i_(t);var l=r.slice(u);return this.getChildConfig(e,n,r).pipe(G((function(e){var n=e.module,r=e.routes,s=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return c_(e,t,n)&&h_(n)!==Ky}))}(e,n,r)?{segmentGroup:l_(new am(t,function(e,t){var n={};n[Ky]=t;var r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;""===u.path&&h_(u)!==Ky&&(n[h_(u)]=new am([],{}))}}catch(l){i=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(r,new am(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return c_(e,t,n)}))}(e,n,r)?{segmentGroup:l_(new am(e.segments,function(e,t,n,r){var i={},s=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;c_(e,t,c)&&!r[h_(c)]&&(i[h_(c)]=new am([],{}))}}catch(h){o=!0,a=h}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}return Object.assign({},r,i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,a,l,r),o=s.segmentGroup,u=s.slicedSegments;return 0===u.length&&o.hasChildren()?i.expandChildren(n,r,o).pipe(U((function(e){return new am(a,e)}))):0===r.length&&0===u.length?Qu(new am(a,{})):i.expandSegment(n,o,r,u,Ky,!0).pipe(U((function(e){return new am(a.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?Qu(new Qy(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Qu(t._loadedConfig):function(e,t,n){var r,i=t.canLoad;return i&&0!==i.length?W(i).pipe(U((function(r){var i,s=e.get(r);if(function(e){return e&&e_(e.canLoad)}(s))i=s.canLoad(t,n);else{if(!e_(s))throw new Error("Invalid CanLoad guard");i=s(t,n)}return im(i)}))).pipe(rg(),(r=function(e){return!0===e},function(e){return e.lift(new ug(r,void 0,e))})):Qu(!0)}(e.injector,t,n).pipe(G((function(n){return n?r.configLoader.load(e.injector,t).pipe(U((function(e){return t._loadedConfig=e,e}))):function(e){return new E((function(t){return t.error(Gy("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):Qu(new Qy([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Qu(n);if(r.numberOfChildren>1||!r.children[Ky])return o_(e.redirectTo);r=r.children[Ky]}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new om(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return rm(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,s=this.createSegments(e,t.segments,n,r),o={};return rm(t.children,(function(t,s){o[s]=i.createSegmentGroup(e,t,n,r)})),new am(s,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map((function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n=0,r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;if(u.path===e.path)return t.splice(n),u;n++}}catch(l){i=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return e}}]),e}();function u_(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||Zy)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function l_(e){if(1===e.numberOfChildren&&e.children[Ky]){var t=e.children[Ky];return new am(e.segments.concat(t.segments),t.children)}return e}function c_(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function h_(e){return e.outlet||Ky}var f_=function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]},d_=function e(t,n){_classCallCheck(this,e),this.component=t,this.route=n};function p_(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function v_(e,t,n){var r=Im(e),i=e.value;rm(r,(function(e,r){v_(e,i.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new d_(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var g_=Symbol("INITIAL_VALUE");function y_(){return sc((function(e){return Xv.apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(cc(1),hg(g_))})))).pipe(fg((function(e,t){var n=!1;return t.reduce((function(e,r,i){if(e!==g_)return e;if(r===g_&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||t_(r))return r}return e}),e)}),g_),Ju((function(e){return e!==g_})),U((function(e){return t_(e)?e:!0===e})),cc(1))}))}function m_(e,t){return null!==e&&t&&t(new Hy(e)),Qu(!0)}function __(e,t){return null!==e&&t&&t(new Ly(e)),Qu(!0)}function b_(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Qu(r.map((function(r){return ng((function(){var i,s=p_(r,t,n);if(function(e){return e&&e_(e.canActivate)}(s))i=im(s.canActivate(t,e));else{if(!e_(s))throw new Error("Invalid CanActivate guard");i=im(s(t,e))}return i.pipe(bc())}))}))).pipe(y_()):Qu(!0)}function k_(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return ng((function(){return Qu(t.guards.map((function(i){var s,o=p_(i,t.node,n);if(function(e){return e&&e_(e.canActivateChild)}(o))s=im(o.canActivateChild(r,e));else{if(!e_(o))throw new Error("Invalid CanActivateChild guard");s=im(o(r,e))}return s.pipe(bc())}))).pipe(y_())}))}));return Qu(i).pipe(y_())}var w_=function e(){_classCallCheck(this,e)},C_=function(){function e(t,n,r,i,s,o){_classCallCheck(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}return _createClass(e,[{key:"recognize",value:function(){try{var e=x_(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ky),n=new Nm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ky,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Fm(n,t),i=new jm(this.url,r);return this.inheritParamsAndData(i._root),Qu(i)}catch(s){return new E((function(e){return e.error(s)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Dm(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,i=cm(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},i.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),i=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[e.value.outlet]=e.value})),i.sort((function(e,t){return e.value.outlet===Ky?-1:t.value.outlet===Ky?1:e.value.outlet.localeCompare(t.value.outlet)})),i}},{key:"processSegment",value:function(e,t,n,r){var i=!0,s=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var l=a.value;try{return this.processSegmentAgainstRoute(l,t,n,r)}catch(c){if(!(c instanceof w_))throw c}}}catch(h){s=!0,o=h}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}if(this.noLeftoversInUrl(t,n,r))return[];throw new w_}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new w_;if((e.outlet||Ky)!==r)throw new w_;var i,s=[],o=[];if("**"===e.path){var a=n.length>0?nm(n).parameters:{};i=new Nm(n,a,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,F_(e),r,e.component,e,S_(t),E_(t)+n.length,I_(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new w_;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||Zy)(n,e,t);if(!r)throw new w_;var i={};rm(r.posParams,(function(e,t){i[t]=e.path}));var s=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(t,e,n);s=u.consumedSegments,o=n.slice(u.lastChild),i=new Nm(s,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,F_(e),r,e.component,e,S_(t),E_(t)+s.length,I_(e))}var l=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),c=x_(t,s,o,l,this.relativeLinkResolution),h=c.segmentGroup,f=c.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(l,h);return[new Fm(i,d)]}if(0===l.length&&0===f.length)return[new Fm(i,[])];var p=this.processSegment(l,h,f,Ky);return[new Fm(i,p)]}}]),e}();function S_(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function E_(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function x_(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some((function(n){return A_(e,t,n)&&T_(n)!==Ky}))}(e,n,r)){var s=new am(t,function(e,t,n,r){var i={};i[Ky]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var s=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;if(""===c.path&&T_(c)!==Ky){var h=new am([],{});h._sourceSegment=e,h._segmentIndexShift=t.length,i[T_(c)]=h}}}catch(f){o=!0,a=f}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}return i}(e,t,r,new am(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return A_(e,t,n)}))}(e,n,r)){var o=new am(e.segments,function(e,t,n,r,i,s){var o={},a=!0,u=!1,l=void 0;try{for(var c,h=r[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(A_(e,n,f)&&!i[T_(f)]){var d=new am([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[T_(f)]=d}}}catch(p){u=!0,l=p}finally{try{a||null==h.return||h.return()}finally{if(u)throw l}}return Object.assign({},i,o)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var a=new am(e.segments,e.children);return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}function A_(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function T_(e){return e.outlet||Ky}function F_(e){return e.data||{}}function I_(e){return e.resolve||{}}function P_(e,t,n,r){var i=p_(e,t,r);return im(i.resolve?i.resolve(t,n):i(t,n))}function O_(e){return function(t){return t.pipe(sc((function(t){var n=e(t);return n?W(n).pipe(U((function(){return t}))):W([t])})))}}var R_=function e(){_classCallCheck(this,e)},D_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),N_=new Ie("ROUTES"),j_=function(){function e(t,n,r,i){_classCallCheck(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(U((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new Qy(tm(i.injector.get(N_)).map(Xy),i)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?W(this.loader.load(e)):im(e()).pipe(G((function(e){return e instanceof qe?Qu(e):W(t.compiler.compileModuleAsync(e))})))}}]),e}(),L_=function e(){_classCallCheck(this,e)},M_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function H_(e){throw e}function B_(e,t,n){return t.parse("/")}function V_(e,t){return Qu(null)}var U_=function(){function e(t,n,r,i,s,o,a,u){var l=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new P,this.errorHandler=H_,this.malformedUriErrorHandler=B_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:V_,afterPreactivation:V_},this.urlHandlingStrategy=new M_,this.routeReuseStrategy=new D_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(ze),this.console=s.get(Wi);var c=s.get(fs);this.isNgZoneEnabled=c instanceof fs,this.resetConfig(u),this.currentUrlTree=new om(new am([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new j_(o,a,(function(e){return l.triggerEvent(new Ny(e))}),(function(e){return l.triggerEvent(new jy(e))})),this.routerState=Om(this.currentUrlTree,this.rootComponentType),this.transitions=new fh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Ju((function(e){return 0!==e.id})),U((function(e){return Object.assign({},e,{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),sc((function(e){var r,i,s,o=!1,a=!1;return Qu(e).pipe(Kl((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign({},t.lastSuccessfulNavigation,{previousNavigation:null}):null}})),sc((function(e){var r,i,s,o,a=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||a)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Qu(e).pipe(sc((function(e){var r=t.transitions.getValue();return n.next(new xy(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Jl:[e]})),sc((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,i=t.configLoader,s=t.urlSerializer,o=t.config,function(e){return e.pipe(sc((function(e){return function(e,t,n,r,i){return new a_(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe(U((function(t){return Object.assign({},e,{urlAfterRedirects:t})})))})))}),Kl((function(e){t.currentNavigation=Object.assign({},t.currentNavigation,{finalUrl:e.urlAfterRedirects})})),function(e,n,r,i,s){return function(r){return r.pipe(G((function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new C_(e,t,n,r,i,s).recognize()}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),i,s).pipe(U((function(e){return Object.assign({},r,{targetSnapshot:e})})));var o})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),Kl((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),Kl((function(e){var r=new Iy(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(a&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,l=e.extractedUrl,c=e.source,h=e.restoredState,f=e.extras,d=new xy(u,t.serializeUrl(l),c,h);n.next(d);var p=Om(l,t.rootComponentType).snapshot;return Qu(Object.assign({},e,{targetSnapshot:p,urlAfterRedirects:l,extras:Object.assign({},f,{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Jl})),O_((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,s=e.rawUrl,o=e.extras,a=o.skipLocationChange,u=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:s,skipLocationChange:!!a,replaceUrl:!!u})})),Kl((function(e){var n=new Py(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),U((function(e){return Object.assign({},e,{guards:(n=e.targetSnapshot,r=e.currentSnapshot,i=t.rootContexts,s=n._root,function e(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Im(n);return t.children.forEach((function(t){!function(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,a=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!lm(e.url,t.url);case"pathParamsOrQueryParamsChange":return!lm(e.url,t.url)||!em(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bm(e,t)||!em(e.queryParams,t.queryParams);case"paramsChange":default:return!Bm(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new f_(i)):(o.data=a.data,o._resolvedData=a._resolvedData),e(t,n,o.component?u?u.children:null:r,i,s),l&&s.canDeactivateChecks.push(new d_(u&&u.outlet&&u.outlet.component||null,a))}else a&&v_(n,u,s),s.canActivateChecks.push(new f_(i)),e(t,null,o.component?u?u.children:null:r,i,s)}(t,o[t.value.outlet],r,i.concat([t.value]),s),delete o[t.value.outlet]})),rm(o,(function(e,t){return v_(e,r.getContext(t),s)})),s}(s,r?r._root:null,i,[s.value]))});var n,r,i,s})),(i=t.ngModule.injector,s=function(e){return t.triggerEvent(e)},function(e){return e.pipe(G((function(e){var t=e.targetSnapshot,n=e.currentSnapshot,r=e.guards,o=r.canActivateChecks,a=r.canDeactivateChecks;return 0===a.length&&0===o.length?Qu(Object.assign({},e,{guardsResult:!0})):function(e,t,n,r){return W(e).pipe(G((function(e){return function(e,t,n,r,i){var s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Qu(s.map((function(s){var o,a=p_(s,t,i);if(function(e){return e&&e_(e.canDeactivate)}(a))o=im(a.canDeactivate(e,t,n,r));else{if(!e_(a))throw new Error("Invalid CanDeactivate guard");o=im(a(e,t,n,r))}return o.pipe(bc())}))).pipe(y_()):Qu(!0)}(e.component,e.route,n,t,r)})),bc((function(e){return!0!==e}),!0))}(a,t,n,i).pipe(G((function(e){return e&&"boolean"==typeof e?function(e,t,n,r){return W(t).pipe($u((function(t){return W([__(t.route.parent,r),m_(t.route,r),k_(e,t.path,n),b_(e,t.route,n)]).pipe(rg(),bc((function(e){return!0!==e}),!0))})),bc((function(e){return!0!==e}),!0))}(t,o,i,s):Qu(e)})),U((function(t){return Object.assign({},e,{guardsResult:t})})))})))}),Kl((function(e){if(t_(e.guardsResult)){var n=Gy('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),Kl((function(e){var n=new Oy(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),Ju((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new Ty(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),O_((function(e){if(e.guards.canActivateChecks.length)return Qu(e).pipe(Kl((function(e){var n=new Ry(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),function(e,t){return function(n){return n.pipe(G((function(n){var r=n.targetSnapshot,i=n.guards.canActivateChecks;return i.length?W(i).pipe($u((function(n){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return Qu({});if(1===i.length){var s=i[0];return P_(e[s],t,n,r).pipe(U((function(e){return _defineProperty2({},s,e)})))}var o={};return W(i).pipe(G((function(i){return P_(e[i],t,n,r).pipe(U((function(e){return o[i]=e,e})))}))).pipe(ag(),U((function(){return o})))}(e._resolve,e,t,r).pipe(U((function(t){return e._resolvedData=t,e.data=Object.assign({},e.data,Dm(e,n).resolve),null})))}(n.route,r,e,t)})),function(e,t){return arguments.length>=2?function(n){return w(fg(e,t),ig(1),dc(t))(n)}:function(t){return w(fg((function(t,n,r){return e(t,n,r+1)})),ig(1))(t)}}((function(e,t){return e})),U((function(e){return n}))):Qu(n)})))}}(t.paramsInheritanceStrategy,t.ngModule.injector),Kl((function(e){var n=new Dy(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})))})),O_((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,s=e.rawUrl,o=e.extras,a=o.skipLocationChange,u=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:s,skipLocationChange:!!a,replaceUrl:!!u})})),U((function(e){var n,r,i,s,o=(n=t.routeReuseStrategy,r=e.targetSnapshot,i=e.currentRouterState,s=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var s=function(t,n,r){return n.children.map((function(n){var i=!0,s=!1,o=void 0;try{for(var a,u=r.children[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var l=a.value;if(t.shouldReuseRoute(l.value.snapshot,n.value))return e(t,n,l)}}catch(c){s=!0,o=c}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}return e(t,n)}))}(t,n,r);return new Fm(i,s)}var o=t.retrieve(n.value);if(o){var a=o.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,a),a}var u,l=new Rm(new fh((u=n.value).url),new fh(u.params),new fh(u.queryParams),new fh(u.fragment),new fh(u.data),u.outlet,u.component,u),c=n.children.map((function(n){return e(t,n)}));return new Fm(l,c)}(n,r._root,i?i._root:void 0),new Pm(s,r));return Object.assign({},e,{targetRouterState:o})})),Kl((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),function(e,t,n){return U((function(r){return new Ym(t,r.targetRouterState,r.currentRouterState,n).activate(e),r}))}(t.rootContexts,t.routeReuseStrategy,(function(e){return t.triggerEvent(e)})),Kl({next:function(){o=!0},complete:function(){o=!0}}),(r=function(){if(!o&&!a){t.resetUrlToCurrentUrlTree();var r=new Ty(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new vg(r))}),kc((function(r){if(a=!0,(u=r)&&u[Wy]){var i=t_(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var s=new Ty(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(s),e.resolve(!1),i&&t.navigateByUrl(r.url)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new Fy(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(l){e.reject(l)}}var u;return Jl})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign({},this.getTransition(),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){$y(e),this.config=e.map(Xy),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,s=t.preserveQueryParams,o=t.queryParamsHandling,a=t.preserveFragment;st()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,l=a?this.currentUrlTree.fragment:i,c=null;if(o)switch(o){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=s?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return Um(t.root,t.root,t,r,i);var s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Km(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var s={};return rm(r.outlets,(function(e,t){s[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:s}])}if(r.segmentPath)return[].concat(_toConsumableArray(e),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(e),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(_toConsumableArray(e),[r])}),[]);return new Km(n,t,r)}(n);if(s.toRoot())return Um(t.root,new am([],{}),t,r,i);var o=function(e,t,n){if(e.isAbsolute)return new zm(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new zm(n.snapshot._urlSegment,!0,0);var r=Vm(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,s=n;s>i;){if(s-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new zm(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Gm(o.segmentGroup,o.index,s.commands):Wm(o.segmentGroup,o.index,s.commands);return Um(o.segmentGroup,a,t,r,i)}(u,this.currentUrlTree,e,c,l)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};st()&&this.isNgZoneEnabled&&!fs.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=t_(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(t_(e))return sm(this.currentUrlTree,e,t);var n=this.parseUrl(e);return sm(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new Ay(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r){var i=this.getTransition();if(i&&"imperative"!==t&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==t&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==t&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);var s=null,o=null,a=new Promise((function(e,t){s=e,o=t})),u=++this.navigationId;return this.setTransition({id:u,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:s,reject:o,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),e}(),K_=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.router=t,this.route=n,this.commands=[],null==r&&i.setAttribute(s.nativeElement,"tabindex","0")}return _createClass(e,[{key:"onClick",value:function(){var e={skipLocationChange:q_(this.skipLocationChange),replaceUrl:q_(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){st()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:q_(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:q_(this.preserveFragment)})}}]),e}(),z_=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=t.events.subscribe((function(e){e instanceof Ay&&i.updateTargetUrlAndHref()}))}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:q_(this.skipLocationChange),replaceUrl:q_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){st()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:q_(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:q_(this.preserveFragment)})}}]),e}();function q_(e){return""===e||!!e}var W_=function(){function e(t,n,r,i,s){var o=this;_classCallCheck(this,e),this.router=t,this.element=n,this.renderer=r,this.link=i,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe((function(e){e instanceof Ay&&o.update()}))}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.links.changes.subscribe((function(t){return e.update()})),this.linksWithHrefs.changes.subscribe((function(t){return e.update()})),this.update()}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"update",value:function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.classes.forEach((function(n){t?e.renderer.addClass(e.element.nativeElement,n):e.renderer.removeClass(e.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(e){var t=this;return function(n){return e.isActive(n.urlTree,t.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter((function(e){return!!e}))}}]),e}(),G_=function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new Z_,this.attachRef=null},Z_=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new G_,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),Q_=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ni,this.deactivateEvents=new Ni,this.name=i||Ky,t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new $_(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}(),$_=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.childContexts=n,this.parent=r}return _createClass(e,[{key:"get",value:function(e,t){return e===Rm?this.route:e===Z_?this.childContexts:this.parent.get(e,t)}}]),e}(),J_=function e(){_classCallCheck(this,e)},Y_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(kc((function(){return Qu(null)})))}}]),e}(),X_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return Qu(null)}}]),e}(),eb=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new j_(n,r,(function(e){return t.triggerEvent(new Ny(e))}),(function(e){return t.triggerEvent(new jy(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Ju((function(e){return e instanceof Ay})),$u((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(ze);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var l=u._loadedConfig;n.push(this.processRoutes(l.module,l.routes))}else u.loadChildren&&!u.canLoad?n.push(this.preloadConfig(e,u)):u.children&&n.push(this.processRoutes(e,u.children))}}catch(c){i=!0,s=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return W(n).pipe(J(),U((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(G((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}(),tb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof xy?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ay&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Vy&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Vy(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}(),nb=new Ie("ROUTER_CONFIGURATION"),rb=new Ie("ROUTER_FORROOT_GUARD"),ib=[xa,{provide:hm,useClass:fm},{provide:U_,useFactory:hb,deps:[Ps,hm,Z_,xa,Lt,Rs,ns,N_,nb,[L_,new fe],[R_,new fe]]},Z_,{provide:Rm,useFactory:fb,deps:[U_]},{provide:Rs,useClass:js},eb,X_,Y_,{provide:nb,useValue:{enableTracing:!1}}];function sb(){return new Es("Router",U_)}var ob=function(){function e(t,n){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[ib,cb(t),{provide:rb,useFactory:lb,deps:[[U_,new fe,new pe]]},{provide:nb,useValue:n||{}},{provide:Sa,useFactory:ub,deps:[wa,[new he(Ea),new fe],nb]},{provide:tb,useFactory:ab,deps:[U_,Mu,nb]},{provide:J_,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:X_},{provide:Es,multi:!0,useFactory:sb},[db,{provide:Mi,multi:!0,useFactory:pb,deps:[db]},{provide:gb,useFactory:vb,deps:[db]},{provide:qi,multi:!0,useExisting:gb}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[cb(t)]}}}]),e}();function ab(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new tb(e,t,n)}function ub(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).useHash?new Ta(e,t):new Fa(e,t)}function lb(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function cb(e){return[{provide:qt,multi:!0,useValue:e},{provide:N_,multi:!0,useValue:e}]}function hb(e,t,n,r,i,s,o,a){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},l=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,h=new U_(null,t,n,r,i,s,o,tm(a));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=mg();h.events.subscribe((function(e){f.logGroup("Router Event: ".concat(e.constructor.name)),f.log(e.toString()),f.log(e),f.logGroupEnd()}))}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function fb(e){return e.routerState.root}var db=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new P}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(Ca,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get(U_),i=e.injector.get(nb);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?Qu(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(nb),n=this.injector.get(eb),r=this.injector.get(tb),i=this.injector.get(U_),s=this.injector.get(Ps);e===s.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}();function pb(e){return e.appInitializer.bind(e)}function vb(e){return e.bootstrapListener.bind(e)}var gb=new Ie("Router Initializer"),yb=nr({encapsulation:2,styles:[],data:{}});function mb(e){return go(0,[(e()(),$s(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),fi(1,212992,null,0,Q_,[Z_,Ln,un,[8,null],Rt],null,null)],(function(e,t){e(t,1,0)}),null)}var _b=Ur("ng-component",Uy,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"ng-component",[],null,null,null,mb,yb)),fi(1,49152,null,0,Uy,[],null,null)],null,null)}),{},{},[]),bb=function(){function e(t,n,r){_classCallCheck(this,e),this.activatedRoute=t,this.http=n,this.oauthService=r,this.iconDictionary={0:"info",99:"code",3:"error",4:"error",1:"done"}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.parent.params.pipe(U((function(e){return e.id}))).subscribe((function(t){e.deviceId=t,e.http.get("".concat(Vu,"/api/device/").concat(t,"/log"),{params:{history:"25"}}).subscribe((function(t){e.log=t||[],e.log.reverse(),e.log.forEach((function(e){e.occurenceTime=new Date(e.occurenceTime),e.logTime=new Date(e.logTime)}))})),e.connection&&e.connection.stop(),e.connection=(new Ov).withUrl("".concat(Vu,"/hubs/log"),{accessTokenFactory:function(){return e.oauthService.getAccessToken()}}).build(),e.connection.on("log",(function(t){e.log.unshift(t)})),e.connection.start()}))}},{key:"ngOnDestroy",value:function(){this.connection&&this.connection.stop()}},{key:"testLogEntry",value:function(){this.http.post("".concat(Vu,"/api/device/").concat(this.deviceId,"/log"),{occurenceTime:new Date,code:99,message:"test"}).subscribe()}},{key:"getIcon",value:function(e){return this.iconDictionary[e]}}]),e}(),kb=nr({encapsulation:0,styles:[[".log-level-0-color[_ngcontent-%COMP%]{background-color:#cce5ff}.log-level-1-color[_ngcontent-%COMP%]{background-color:#d4edda}.log-level-3-color[_ngcontent-%COMP%], .log-level-4-color[_ngcontent-%COMP%]{background-color:#f8d7da}.log-container[_ngcontent-%COMP%]{max-width:60em;padding:0 .5em}.mdc-list-item__text[_ngcontent-%COMP%]{overflow:visible;white-space:normal}.mdc-list-item[_ngcontent-%COMP%]{height:auto}"]],data:{}});function wb(e){return go(0,[(e()(),$s(0,0,null,null,10,"li",[],[[8,"className",0]],null,null,null,null)),(e()(),$s(1,0,null,null,2,"span",[["class","mdc-list-item__graphic"],["role","presentation"]],null,null,null,null,null)),(e()(),$s(2,0,null,null,1,"i",[["aria-hidden","true"],["class","material-icons"]],null,null,null,null,null)),(e()(),fo(3,null,["",""])),(e()(),$s(4,0,null,null,3,"span",[["class","mdc-list-item__text"]],null,null,null,null,null)),(e()(),fo(5,null,[" "," "])),(e()(),$s(6,0,null,null,1,"span",[["class","mdc-list-item__secondary-text"]],null,null,null,null,null)),(e()(),fo(7,null,["Code ",""])),(e()(),$s(8,0,null,null,2,"span",[["aria-label","View more information"],["class","mdc-list-item__meta "],["title","More info"]],null,null,null,null,null)),(e()(),fo(9,null,[" "," "])),uo(10,2)],null,(function(e,t){var n=t.component;e(t,0,0,Fr(1,"mdc-list-item log-level-",t.context.$implicit.code,"-color")),e(t,3,0,n.getIcon(t.context.$implicit.code)),e(t,5,0,t.context.$implicit.message),e(t,7,0,t.context.$implicit.code);var r=Xn(t,9,0,e(t,10,0,Xr(t.parent,0),t.context.$implicit.occurenceTime,"mediumTime"));e(t,9,0,r)}))}function Cb(e){return go(0,[di(0,Fu,[Gi]),(e()(),$s(1,0,null,null,5,"div",[["class","log-container"]],null,null,null,null,null)),(e()(),$s(2,0,null,null,2,"ul",[["class","mdc-list mdc-list--two-line mdc-list--avatar-list"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,wb)),fi(4,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null),(e()(),$s(5,0,null,null,1,"button",[["class","mdc-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.testLogEntry()&&r),r}),null,null)),(e()(),fo(-1,null,["Testeintrag erstellen"]))],(function(e,t){e(t,4,0,t.component.log)}),null)}var Sb=Ur("app-log",bb,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-log",[],null,null,null,Cb,kb)),fi(1,245760,null,0,bb,[Rm,gl,Uc],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),Eb=new Ie("NgValueAccessor"),xb=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}(),Ab=function(){function e(t,n,r){var i;_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=r,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=mg()?mg().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}(),Tb=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),e}(),Fb=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),t}(Tb);function Ib(){throw new Error("unimplemented")}var Pb=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments)))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _inherits(t,e),_createClass(t,[{key:"validator",get:function(){return Ib()}},{key:"asyncValidator",get:function(){return Ib()}}]),t}(Tb),Ob=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),t}(function(){function e(t){_classCallCheck(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}());function Rb(e){return null==e||0===e.length}var Db=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Nb=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(Rb(t.value)||Rb(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(Rb(t.value)||Rb(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return Rb(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return Rb(e.value)?null:Db.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(Rb(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}},{key:"maxLength",value:function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Rb(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(jb);return 0==t.length?null:function(e){return Mb(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(jb);return 0==t.length?null:function(e){return dh(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(Lb)).pipe(U(Mb))}}}]),e}();function jb(e){return null!=e}function Lb(e){var t=Xt(e)?W(e):e;if(!en(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Mb(e){var t=e.reduce((function(e,t){return null!=t?Object.assign({},e,t):e}),{});return 0===Object.keys(t).length?null:t}function Hb(e){return e.validate?function(t){return e.validate(t)}:e}function Bb(e){return e.validate?function(t){return e.validate(t)}:e}var Vb=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}(),Ub='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Kb='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',zb='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',qb='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ';function Wb(e,t){return[].concat(_toConsumableArray(t.path),[e])}function Gb(e,t){e||Qb(t,"Cannot find control with"),t.valueAccessor||Qb(t,"No value accessor for form control with"),e.validator=Nb.compose([e.validator,t.validator]),e.asyncValidator=Nb.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Zb(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Zb(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function Zb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Qb(e,t){var n;throw n=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(n))}function $b(e){return null!=e?Nb.compose(e.map(Hb)):null}function Jb(e){return null!=e?Nb.composeAsync(e.map(Bb)):null}var Yb=[xb,function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}(),function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}(),function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Zt}return _createClass(e,[{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}(),function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Zt}return _createClass(e,[{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,s=0;s<i.length;s++){var o=i.item(s),a=t._getOptionValue(o.value);r.push(a)}else for(var u=n.options,l=0;l<u.length;l++){var c=u.item(l);if(c.selected){var h=t._getOptionValue(c.value);r.push(h)}}t.value=r,e(r)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}(),function(){function e(t,n,r,i){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Pb),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()];function Xb(e){var t=tk(e)?e.validators:e;return Array.isArray(t)?$b(t):t||null}function ek(e,t){var n=tk(t)?t.asyncValidators:e;return Array.isArray(n)?Jb(n):n||null}function tk(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var nk=function(){function e(t,n){_classCallCheck(this,e),this.validator=t,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"setValidators",value:function(e){this.validator=Xb(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=ek(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign({},e,{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign({},e,{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=Lb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce((function(e,t){return e instanceof ik?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof sk&&e.at(t)||null}),e))}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new Ni,this.statusChanges=new Ni}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){tk(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}}]),e}(),rk=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,Xb(r),ek(i,r))))._onChange=[],e._applyFormState(n),e._setUpdateStrategy(r),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _inherits(t,e),_createClass(t,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),t}(nk),ik=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,Xb(n),ek(r,n)))).controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(t,e),_createClass(t,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof rk?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,n=!1;return this._forEachChild((function(r,i){n=n||t.contains(i)&&e(r)})),n}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),t}(nk),sk=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,Xb(n),ek(r,n)))).controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(t,e),_createClass(t,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof rk?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.controls[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){if(r.value.enabled)return!1}}catch(s){t=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),t}(nk),ok=Promise.resolve(null),ak=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).submitted=!1,r._directives=[],r.ngSubmit=new Ni,r.form=new ik({},$b(e),Jb(n)),r}return _inherits(t,e),_createClass(t,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(e){var t=this;ok.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Gb(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;ok.then((function(){var n,r,i,s=t._findContainer(e.path);s&&s.removeControl(e.name),n=t._directives,r=e,(i=n.indexOf(r))>-1&&n.splice(i,1)}))}},{key:"addFormGroup",value:function(e){var t=this;ok.then((function(){var n=t._findContainer(e.path),r=new ik({});(function(e,t){null==e&&Qb(t,"Cannot find control with"),e.validator=Nb.compose([e.validator,t.validator]),e.asyncValidator=Nb.composeAsync([e.asyncValidator,t.asyncValidator])})(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;ok.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;ok.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})),this.ngSubmit.emit(e),!1;var t}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),t}(Fb),uk=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(Ub,"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ").concat(qb))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(Kb,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(zb))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(Kb,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(zb))}},{key:"ngFormWarning",value:function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}]),e}(),lk=new Ie("NgFormSelectorWarning"),ck=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return Wb(this.name,this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return $b(this._validators)}},{key:"asyncValidator",get:function(){return Jb(this._asyncValidators)}}]),t}(Fb),hk=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parent=e,i._validators=n,i._asyncValidators=r,i}return _inherits(t,e),_createClass(t,[{key:"_checkParentType",value:function(){this._parent instanceof t||this._parent instanceof ak||uk.modelGroupParentException()}}]),t}(ck),fk=Promise.resolve(null),dk=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).control=new rk,s._registered=!1,s.update=new Ni,s._parent=e,s._rawValidators=n||[],s._rawAsyncValidators=r||[],s.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||Qb(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return t.forEach((function(t){var s;t.constructor===Ab?n=t:(s=t,Yb.some((function(e){return s.constructor===e}))?(r&&Qb(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Qb(e,"More than one custom value accessor matches form control with"),i=t))})),i||r||n||(Qb(e,"No valid value accessor for form control with"),null)}(_assertThisInitialized(s),i),s}return _inherits(t,e),_createClass(t,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Zt(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){Gb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof hk)&&this._parent instanceof ck?uk.formGroupNameException():this._parent instanceof hk||this._parent instanceof ak||uk.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||uk.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;fk.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;fk.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))}},{key:"path",get:function(){return this._parent?Wb(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return $b(this._rawValidators)}},{key:"asyncValidator",get:function(){return Jb(this._rawAsyncValidators)}}]),t}(Pb),pk=function e(){_classCallCheck(this,e)},vk=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:lk,useValue:t.warnOnDeprecatedNgFormSelector}]}}}]),e}(),gk=function(){function e(t){_classCallCheck(this,e),this.calendarService=t}return _createClass(e,[{key:"reload",value:function(){var e=this;this.configuration=null,this.loading=!0,this.calendarService.getConfigurations().subscribe((function(t){e.configuration=t,e.loading=!1}))}},{key:"ngOnInit",value:function(){this.reload()}},{key:"subscribedFeeds",value:function(e){return e.filter((function(e){return e.subscribed})).map((function(e){return e.name})).join(", ")}},{key:"changeFeed",value:function(e,t,n){var r=this.configuration.find((function(t){return t.id==e}));r.changed=!0,r.feeds.find((function(e){return e.id==t})).subscribed=n}},{key:"configChanged",value:function(){return this.configuration.some((function(e){return e.changed}))}},{key:"saveConfig",value:function(){var e=this;this.configuration.filter((function(e){return e.changed})).forEach((function(t){e.calendarService.setFeeds(t.id,t.feeds.filter((function(e){return e.subscribed}))).subscribe((function(){t.changed=!1}))}))}},{key:"link",value:function(e){this.calendarService.linkCalendar(e).subscribe((function(e){location.replace(e.redirectUri)}))}},{key:"removeLink",value:function(e){var t=this;this.calendarService.removeLink(e).subscribe((function(n){var r=t.configuration.find((function(t){return t.id==e}));t.configuration.splice(t.configuration.indexOf(r),1)}))}}]),e}(),yk=nr({encapsulation:0,styles:[[".calendar-container[_ngcontent-%COMP%]{max-width:60em;padding:0 .5em}.calendar-container__actions[_ngcontent-%COMP%]{margin-top:4em}"]],data:{}});function mk(e){return go(0,[(e()(),$s(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["laden..."]))],null,null)}function _k(e){return go(0,[(e()(),$s(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" keine Kalender konfiguriert "]))],null,null)}function bk(e){return go(0,[(e()(),$s(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,[" - ge\xe4ndert"]))],null,null)}function kk(e){return go(0,[(e()(),$s(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,t,n){var r=!0,i=e.component;return"change"===t&&(r=!1!==Xr(e,2).onChange(n.target.checked)&&r),"blur"===t&&(r=!1!==Xr(e,2).onTouched()&&r),"ngModelChange"===t&&(r=!1!==i.changeFeed(e.parent.context.$implicit.id,e.context.$implicit.id,n)&&r),r}),null,null)),fi(2,16384,null,0,xb,[gn,fn],null,null),pi(1024,null,Eb,(function(e){return[e]}),[xb]),fi(4,671744,null,0,dk,[[8,null],[8,null],[8,null],[6,Eb]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),pi(2048,null,Pb,null,[dk]),fi(6,16384,null,0,Ob,[[4,Pb]],null,null),(e()(),$s(7,0,null,null,1,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),fo(8,null,["",""]))],(function(e,t){e(t,4,0,Fr(2,"",t.parent.context.$implicit.id,"_",t.context.$implicit.id,""),t.context.$implicit.subscribed)}),(function(e,t){e(t,1,0,Xr(t,6).ngClassUntouched,Xr(t,6).ngClassTouched,Xr(t,6).ngClassPristine,Xr(t,6).ngClassDirty,Xr(t,6).ngClassValid,Xr(t,6).ngClassInvalid,Xr(t,6).ngClassPending),e(t,7,0,Fr(2,"",t.parent.context.$implicit.id,"_",t.context.$implicit.id,"")),e(t,8,0,t.context.$implicit.name)}))}function wk(e){return go(0,[(e()(),$s(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,3,"h2",[["class","mdc-typography--headline4"]],null,null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),Qs(16777216,null,null,1,null,bk)),fi(4,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),$s(5,0,null,null,1,"h3",[["class","mdc-typography--headline5"]],null,null,null,null,null)),(e()(),fo(-1,null,["Feeds"])),(e()(),Qs(16777216,null,null,1,null,kk)),fi(8,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null),(e()(),$s(9,0,null,null,1,"button",[["class","mdc-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.removeLink(e.context.$implicit.id)&&r),r}),null,null)),(e()(),fo(-1,null,["Kalender trennen"]))],(function(e,t){e(t,4,0,t.context.$implicit.changed),e(t,8,0,t.context.$implicit.feeds)}),(function(e,t){e(t,2,0,t.context.$implicit.identifier)}))}function Ck(e){return go(0,[(e()(),$s(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,_k)),fi(2,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,wk)),fi(4,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null),(e()(),$s(5,0,null,null,6,"div",[["class","calendar-container__actions"]],null,null,null,null,null)),(e()(),$s(6,0,null,null,1,"button",[["class","mdc-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.link("microsoft")&&r),r}),null,null)),(e()(),fo(-1,null,["Microsoft Kalender verbinden"])),(e()(),$s(8,0,null,null,1,"button",[["class","mdc-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.link("google")&&r),r}),null,null)),(e()(),fo(-1,null,["Google Kalender verbinden"])),(e()(),$s(10,0,null,null,1,"button",[["class","mdc-button mdc-button--raised"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.saveConfig()&&r),r}),null,null)),(e()(),fo(-1,null,["Konfiguration speichern"]))],(function(e,t){var n=t.component;e(t,2,0,0==n.configuration.length),e(t,4,0,n.configuration)}),(function(e,t){e(t,10,0,!t.component.configChanged())}))}function Sk(e){return go(0,[(e()(),$s(0,0,null,null,4,"div",[["class","calendar-container"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,mk)),fi(2,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Ck)),fi(4,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.loading),e(t,4,0,!n.loading)}),null)}var Ek=Ur("app-configure",gk,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-configure",[],null,null,null,Sk,yk)),fi(1,114688,null,0,gk,[If],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),xk=function(){function e(t){_classCallCheck(this,e),this.calendarService=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.calendarService.getEvents().subscribe((function(t){e.events=t}))}}]),e}(),Ak=nr({encapsulation:0,styles:[[".calendar-container[_ngcontent-%COMP%]{max-width:60em;padding:0 .5em}"]],data:{}});function Tk(e){return go(0,[(e()(),$s(0,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,1,"span",[["class","mdc-list-item__text"]],null,null,null,null,null)),(e()(),fo(-1,null,[" keine Eintr\xe4ge gefunden "]))],null,null)}function Fk(e){return go(0,[(e()(),$s(0,0,null,null,6,"li",[["class","mdc-list-item"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,5,"span",[["class","mdc-list-item__text"]],null,null,null,null,null)),(e()(),fo(2,null,[" "," @ "," "])),(e()(),$s(3,0,null,null,3,"span",[["class","mdc-list-item__secondary-text"]],null,null,null,null,null)),(e()(),fo(4,null,[""," - ",""])),uo(5,1),uo(6,1)],null,(function(e,t){e(t,2,0,t.context.$implicit.subject,t.context.$implicit.location.text);var n=Xn(t,4,0,e(t,5,0,Xr(t.parent,0),t.context.$implicit.start)),r=Xn(t,4,1,e(t,6,0,Xr(t.parent,0),t.context.$implicit.end));e(t,4,0,n,r)}))}function Ik(e){return go(0,[di(0,Fu,[Gi]),(e()(),$s(1,0,null,null,7,"div",[["class","calendar-container"]],null,null,null,null,null)),(e()(),$s(2,0,null,null,1,"h2",[["class","mdc-typography--headline4"]],null,null,null,null,null)),(e()(),fo(-1,null,["n\xe4chste Ereignisse"])),(e()(),$s(4,0,null,null,4,"ul",[["class","mdc-list mdc-list--two-line mdc-list--avatar-list"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Tk)),fi(6,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Fk)),fi(8,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,6,0,n.events&&0===n.events.length),e(t,8,0,n.events)}),null)}var Pk=Ur("app-view",xk,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-view",[],null,null,null,Ik,Ak)),fi(1,114688,null,0,xk,[If],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),Ok=function(){function e(t,n,r,i){_classCallCheck(this,e),this.oauthService=t,this.calendarService=n,this.httpClient=r,this.router=i,this.accessToken=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.calendarService.getConfigurations().subscribe((function(t){e.subscribedFeeds=null==t?0:t.map((function(e){return e.feeds.filter((function(e){return e.subscribed})).length})).reduce((function(e,t){return e+t}))})),this.httpClient.get("".concat(Vu,"/api/device")).pipe(U((function(e){return e}))).subscribe((function(t){t.forEach((function(e){e.battery&&(e.battery.lastMeasurementTime=e.battery.lastMeasurementTime?new Date(e.battery.lastMeasurementTime):null,e.battery.lastChargedTime=e.battery.lastChargedTime?new Date(e.battery.lastChargedTime):null)})),e.devices=t}))}},{key:"showAccessToken",value:function(){this.accessToken=this.oauthService.getAccessToken()}},{key:"timeSinceCharge",value:function(e){return e.lastChargedTime?((new Date).getTime()-e.lastChargedTime.getTime())/1e3/60/60:null}},{key:"logout",value:function(){this.oauthService.logOut(!0),this.router.navigate(["/home"])}},{key:"measureBattery",value:function(){this.httpClient.post("".concat(Vu,"/api/device/12345/battery/measure"),null).subscribe()}},{key:"calendarIncomplete",get:function(){return!1}},{key:"appIncomplete",get:function(){return!1}},{key:"isLoggedIn",get:function(){return this.oauthService.hasValidAccessToken()}},{key:"userId",get:function(){var e=this.oauthService.getIdentityClaims();return e?e.sub:null}},{key:"scopes",get:function(){return this.oauthService.scope}},{key:"expiration",get:function(){return new Date(this.oauthService.getAccessTokenExpiration())}}]),e}(),Rk=nr({encapsulation:0,styles:[[".overview-container[_ngcontent-%COMP%]{max-width:60em;padding:0 .5em}.overview-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-of-type{font-weight:500}.overview-table__token-cell[_ngcontent-%COMP%]{word-wrap:break-word;max-width:20em}.overview-section__heading--incomplete[_ngcontent-%COMP%]{color:red}.overview-section__actions[_ngcontent-%COMP%]{margin-top:1em}"]],data:{}});function Dk(e){return go(0,[(e()(),$s(0,0,null,null,1,"span",[["class","mdc-typography--caption"]],null,null,null,null,null)),(e()(),fo(-1,null,["(unvollst\xe4ndig)"]))],null,null)}function Nk(e){return go(0,[(e()(),$s(0,0,null,null,1,"span",[["class","mdc-typography--caption"]],null,null,null,null,null)),(e()(),fo(-1,null,["(unvollst\xe4ndig)"]))],null,null)}function jk(e){return go(0,[(e()(),fo(-1,null,["wurden keine Kalender"]))],null,null)}function Lk(e){return go(0,[(e()(),fo(-1,null,["wurde ein Kalender"]))],null,null)}function Mk(e){return go(0,[(e()(),fo(0,null,["wurden "," Kalender"]))],null,(function(e,t){e(t,0,0,t.component.subscribedFeeds)}))}function Hk(e){return go(0,[(e()(),$s(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Es "])),(e()(),$s(2,0,null,null,7,"span",[],null,null,null,null,null)),fi(3,16384,null,0,wu,[lu],{ngPlural:[0,"ngPlural"]},null),(e()(),Qs(16777216,null,null,1,null,jk)),fi(5,16384,null,0,Cu,[[8,"=0"],Nn,Ln,wu],null,null),(e()(),Qs(16777216,null,null,1,null,Lk)),fi(7,16384,null,0,Cu,[[8,"=1"],Nn,Ln,wu],null,null),(e()(),Qs(16777216,null,null,1,null,Mk)),fi(9,16384,null,0,Cu,[[8,"other"],Nn,Ln,wu],null,null),(e()(),fo(-1,null,[" konfiguriert. "]))],(function(e,t){e(t,3,0,t.component.subscribedFeeds)}),null)}function Bk(e){return go(0,[(e()(),$s(0,0,null,null,31,"div",[["class","overview-container"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,13,"section",[],null,null,null,null,null)),(e()(),$s(2,0,null,null,6,"h2",[["class","overview-section__heading mdc-typography--headline3"]],null,null,null,null,null)),pi(512,null,fu,du,[In,Pn,fn,gn]),fi(4,278528,null,0,pu,[fu],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),co(5,{"overview-section__heading--incomplete":0}),(e()(),fo(-1,null,[" App "])),(e()(),Qs(16777216,null,null,1,null,Dk)),fi(8,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),$s(9,0,null,null,5,"table",[["class","overview-table"]],null,null,null,null,null)),(e()(),$s(10,0,null,null,4,"tbody",[],null,null,null,null,null)),(e()(),$s(11,0,null,null,3,"tr",[],null,null,null,null,null)),(e()(),$s(12,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),fo(-1,null,["Verbindung eingerichtet"])),(e()(),$s(14,0,null,null,0,"td",[],null,null,null,null,null)),(e()(),$s(15,0,null,null,16,"section",[],null,null,null,null,null)),(e()(),$s(16,0,null,null,6,"h2",[["class","overview-section__heading mdc-typography--headline3"]],null,null,null,null,null)),pi(512,null,fu,du,[In,Pn,fn,gn]),fi(18,278528,null,0,pu,[fu],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),co(19,{"overview-section__heading--incomplete":0}),(e()(),fo(-1,null,[" Kalender "])),(e()(),Qs(16777216,null,null,1,null,Nk)),fi(22,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Hk)),fi(24,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),$s(25,0,null,null,6,"div",[["class","overview-section__actions"]],null,null,null,null,null)),(e()(),$s(26,0,null,null,5,"a",[["class","mdc-button mdc-button--raised"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,27).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),fi(27,671744,null,0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),lo(28,1),(e()(),$s(29,0,null,null,1,"i",[["class","material-icons mdc-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["event"])),(e()(),fo(-1,null,[" Kalender konfigurieren "]))],(function(e,t){var n=t.component,r=e(t,5,0,n.appIncomplete);e(t,4,0,"overview-section__heading mdc-typography--headline3",r),e(t,8,0,n.appIncomplete);var i=e(t,19,0,n.calendarIncomplete);e(t,18,0,"overview-section__heading mdc-typography--headline3",i),e(t,22,0,n.calendarIncomplete),e(t,24,0,null!=n.subscribedFeeds);var s=e(t,28,0,"/calendar/configure");e(t,27,0,s)}),(function(e,t){e(t,26,0,Xr(t,27).target,Xr(t,27).href)}))}var Vk=Ur("app-me",Ok,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-me",[],null,null,null,Bk,Rk)),fi(1,114688,null,0,Ok,[Uc,If,gl,U_],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),Uk=function(){function e(t){_classCallCheck(this,e),this.oauthService=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showAccessToken",value:function(){this.accessToken=this.oauthService.getAccessToken()}},{key:"scopes",get:function(){return this.oauthService.scope}},{key:"expiration",get:function(){return new Date(this.oauthService.getAccessTokenExpiration())}},{key:"userId",get:function(){var e=this.oauthService.getIdentityClaims();return e?e.sub:null}}]),e}(),Kk=nr({encapsulation:0,styles:[[""]],data:{}});function zk(e){return go(0,[(e()(),$s(0,0,null,null,1,"button",[["class","mdc-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.showAccessToken()&&r),r}),null,null)),(e()(),fo(-1,null,[" Accesstoken zeigen "]))],null,null)}function qk(e){return go(0,[(e()(),$s(0,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),fo(-1,null,["Scopes"])),(e()(),$s(3,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),fo(4,null,["",""]))],null,(function(e,t){e(t,4,0,t.component.scopes)}))}function Wk(e){return go(0,[(e()(),$s(0,0,null,null,5,"tr",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),fo(-1,null,["Expiration"])),(e()(),$s(3,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),fo(4,null,["",""])),uo(5,2)],null,(function(e,t){var n=t.component,r=Xn(t,4,0,e(t,5,0,Xr(t.parent,0),n.expiration,"mediumTime"));e(t,4,0,r)}))}function Gk(e){return go(0,[di(0,Fu,[Gi]),(e()(),$s(1,0,null,null,18,"section",[],null,null,null,null,null)),(e()(),$s(2,0,null,null,17,"table",[["class","overview-table"]],null,null,null,null,null)),(e()(),$s(3,0,null,null,16,"tbody",[],null,null,null,null,null)),(e()(),$s(4,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),$s(5,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),fo(-1,null,["User ID"])),(e()(),$s(7,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),fo(8,null,["",""])),(e()(),$s(9,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),$s(10,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),fo(-1,null,["Accesstoken"])),(e()(),$s(12,0,null,null,3,"td",[["class","overview-table__token-cell"]],null,null,null,null,null)),(e()(),fo(13,null,[" "," "])),(e()(),Qs(16777216,null,null,1,null,zk)),fi(15,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,qk)),fi(17,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Wk)),fi(19,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,15,0,!n.accessToken),e(t,17,0,n.accessToken),e(t,19,0,n.accessToken)}),(function(e,t){var n=t.component;e(t,8,0,n.userId),e(t,13,0,n.accessToken)}))}var Zk=Ur("app-account-debugger",Uk,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-account-debugger",[],null,null,null,Gk,Kk)),fi(1,114688,null,0,Uk,[Uc],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),Qk=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"getConfigurations",value:function(){return this.httpClient.get("".concat(Wu,"/api/me/pushchannels"))}},{key:"deleteChannel",value:function(e){return this.httpClient.delete("".concat(Wu,"/api/me/pushchannels/").concat(e))}},{key:"registerChannel",value:function(e){return this.httpClient.post("".concat(Wu,"api/me/pushchannels"),e,{headers:(new nl).set("Content-Type","application/vnd+pushserver.webpush+json")})}}]),e}(),$k="pushconfigid",Jk=function(){function e(t,n){_classCallCheck(this,e),this.swPush=t,this.pushService=n,this.localPushConfigId=localStorage.getItem($k)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.swPush.subscription.subscribe((function(n){null==n&&null!=e.localPushConfigId&&e.unsubscribe(e.localPushConfigId),t.unsubscribe()}));this.pushService.getConfigurations().subscribe((function(t){return e.pushChannels=t}))}},{key:"isSubscribed",value:function(){return!!this.localPushConfigId}},{key:"deleteSubscription",value:function(e){var t=this;this.pushService.deleteChannel(e).subscribe((function(){t.localPushConfigId==e&&(t.localPushConfigId=null,localStorage.removeItem($k)),t.pushChannels=t.pushChannels.filter((function(t){return t.id!=e}))}))}},{key:"unsubscribe",value:function(e){var t=this;this.localPushConfigId==e?this.swPush.unsubscribe().catch((function(n){console.info("Not subscribed locally; Syncing state with server anyways. Error: ".concat(n,".")),t.deleteSubscription(e)})).then((function(){return t.deleteSubscription(e)})):this.deleteSubscription(e)}},{key:"subscribe",value:function(){var e=this;this.swPush.requestSubscription({serverPublicKey:qu}).then((function(t){var n=Object.assign({},t.toJSON(),{browserInfo:navigator.userAgent,options:{"digit.notify":null}});e.pushService.registerChannel(n).subscribe((function(t){e.localPushConfigId=t.id,localStorage.setItem($k,t.id),e.pushChannels.push(t)}))})).catch((function(e){return console.error("Could not subscribe to notifications",e)}))}}]),e}();function Yk(e,t,n,r){return o(n)&&(r=n,n=void 0),r?Yk(e,t,n).pipe(U((function(e){return h(e)?r.apply(void 0,_toConsumableArray(e)):r(e)}))):new E((function(r){!function e(t,n,r,i,s){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var a=t;t.addEventListener(n,r,s),o=function(){return a.removeEventListener(n,r,s)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),o=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),o=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,h=t.length;c<h;c++)e(t[c],n,r,i,s)}i.add(o)}(e,t,(function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),r,n)}))}var Xk=new E(k),ew="Service workers are disabled or not supported by this browser",tw=function(){function e(t){if(_classCallCheck(this,e),this.serviceWorker=t,t){var n=Yk(t,"controllerchange").pipe(U((function(){return t.controller}))),r=cg(ng((function(){return Qu(t.controller)})),n);this.worker=r.pipe(Ju((function(e){return!!e}))),this.registration=this.worker.pipe(sc((function(){return t.getRegistration()})));var i=Yk(t,"message").pipe(U((function(e){return e.data}))).pipe(Ju((function(e){return e&&e.type}))).pipe(oe(new P));i.connect(),this.events=i}else this.worker=this.events=this.registration=(s=ew,ng((function(){return Vl(new Error(s))})));var s}return _createClass(e,[{key:"postMessage",value:function(e,t){return this.worker.pipe(cc(1),Kl((function(n){n.postMessage(Object.assign({action:e},t))}))).toPromise().then((function(){}))}},{key:"postMessageWithStatus",value:function(e,t,n){var r=this.waitForStatus(n),i=this.postMessage(e,t);return Promise.all([r,i]).then((function(){}))}},{key:"generateNonce",value:function(){return Math.round(1e7*Math.random())}},{key:"eventsOfType",value:function(e){return this.events.pipe(Ju((function(t){return t.type===e})))}},{key:"nextEventOfType",value:function(e){return this.eventsOfType(e).pipe(cc(1))}},{key:"waitForStatus",value:function(e){return this.eventsOfType("STATUS").pipe(Ju((function(t){return t.nonce===e})),cc(1),U((function(e){if(!e.status)throw new Error(e.error)}))).toPromise()}},{key:"isEnabled",get:function(){return!!this.serviceWorker}}]),e}(),nw=function(){function e(t){if(_classCallCheck(this,e),this.sw=t,this.subscriptionChanges=new P,!t.isEnabled)return this.messages=Xk,this.notificationClicks=Xk,void(this.subscription=Xk);this.messages=this.sw.eventsOfType("PUSH").pipe(U((function(e){return e.data}))),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(U((function(e){return e.data}))),this.pushManager=this.sw.registration.pipe(U((function(e){return e.pushManager})));var n=this.pushManager.pipe(sc((function(e){return e.getSubscription()})));this.subscription=X(n,this.subscriptionChanges)}return _createClass(e,[{key:"requestSubscription",value:function(e){var t=this;if(!this.sw.isEnabled)return Promise.reject(new Error(ew));for(var n={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length)),s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return n.applicationServerKey=i,this.pushManager.pipe(sc((function(e){return e.subscribe(n)})),cc(1)).toPromise().then((function(e){return t.subscriptionChanges.next(e),e}))}},{key:"unsubscribe",value:function(){var e=this;return this.sw.isEnabled?this.subscription.pipe(cc(1),sc((function(t){if(null===t)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then((function(t){if(!t)throw new Error("Unsubscribe failed!");e.subscriptionChanges.next(null)}))}))).toPromise():Promise.reject(new Error(ew))}},{key:"decodeBase64",value:function(e){return atob(e)}},{key:"isEnabled",get:function(){return this.sw.isEnabled}}]),e}(),rw=function(){function e(t){if(_classCallCheck(this,e),this.sw=t,!t.isEnabled)return this.available=Xk,void(this.activated=Xk);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED")}return _createClass(e,[{key:"checkForUpdate",value:function(){if(!this.sw.isEnabled)return Promise.reject(new Error(ew));var e=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:e},e)}},{key:"activateUpdate",value:function(){if(!this.sw.isEnabled)return Promise.reject(new Error(ew));var e=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:e},e)}},{key:"isEnabled",get:function(){return this.sw.isEnabled}}]),e}(),iw=function e(){_classCallCheck(this,e)},sw=new Ie("NGSW_REGISTER_SCRIPT");function ow(e,t,n,r){return function(){if(Nu(r)&&"serviceWorker"in navigator&&!1!==n.enabled){var i;if(navigator.serviceWorker.addEventListener("controllerchange",(function(){null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})})),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{var s=_toArray((n.registrationStrategy||"registerWhenStable").split(":")),o=s[0],a=s.slice(1);switch(o){case"registerImmediately":i=Qu(null);break;case"registerWithDelay":i=Qu(null).pipe(tc(+a[0]||0));break;case"registerWhenStable":i=e.get(Ps).isStable.pipe(Ju((function(e){return e})));break;default:throw new Error("Unknown ServiceWorker registration strategy: ".concat(n.registrationStrategy))}}i.pipe(cc(1)).subscribe((function(){return navigator.serviceWorker.register(t,{scope:n.scope}).catch((function(e){return console.error("Service worker registration failed with:",e)}))}))}}}function aw(e,t){return new tw(Nu(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}var uw=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"register",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{ngModule:e,providers:[{provide:sw,useValue:t},{provide:iw,useValue:n},{provide:tw,useFactory:aw,deps:[iw,zi]},{provide:Mi,useFactory:ow,deps:[Lt,sw,iw,zi],multi:!0}]}}}]),e}(),lw=nr({encapsulation:0,styles:[[".notifications-container[_ngcontent-%COMP%]{max-width:60em;padding:0 .5em}"]],data:{}});function cw(e){return go(0,[(e()(),$s(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),fo(-1,null,["Dieses"]))],null,null)}function hw(e){return go(0,[(e()(),$s(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,cw)),fi(2,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),fo(3,null,[" Ger\xe4t: "," "])),(e()(),$s(4,0,null,null,1,"button",[["class","mdc-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.unsubscribe(e.context.$implicit.id)&&r),r}),null,null)),(e()(),fo(-1,null,["l\xf6schen"]))],(function(e,t){e(t,2,0,t.context.$implicit.id==t.component.localPushConfigId)}),(function(e,t){e(t,3,0,t.context.$implicit.endpointInfo)}))}function fw(e){return go(0,[(e()(),$s(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,hw)),fi(2,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.pushChannels)}),null)}function dw(e){return go(0,[(e()(),$s(0,0,null,null,1,"button",[["class","mdc-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.subscribe()&&r),r}),null,null)),(e()(),fo(-1,null,["Notifications f\xfcr diesen Broswer aktivieren"]))],null,null)}function pw(e){return go(0,[(e()(),$s(0,0,null,null,4,"div",[["class","notifications-container"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,fw)),fi(2,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,dw)),fi(4,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.pushChannels),e(t,4,0,!n.isSubscribed())}),null)}var vw=Ur("app-notifications",Jk,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-notifications",[],null,null,null,pw,lw)),fi(1,114688,null,0,Jk,[nw,Qk],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),gw=function(){function e(t){_classCallCheck(this,e),this.oauthService=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"login",value:function(){this.oauthService.initImplicitFlow("/some-state;p1=1;p2=2")}},{key:"isLoggedIn",get:function(){return this.oauthService.hasValidAccessToken()}}]),e}(),yw=nr({encapsulation:0,styles:[[".home-container[_ngcontent-%COMP%]{max-width:60em}"]],data:{}});function mw(e){return go(0,[(e()(),$s(0,0,null,null,1,"button",[["class","mdc-button mdc-button--raised"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.login()&&r),r}),null,null)),(e()(),fo(-1,null,[" Anmelden "]))],null,null)}function _w(e){return go(0,[(e()(),$s(0,0,null,null,3,"a",[["class","mdc-button mdc-button--raised"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),fi(1,671744,null,0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),lo(2,1),(e()(),fo(-1,null,["Zur \xdcbersicht"]))],(function(e,t){var n=e(t,2,0,"/focus");e(t,1,0,n)}),(function(e,t){e(t,0,0,Xr(t,1).target,Xr(t,1).href)}))}function bw(e){return go(0,[(e()(),$s(0,0,null,null,11,"div",[["class","mdc-layout-grid home-container"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,1,"h1",[["class","mdc-typography--headline2"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Digit "])),(e()(),$s(3,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Die "])),(e()(),$s(5,0,null,null,1,"i",[],null,null,null,null,null)),(e()(),fo(-1,null,["smarte"])),(e()(),fo(-1,null,[" Watch, die mehr ist als ein zus\xe4tzlicher Bildschirm f\xfcrs Handy. Hier \xfcberwachst du dein Ger\xe4t, konfigurierst Einstellungen und verbundene Dienste oder richtest die Verbindung zur App ein. "])),(e()(),Qs(16777216,null,null,1,null,mw)),fi(9,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,_w)),fi(11,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,9,0,!n.isLoggedIn),e(t,11,0,n.isLoggedIn)}),null)}var kw,ww=Ur("app-login",gw,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-login",[],null,null,null,bw,yw)),fi(1,114688,null,0,gw,[Uc],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),Cw=function(e){return e[e.AddressNotFound=0]="AddressNotFound",e[e.RouteNotFound=1]="RouteNotFound",e}({}),Sw=(kw=function(){function e(t){_classCallCheck(this,e),this.store=t,this.DirectionsNotFoundReason=Cw,this.expanded={}}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.store.dispatch(new Uv)}},{key:"ngOnInit",value:function(){this.store.dispatch(new Hv),this.store.dispatch(new Vv)}},{key:"patchFocus",value:function(){this.store.dispatch(new Kv(!0))}},{key:"showOffset",value:function(e){return e.late&&Math.abs(e.late)>6e4}},{key:"isLate",value:function(e){return e.late&&e.late>6e4}}]),e}(),Nl([Af($v.activeFocusItems),jl("design:type",E)],kw.prototype,"focusItems$",void 0),Nl([Af($v.focusItemsLoading),jl("design:type",E)],kw.prototype,"focusItemsLoading$",void 0),Nl([Af($v.focusItemsLoaded),jl("design:type",E)],kw.prototype,"focusItemsLoaded$",void 0),kw),Ew=nr({encapsulation:0,styles:[['.focus-container[_ngcontent-%COMP%]{padding-top:.5em}.focus-item[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;margin-bottom:1em}.focus-item__heading[_ngcontent-%COMP%]{font-size:1.2em}.focus-item__heading--late[_ngcontent-%COMP%]{color:red}.focus-item__no-directions[_ngcontent-%COMP%]{color:#d3d3d3;font-style:italic}.route[_ngcontent-%COMP%]{margin-left:1em;margin-top:1em}.route-step[_ngcontent-%COMP%]{display:flex}.route-step__line[_ngcontent-%COMP%]{flex-grow:1;width:.3em;background-color:#add8e6;margin:.1em 2em .2em;border-radius:.3em;position:relative}.route-step__time-area[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;display:flex;flex-direction:column;width:12em}.route-step__summary[_ngcontent-%COMP%]{min-height:8em;display:flex;flex-direction:column;justify-content:center}.route-collapsed[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center}.route-collapsed__step[_ngcontent-%COMP%]:not(:last-of-type):after{content:">"}.route-collapsed__line[_ngcontent-%COMP%]{padding:0 .5em;font-weight:700}']],data:{}});function xw(e){return go(0,[(e()(),$s(0,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,11,"div",[["class","focus-item__heading"]],null,null,null,null,null)),(e()(),$s(2,0,null,null,7,"span",[],null,null,null,null,null)),pi(512,null,fu,du,[In,Pn,fn,gn]),fi(4,278528,null,0,pu,[fu],{ngClass:[0,"ngClass"]},null),co(5,{"focus-item__heading--late":0}),(e()(),$s(6,0,null,null,1,"i",[["aria-label","Los um"],["class","material-icons inline-icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["alarm"])),(e()(),fo(8,null,[" "," "])),uo(9,2),(e()(),fo(10,null,[" "," ("," - ",") "])),uo(11,2),uo(12,2),(e()(),$s(13,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(14,null,[" "," "]))],(function(e,t){var n=e(t,5,0,t.component.isLate(t.parent.context.$implicit));e(t,4,0,n)}),(function(e,t){var n=Xn(t,8,0,e(t,9,0,Xr(t.parent.parent,0),t.parent.context.$implicit.indicateTime,"shortTime"));e(t,8,0,n);var r=t.parent.context.$implicit.event?t.parent.context.$implicit.event.subject:"wird geladen",i=Xn(t,10,1,e(t,11,0,Xr(t.parent.parent,0),t.parent.context.$implicit.event.start,"shortTime")),s=Xn(t,10,2,e(t,12,0,Xr(t.parent.parent,0),t.parent.context.$implicit.event.end,"shortTime"));e(t,10,0,r,i,s),e(t,14,0,t.parent.context.$implicit.event.location.text)}))}function Aw(e){return go(0,[(e()(),$s(0,0,null,null,1,"div",[["class","focus-item__no-directions"]],null,null,null,null,null)),(e()(),fo(1,null,[" Zielort "," konnte nicht gefunden werden "]))],null,(function(e,t){e(t,1,0,t.parent.parent.context.$implicit.event?t.parent.parent.context.$implicit.event.location.text:"")}))}function Tw(e){return go(0,[(e()(),$s(0,0,null,null,1,"div",[["class","focus-item__no-directions"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Es konnte keine Route zum Zielort gefunden werden "]))],null,null)}function Fw(e){return go(0,[(e()(),$s(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["(",")"])),uo(2,2)],null,(function(e,t){var n=Xn(t,1,0,e(t,2,0,Xr(t.parent.parent.parent.parent.parent,0),t.parent.context.$implicit.departureTime,"shortTime"));e(t,1,0,n)}))}function Iw(e){return go(0,[(e()(),$s(0,0,null,null,4,"span",[["class","route-collapsed__step"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,3,"span",[["class","route-collapsed__line"]],null,null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Fw)),fi(4,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,4,0,t.context.first)}),(function(e,t){e(t,2,0,t.context.$implicit.line.shortName)}))}function Pw(e){return go(0,[(e()(),$s(0,0,null,null,11,"div",[["class","route-step"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,7,"div",[["class","route-step__time-area"]],null,null,null,null,null)),(e()(),$s(2,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),fo(3,null,[""," ",""])),uo(4,2),(e()(),$s(5,0,null,null,0,"div",[["class","route-step__line"]],null,null,null,null,null)),(e()(),$s(6,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),fo(7,null,[""," ",""])),uo(8,2),(e()(),$s(9,0,null,null,2,"div",[["class","route-step__summary"]],null,null,null,null,null)),(e()(),$s(10,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(11,null,["mit "," Richtung ",""]))],null,(function(e,t){var n=Xn(t,3,0,e(t,4,0,Xr(t.parent.parent.parent.parent.parent,0),t.context.$implicit.departureTime,"shortTime"));e(t,3,0,n,t.context.$implicit.departureStop.name);var r=Xn(t,7,0,e(t,8,0,Xr(t.parent.parent.parent.parent.parent,0),t.context.$implicit.arrivalTime,"shortTime"));e(t,7,0,r,t.context.$implicit.arrivalStop.name),e(t,11,0,t.context.$implicit.line.shortName,t.context.$implicit.headsign)}))}function Ow(e){return go(0,[(e()(),$s(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["("," Minuten ",")"])),uo(2,2)],null,(function(e,t){var n=Xn(t,1,0,e(t,2,0,Xr(t.parent.parent.parent.parent.parent,1),t.parent.parent.parent.parent.context.$implicit.late/1e3/60,"1.0-0"));e(t,1,0,n,t.parent.parent.parent.parent.context.$implicit.late>0?"versp\xe4tet":"vorher")}))}function Rw(e){return go(0,[(e()(),$s(0,0,null,null,7,"div",[["class","route"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Pw)),fi(2,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null),(e()(),$s(3,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),fo(4,null,["Ankunft: "," "])),uo(5,2),(e()(),Qs(16777216,null,null,1,null,Ow)),fi(7,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,t.parent.parent.parent.context.$implicit.directions.routes[t.parent.parent.parent.context.$implicit.directionsMetadata.peferredRoute].steps),e(t,7,0,n.showOffset(t.parent.parent.parent.context.$implicit))}),(function(e,t){var n=Xn(t,4,0,e(t,5,0,Xr(t.parent.parent.parent.parent,0),t.parent.parent.parent.context.$implicit.directions.routes[0].arrivalTime,"shortTime"));e(t,4,0,n)}))}function Dw(e){return go(0,[(e()(),$s(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),$s(1,0,null,null,4,"div",[["class","route-collapsed"]],null,[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=0!=(i.expanded[e.parent.parent.context.$implicit.id]=!i.expanded[e.parent.parent.context.$implicit.id])&&r),r}),null,null)),(e()(),Qs(16777216,null,null,1,null,Iw)),fi(3,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null),(e()(),$s(4,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),fo(-1,null,[" arrow_drop_down "])),(e()(),Qs(16777216,null,null,1,null,Rw)),fi(7,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,t.parent.parent.context.$implicit.directions.routes[t.parent.parent.context.$implicit.directionsMetadata.peferredRoute].steps),e(t,7,0,n.expanded[t.parent.parent.context.$implicit.id])}),null)}function Nw(e){return go(0,[(e()(),$s(0,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Aw)),fi(2,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Tw)),fi(4,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Dw)),fi(6,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,t.parent.context.$implicit.directionsMetadata.error===n.DirectionsNotFoundReason.AddressNotFound),e(t,4,0,t.parent.context.$implicit.directionsMetadata.error===n.DirectionsNotFoundReason.RouteNotFound),e(t,6,0,t.parent.context.$implicit.directions&&t.parent.context.$implicit.directions.routes&&t.parent.context.$implicit.directions.routes.length)}),null)}function jw(e){return go(0,[(e()(),$s(0,0,null,null,5,"div",[["class","focus-item"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,4,"div",[["ng-if","item.isEvent"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,xw)),fi(3,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Nw)),fi(5,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.context.$implicit.event),e(t,5,0,t.context.$implicit.directionsMetadata)}),null)}function Lw(e){return go(0,[(e()(),$s(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" keine aktuellen Ereignisse "]))],null,null)}function Mw(e){return go(0,[(e()(),$s(0,0,null,null,6,"div",[["class","mdc-linear-progress mdc-linear-progress--indeterminate"],["role","progressbar"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,0,"div",[["class","mdc-linear-progress__buffering-dots"]],null,null,null,null,null)),(e()(),$s(2,0,null,null,0,"div",[["class","mdc-linear-progress__buffer"]],null,null,null,null,null)),(e()(),$s(3,0,null,null,1,"div",[["class","mdc-linear-progress__bar mdc-linear-progress__primary-bar"]],null,null,null,null,null)),(e()(),$s(4,0,null,null,0,"span",[["class","mdc-linear-progress__bar-inner"]],null,null,null,null,null)),(e()(),$s(5,0,null,null,1,"div",[["class","mdc-linear-progress__bar mdc-linear-progress__secondary-bar"]],null,null,null,null,null)),(e()(),$s(6,0,null,null,0,"span",[["class","mdc-linear-progress__bar-inner"]],null,null,null,null,null))],null,null)}function Hw(e){return go(0,[di(0,Fu,[Gi]),di(0,Iu,[Gi]),(e()(),$s(2,0,null,null,14,"div",[["class","focus-container"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,2,null,jw)),fi(4,278528,null,0,gu,[Ln,Nn,In],{ngForOf:[0,"ngForOf"]},null),di(131072,Tu,[Rt]),(e()(),Qs(16777216,null,null,3,null,Lw)),fi(7,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),di(131072,Tu,[Rt]),di(131072,Tu,[Rt]),(e()(),Qs(16777216,null,null,2,null,Mw)),fi(11,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),di(131072,Tu,[Rt]),(e()(),$s(13,0,null,null,3,"button",[["class","mdc-button mdc-button--raised"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.patchFocus()&&r),r}),null,null)),(e()(),$s(14,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),fo(-1,null,["refresh"])),(e()(),fo(-1,null,["Aktualisieren"]))],(function(e,t){var n=t.component;e(t,4,0,Xn(t,4,0,Xr(t,5).transform(n.focusItems$))),e(t,7,0,!Xn(t,7,0,Xr(t,8).transform(n.focusItemsLoading$))&&!Xn(t,7,0,Xr(t,9).transform(n.focusItems$)).length),e(t,11,0,Xn(t,11,0,Xr(t,12).transform(n.focusItemsLoading$)))}),null)}var Bw=Ur("app-focus",Sw,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-focus",[],null,null,null,Hw,Ew)),fi(1,245760,null,0,Sw,[gf],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),Vw=function(e){return e*(Math.PI/180)},Uw=function(e){return e/(Math.PI/180)},Kw=6371.01,zw=Math.PI/2,qw=-zw,Ww=Math.PI,Gw=-Ww,Zw=2*Math.PI,Qw=function(){function e(t){_classCallCheck(this,e),this.dbName=t}return _createClass(e,[{key:"import",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(fetch("https://www.data.wien.gv.at/txt/wrlinien-gtfs-stops.txt"));case 2:return n.t0=new TextDecoderStream,t=n.sent.body.pipeThrough(n.t0),n.next=6,regeneratorRuntime.awrap(function(e,t){return new Promise((function(n,r){var i="",s=!1,o={stop_id:0,stop_name:0,stop_lat:0,stop_lon:0},a=Object.keys(o).length,u=new WritableStream({write:function(e){var n=[],r=!1,u=(i+=e).replace(/\r/g,"").split("\n");u.map((function(e){var t=Array.from(regeneratorRuntime.mark((function e(t,n){var r,i,s,o,a,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.split(","),i="",s=!0,o=!1,a=void 0,e.prev=4,u=r[Symbol.iterator]();case 6:if(s=(l=u.next()).done){e.next=24;break}if(c=l.value,'"'!=(c=i+c)[0]){e.next=18;break}if('"'!=c[c.length-1]||!(c.length<=2||'"'!=c[c.length-2])){e.next=15;break}return e.next=12,c.substring(1,c.length-1);case 12:i="",e.next=16;break;case 15:i+=c;case 16:e.next=21;break;case 18:return e.next=20,c;case 20:i="";case 21:s=!0,e.next=6;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(4),o=!0,a=e.t0;case 30:e.prev=30,e.prev=31,s||null==u.return||u.return();case 33:if(e.prev=33,!o){e.next=36;break}throw a;case 36:return e.finish(33);case 37:return e.finish(30);case 38:if(e.t1=i.length,!e.t1){e.next=42;break}return e.next=42,i;case 42:case"end":return e.stop()}}),e,null,[[4,26,30,38],[31,,33,37]])}))(e));if(!s||i.length<2){for(var u in o)o.hasOwnProperty(u)&&(o[u]=t.indexOf(u));s=!0}s&&t.length>=a?n.push({stop_id:t[o.stop_id],stop_name:t[o.stop_name],stop_lat:parseFloat(t[o.stop_lat]),stop_lon:parseFloat(t[o.stop_lon])}):r=!0})),i=r?u[u.length-1]:"",n.length&&t(n)},close:function(){n()},abort:function(){r()}});e.pipeTo(u)}))}(t,e));case 6:case"end":return n.stop()}}))}},{key:"query",value:function(e,t,n){var r=this,i=_slicedToArray(function(e,t,n){e=Vw(e),t=Vw(t);var r,i,s,o=n/Kw,a=e-o,u=e+o;return a>qw&&u<zw?((r=t-(s=Math.asin(Math.sin(o)/Math.cos(e))))<Gw&&(r+=Zw),(i=t+s)>Ww&&(i-=Zw)):(a=Math.max(a,qw),u=Math.min(u,zw),r=Gw,i=Ww),[Uw(a),Uw(r),Uw(u),Uw(i)]}(e,t,n/1e3),4),s=i[0],o=i[1],a=i[2],u=i[3];return new Promise((function(e,t){var n=IDBKeyRange.bound(s,a),i=IDBKeyRange.bound(o,u);r.openDb().then((function(r){var s=r.transaction("Stops").objectStore("Stops"),o=[],a=[],u=s.index("stop_lat").getAllKeys(n),l=s.index("stop_lon").getAllKeys(i);function c(){var n=r.transaction("Stops").objectStore("Stops"),i=[];a.forEach((function(r){var s=n.get(r);s.onsuccess=function(){i.push(s.result),i.length==a.length&&e(i)},s.onerror=function(e){return t(e)}}))}u.onsuccess=function(){o.length&&(a=u.result.filter((function(e){return o.indexOf(e)>-1})),c()),o=u.result},u.onerror=function(e){return t(e)},l.onsuccess=function(){o.length&&(a=l.result.filter((function(e){return o.indexOf(e)>-1})),c()),o=l.result},l.onerror=function(e){return t(e)}}),(function(e){return t(e)}))}))}},{key:"queryByName",value:function(e){var t=this;return new Promise((function(n,r){t.openDb().then((function(t){var i=t.transaction("Stops").objectStore("Stops").openCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(-1!==t.value.stop_name.indexOf(e)&&s.push(t.value),t.continue()):n(s)},i.onerror=function(e){return r(e)}}))}))}},{key:"openDb",value:function(){var e=this;return new Promise((function(t,n){var r=window.indexedDB.open(e.dbName,2);r.onsuccess=function(){t(r.result)},r.onupgradeneeded=function(e){if(e.oldVersion<2){var t=r.result.createObjectStore("Stops",{keyPath:"stop_id"});t.createIndex("stop_lat","stop_lat",{unique:!1}),t.createIndex("stop_lon","stop_lon",{unique:!1}),t.createIndex("version",["version"],{unique:!1}),r.result.createObjectStore("Logs",{keyPath:"id"})}},r.onerror=function(e){n(e)}}))}},{key:"getLogEntry",value:function(){var e=this;return new Promise((function(t,n){e.openDb().then((function(e){var r=e.transaction("Logs").objectStore("Logs").get(0);r.onsuccess=function(){return t(r.result||{version:0,updated:0})},r.onerror=function(e){return n(e)}}),(function(e){return n(e)}))}))}},{key:"maintainDb",value:function(){var e,t,n,r,i;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(this.openDb());case 2:return e=s.sent,s.next=5,regeneratorRuntime.awrap(this.getLogEntry());case 5:if(t=s.sent,!(+new Date-t.updated<6048e5)){s.next=8;break}return s.abrupt("return");case 8:return t.version++,s.next=11,regeneratorRuntime.awrap(this.import((function(n){var r=e.transaction("Stops","readwrite").objectStore("Stops"),i=!0,s=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var l=a.value;r.put(Object.assign(Object.assign({},l),{version:t.version}))}}catch(c){s=!0,o=c}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}})));case 11:n=e.transaction("Stops","readwrite"),r=n.objectStore("Stops"),(i=r.index("version").openKeyCursor(IDBKeyRange.only(t.version-1))).onsuccess=function(){var e=i.result;e&&r.delete(e.primaryKey)},(n=e.transaction("Logs","readwrite")).objectStore("Logs").put({id:0,updated:+new Date,version:t.version});case 14:case"end":return s.stop()}}),null,this)}}]),e}();function $w(e,t){var n=_slicedToArray(e,2),r=n[0],i=n[1],s=_slicedToArray(t,2),o=s[0],a=s[1],u=Vw(o-r),l=Vw(a-i),c=Math.sin(u/2)*Math.sin(u/2)+Math.cos(Vw(r))*Math.cos(Vw(o))*Math.sin(l/2)*Math.sin(l/2),h=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return Kw*h}function Jw(e,t,n){return e.map((function(e){return{stop:e,d:$w([e.stop_lat,e.stop_lon],[t,n])}})).sort((function(e,t){return e.d-t.d})).map((function(e){return e.stop}))}var Yw,Xw,eC=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[Navigation] Import POI",e}(),tC=function(){var e=function e(){_classCallCheck(this,e)};return e.type="[Navigation Find Nearest Stops]",e}(),nC=function(){var e=function e(t){_classCallCheck(this,e),this.search=t};return e.type="[Navigation Find Stops by Name]",e}(),rC=(Xw=function(){function e(){_classCallCheck(this,e),this.stopStore=new Qw("wienerlinienstops1")}return _createClass(e,[{key:"getPosition",value:function(){return new Promise((function(e,t){return window.navigator.geolocation.getCurrentPosition(e,t)}))}},{key:"importPOI",value:function(e){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stopStore.maintainDb();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"findNearestStops",value:function(e){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPosition();case 2:return n=t.sent,t.t0=Jw,t.next=6,this.stopStore.query(n.coords.latitude,n.coords.longitude,500);case 6:t.t1=t.sent,t.t2=n.coords.latitude,t.t3=n.coords.longitude,r=(0,t.t0)(t.t1,t.t2,t.t3),i=e.getState(),e.setState(Object.assign({},i,{nearestStops:r.map((function(e){return{name:e.stop_name,id:e.stop_id}}))}));case 12:case"end":return t.stop()}}),t,this)})))}},{key:"findStopsByName",value:function(e,t){return Ll(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getPosition();case 2:return r=n.sent,n.t0=Jw,n.next=6,this.stopStore.queryByName(t.search);case 6:n.t1=n.sent,n.t2=r.coords.latitude,n.t3=r.coords.longitude,i=(0,n.t0)(n.t1,n.t2,n.t3),s=e.getState(),e.setState(Object.assign({},s,{nearestStops:i.map((function(e){return{name:e.stop_name,id:e.stop_id}}))}));case 12:case"end":return n.stop()}}),n,this)})))}}]),e}(),Nl([Sf(eC),jl("design:type",Function),jl("design:paramtypes",[Object]),jl("design:returntype",Promise)],Xw.prototype,"importPOI",null),Nl([Sf(tC),jl("design:type",Function),jl("design:paramtypes",[Object]),jl("design:returntype",Promise)],Xw.prototype,"findNearestStops",null),Nl([Sf(tC),jl("design:type",Function),jl("design:paramtypes",[Object,nC]),jl("design:returntype",Promise)],Xw.prototype,"findStopsByName",null),Nl([Ef({name:"navigationState",defaults:{nearestStops:[]}})],Xw)),iC=(Yw=function(){function e(t,n){_classCallCheck(this,e),this.route=t,this.store=n}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){var n=t.get("id");e.sub=e.store.select($v.focusItem(n)).subscribe((function(t){return e.focusItem=t})),e.store.dispatch(new Bv(n))})),this.store.dispatch(new eC),this.store.dispatch(new tC)}}]),e}(),Nl([Af(rC),jl("design:type",E)],Yw.prototype,"focusItems$",void 0),Yw),sC=nr({encapsulation:0,styles:[[""]],data:{}});function oC(e){return go(0,[(e()(),$s(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" Probleme bei der Route nach "," beheben.\n"]))],null,(function(e,t){var n=t.component;e(t,1,0,(null==n.focusItem.event?null:null==n.focusItem.event.location?null:n.focusItem.event.location.text)||(null==n.focusItem.event?null:n.focusItem.event.subject))}))}function aC(e){return go(0,[(e()(),Qs(16777216,null,null,1,null,oC)),fi(1,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.focusItem)}),null)}var uC=Ur("app-focus-item-fix-route",iC,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-focus-item-fix-route",[],null,null,null,aC,sC)),fi(1,245760,null,0,iC,[Rm,gf],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),lC=function(){function e(t){_classCallCheck(this,e),this.store=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t,n,r,i;this.store.dispatch(new qv(function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Dv(e);return t.setHours(0,0,0,0),t}(Date.now()),(t=(e=new Date).getFullYear(),n=e.getMonth(),r=e.getDate(),(i=new Date(0)).setFullYear(t,n,r+1),i.setHours(23,59,59,999),i)))}}]),e}(),cC=nr({encapsulation:0,styles:[[""]],data:{}});function hC(e){return go(0,[],null,null)}var fC=Ur("app-planner",lC,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-planner",[],null,null,null,hC,cC)),fi(1,114688,null,0,lC,[gf],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),dC=function e(){_classCallCheck(this,e)},pC=function e(){_classCallCheck(this,e)},vC="*";function gC(e){return{type:2,steps:e,options:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}}function yC(e){return{type:6,styles:e,offset:null}}function mC(e){Promise.resolve(null).then(e)}var _C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+n}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;mC((function(){return e._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(e){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}(),bC=function(){function e(t){var n=this;_classCallCheck(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var r=0,i=0,s=0,o=this.players.length;0==o?mC((function(){return n._onFinish()})):this.players.forEach((function(e){e.onDone((function(){++r==o&&n._onFinish()})),e.onDestroy((function(){++i==o&&n._onDestroy()})),e.onStart((function(){++s==o&&n._onStart()}))})),this.totalTime=this.players.reduce((function(e,t){return Math.max(e,t.totalTime)}),0)}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(e){return e.init()}))}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(e){return e.play()}))}},{key:"pause",value:function(){this.players.forEach((function(e){return e.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(e){return e.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(e){return e.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(e){return e.destroy()})),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(e){return e.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach((function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)}))}},{key:"getPosition",value:function(){var e=0;return this.players.forEach((function(t){var n=t.getPosition();e=Math.min(n,e)})),e}},{key:"beforeDestroy",value:function(){this.players.forEach((function(e){e.beforeDestroy&&e.beforeDestroy()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}(),kC="!";function wC(){throw Error("Host already has a portal attached")}var CC=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"attach",value:function(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&wC(),this._attachedHost=e,e.attach(this)}},{key:"detach",value:function(){var e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}},{key:"isAttached",get:function(){return null!=this._attachedHost}}]),e}(),SC=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).component=e,s.viewContainerRef=n,s.injector=r,s.componentFactoryResolver=i,s}return _inherits(t,e),t}(CC),EC=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).templateRef=e,i.viewContainerRef=n,i.context=r,i}return _inherits(t,e),_createClass(t,[{key:"attach",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=n,_get(_getPrototypeOf(t.prototype),"attach",this).call(this,e)}},{key:"detach",value:function(){return this.context=void 0,_get(_getPrototypeOf(t.prototype),"detach",this).call(this)}},{key:"origin",get:function(){return this.templateRef.elementRef}}]),t}(CC),xC=function(){function e(){_classCallCheck(this,e),this._isDisposed=!1}return _createClass(e,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&wC(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof SC?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof EC?(this._attachedPortal=e,this.attachTemplatePortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),e}(),AC=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).outletElement=e,s._componentFactoryResolver=n,s._appRef=r,s._defaultInjector=i,s}return _inherits(t,e),_createClass(t,[{key:"attachComponentPortal",value:function(e){var t,n=this,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);return e.viewContainerRef?(t=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn((function(){return t.destroy()}))):(t=r.create(e.injector||this._defaultInjector),this._appRef.attachView(t.hostView),this.setDisposeFn((function(){n._appRef.detachView(t.hostView),t.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(t)),t}},{key:"attachTemplatePortal",value:function(e){var t=this,n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context);return r.detectChanges(),r.rootNodes.forEach((function(e){return t.outletElement.appendChild(e)})),this.setDisposeFn((function(){var e=n.indexOf(r);-1!==e&&n.remove(e)})),r}},{key:"dispose",value:function(){_get(_getPrototypeOf(t.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),t}(xC),TC=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._componentFactoryResolver=e,r._viewContainerRef=n,r._isInitialized=!1,r.attached=new Ni,r}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(t.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(e){e.setAttachedHost(this);var n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i=n.createComponent(r,n.length,e.injector||n.injector);return _get(_getPrototypeOf(t.prototype),"setDisposeFn",this).call(this,(function(){return i.destroy()})),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}},{key:"attachTemplatePortal",value:function(e){var n=this;e.setAttachedHost(this);var r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return _get(_getPrototypeOf(t.prototype),"setDisposeFn",this).call(this,(function(){return n._viewContainerRef.clear()})),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}},{key:"portal",get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&_get(_getPrototypeOf(t.prototype),"detach",this).call(this),e&&_get(_getPrototypeOf(t.prototype),"attach",this).call(this,e),this._attachedPortal=e)}},{key:"attachedRef",get:function(){return this._attachedRef}}]),t}(xC),FC=function e(){_classCallCheck(this,e)},IC=function(){function e(t,n){_classCallCheck(this,e),this._parentInjector=t,this._customTokens=n}return _createClass(e,[{key:"get",value:function(e,t){var n=this._customTokens.get(e);return void 0!==n?n:this._parentInjector.get(e,t)}}]),e}();function PC(e){return null!=e&&"false"!=="".concat(e)}function OC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function RC(e){return Array.isArray(e)?e:[e]}function DC(e){return null==e?"":"string"==typeof e?e:"".concat(e,"px")}function NC(e){return e instanceof fn?e.nativeElement:e}var jC,LC=function(){function e(t){_classCallCheck(this,e),this.durationSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new MC(e,this.durationSelector))}}]),e}(),MC=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).durationSelector=n,r.hasValue=!1,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(r){return this.destination.error(r)}var n=B(this,t);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(e,t,n,r){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),t}(V);function HC(e){return!h(e)&&e-parseFloat(e)+1>=0}function BC(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function VC(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ql;return t=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return HC(t)?r=Number(t)<1?1:Number(t):R(t)&&(n=t),R(n)||(n=Ql),new E((function(t){var i=HC(e)?e:+e-n.now();return n.schedule(BC,i,{index:0,period:r,subscriber:t})}))}(e,n)},function(e){return e.lift(new LC(t))}}try{jC="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(pF){jC=!1}var UC,KC,zC=((KC=function e(t){_classCallCheck(this,e),this._platformId=t,this.isBrowser=this._platformId?Nu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!jC)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).ngInjectableDef=ye({factory:function(){return new KC(Be(zi,8))},token:KC,providedIn:"root"}),KC),qC=function e(){_classCallCheck(this,e)};function WC(e){return function(){if(null==UC&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return UC=!0}}))}finally{UC=UC||!1}return UC}()?e:!!e.capture}var GC,ZC=function(){var e={NORMAL:0,NEGATED:1,INVERTED:2};return e[e.NORMAL]="NORMAL",e[e.NEGATED]="NEGATED",e[e.INVERTED]="INVERTED",e}();function QC(){if("object"!=typeof document||!document)return ZC.NORMAL;if(!GC){var e=document.createElement("div"),t=e.style;e.dir="rtl",t.height="1px",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";var n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",e.appendChild(n),document.body.appendChild(e),GC=ZC.NORMAL,0===e.scrollLeft&&(e.scrollLeft=1,GC=0===e.scrollLeft?ZC.NEGATED:ZC.INVERTED),e.parentNode.removeChild(e)}return GC}var $C,JC,YC=(($C=function(){function e(t,n){_classCallCheck(this,e),this._ngZone=t,this._platform=n,this._scrolled=new P,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return _createClass(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe((function(){return t._scrolled.next(e)})))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new E((function(n){e._globalSubscription||e._addGlobalListener();var r=t>0?e._scrolled.pipe(VC(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){r.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}})):Qu()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(t,n){return e.deregister(n)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Ju((function(e){return!e||n.indexOf(e)>-1})))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,n=[];return this.scrollContainers.forEach((function(r,i){t._scrollableContainsElement(i,e)&&n.push(i)})),n}},{key:"_scrollableContainsElement",value:function(e,t){var n=t.nativeElement,r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return Yk(window.document,"scroll").subscribe((function(){return e._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}()).ngInjectableDef=ye({factory:function(){return new $C(Be(fs),Be(zC))},token:$C,providedIn:"root"}),$C),XC=function(){function e(t,n,r,i){var s=this;_classCallCheck(this,e),this.elementRef=t,this.scrollDispatcher=n,this.ngZone=r,this.dir=i,this._destroyed=new P,this._elementScrolled=new E((function(e){return s.ngZone.runOutsideAngular((function(){return Yk(s.elementRef.nativeElement,"scroll").pipe(mh(s._destroyed)).subscribe(e)}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.scrollDispatcher.register(this)}},{key:"ngOnDestroy",value:function(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}},{key:"elementScrolled",value:function(){return this._elementScrolled}},{key:"getElementRef",value:function(){return this.elementRef}},{key:"scrollTo",value:function(e){var t=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;e.left=null==e.left?n?e.end:e.start:e.left,e.right=null==e.right?n?e.start:e.end:e.right,null!=e.bottom&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),n&&QC()!=ZC.NORMAL?(null!=e.left&&(e.right=t.scrollWidth-t.clientWidth-e.left),QC()==ZC.INVERTED?e.left=e.right:QC()==ZC.NEGATED&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}},{key:"_applyScrollToOptions",value:function(e){var t=this.elementRef.nativeElement;"object"==typeof document&&"scrollBehavior"in document.documentElement.style?t.scrollTo(e):(null!=e.top&&(t.scrollTop=e.top),null!=e.left&&(t.scrollLeft=e.left))}},{key:"measureScrollOffset",value:function(e){var t=this.elementRef.nativeElement;if("top"==e)return t.scrollTop;if("bottom"==e)return t.scrollHeight-t.clientHeight-t.scrollTop;var n=this.dir&&"rtl"==this.dir.value;return"start"==e?e=n?"right":"left":"end"==e&&(e=n?"left":"right"),n&&QC()==ZC.INVERTED?"left"==e?t.scrollWidth-t.clientWidth-t.scrollLeft:t.scrollLeft:n&&QC()==ZC.NEGATED?"left"==e?t.scrollLeft+t.scrollWidth-t.clientWidth:-t.scrollLeft:"left"==e?t.scrollLeft:t.scrollWidth-t.clientWidth-t.scrollLeft}}]),e}(),eS=function e(){_classCallCheck(this,e)},tS=((JC=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._platform=t,n.runOutsideAngular((function(){r._change=t.isBrowser?X(Yk(window,"resize"),Yk(window,"orientationchange")):Qu(),r._invalidateCache=r.change().subscribe((function(){return r._updateViewportSize()}))}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,r=t.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement,t=e.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(VC(e)):this._change}},{key:"_updateViewportSize",value:function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}]),e}()).ngInjectableDef=ye({factory:function(){return new JC(Be(zC),Be(fs))},token:JC,providedIn:"root"}),JC),nS=27,rS=function(){function e(t,n){_classCallCheck(this,e),this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return _createClass(e,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=DC(-this._previousScrollPosition.left),e.style.top=DC(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=r,n.scrollBehavior=i}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}]),e}();function iS(){return Error("Scroll strategy has already been attached.")}var sS=function(){function e(t,n,r,i){var s=this;_classCallCheck(this,e),this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=function(){s.disable(),s._overlayRef.hasAttached()&&s._ngZone.run((function(){return s._overlayRef.detach()}))}}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw iS();this._overlayRef=e}},{key:"enable",value:function(){var e=this;if(!this._scrollSubscription){var t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe((function(){var t=e._viewportRuler.getViewportScrollPosition().top;Math.abs(t-e._initialScrollPosition)>e._config.threshold?e._detach():e._overlayRef.updatePosition()}))):this._scrollSubscription=t.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),oS=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),e}();function aS(e,t){return t.some((function(t){return e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right}))}function uS(e,t){return t.some((function(t){return e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right}))}var lS,cS=function(){function e(t,n,r,i){_classCallCheck(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw iS();this._overlayRef=e}},{key:"enable",value:function(){var e=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(e._overlayRef.updatePosition(),e._config&&e._config.autoClose){var t=e._overlayRef.overlayElement.getBoundingClientRect(),n=e._viewportRuler.getViewportSize(),r=n.width,i=n.height;aS(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(e.disable(),e._ngZone.run((function(){return e._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),hS=((lS=function e(t,n,r,i){var s=this;_classCallCheck(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=function(){return new oS},this.close=function(e){return new sS(s._scrollDispatcher,s._ngZone,s._viewportRuler,e)},this.block=function(){return new rS(s._viewportRuler,s._document)},this.reposition=function(e){return new cS(s._scrollDispatcher,s._viewportRuler,s._ngZone,e)},this._document=i}).ngInjectableDef=ye({factory:function(){return new lS(Be(YC),Be(tS),Be(fs),Be(Ou))},token:lS,providedIn:"root"}),lS),fS=function e(t){if(_classCallCheck(this,e),this.scrollStrategy=new oS,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t)for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];void 0!==t[i]&&(this[i]=t[i])}},dS=function e(t,n,r,i,s){_classCallCheck(this,e),this.offsetX=r,this.offsetY=i,this.panelClass=s,this.originX=t.originX,this.originY=t.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},pS=function e(t,n){_classCallCheck(this,e),this.connectionPair=t,this.scrollableViewProperties=n};function vS(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". ')+'Expected "top", "bottom" or "center".')}function gS(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". ')+'Expected "start", "end" or "center".')}var yS,mS,_S=((mS=function(){function e(t){var n=this;_classCallCheck(this,e),this._attachedOverlays=[],this._keydownListener=function(e){for(var t=n._attachedOverlays,r=t.length-1;r>-1;r--)if(t[r]._keydownEventSubscriptions>0){t[r]._keydownEvents.next(e);break}},this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._detach()}},{key:"add",value:function(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(e)}},{key:"remove",value:function(e){var t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}},{key:"_detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),e}()).ngInjectableDef=ye({factory:function(){return new mS(Be(Ou))},token:mS,providedIn:"root"}),mS),bS=((yS=function(){function e(t){_classCallCheck(this,e),this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){for(var e=this._document.getElementsByClassName("cdk-overlay-container"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);var n=this._document.createElement("div");n.classList.add("cdk-overlay-container"),this._document.body.appendChild(n),this._containerElement=n}}]),e}()).ngInjectableDef=ye({factory:function(){return new yS(Be(Ou))},token:yS,providedIn:"root"}),yS),kS=function(){function e(t,n,r,i,s,o,a,u){var l=this;_classCallCheck(this,e),this._portalOutlet=t,this._host=n,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=u,this._backdropElement=null,this._backdropClick=new P,this._attachments=new P,this._detachments=new P,this._locationChanges=v.EMPTY,this._backdropClickHandler=function(e){return l._backdropClick.next(e)},this._keydownEventsObservable=new E((function(e){var t=l._keydownEvents.subscribe(e);return l._keydownEventSubscriptions++,function(){t.unsubscribe(),l._keydownEventSubscriptions--}})),this._keydownEvents=new P,this._keydownEventSubscriptions=0,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}return _createClass(e,[{key:"attach",value:function(e){var t=this,n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(cc(1)).subscribe((function(){t.hasAttached()&&t.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return t.dispose()}))),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}}},{key:"dispose",value:function(){var e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick.asObservable()}},{key:"attachments",value:function(){return this._attachments.asObservable()}},{key:"detachments",value:function(){return this._detachments.asObservable()}},{key:"keydownEvents",value:function(){return this._keydownEventsObservable}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(e){this._config=Object.assign({},this._config,e),this._updateElementSize()}},{key:"setDirection",value:function(e){this._config=Object.assign({},this._config,{direction:e}),this._updateElementDirection()}},{key:"addPanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!0)}},{key:"removePanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!1)}},{key:"getDirection",value:function(){var e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}},{key:"updateScrollStrategy",value:function(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var e=this._pane.style;e.width=DC(this._config.width),e.height=DC(this._config.height),e.minWidth=DC(this._config.minWidth),e.minHeight=DC(this._config.minHeight),e.maxWidth=DC(this._config.maxWidth),e.maxHeight=DC(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(e){this._pane.style.pointerEvents=e?"auto":"none"}},{key:"_attachBackdrop",value:function(){var e=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){e._backdropElement&&e._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var e,t=this,n=this._backdropElement;if(n){var r=function r(){n&&(n.removeEventListener("click",t._backdropClickHandler),n.removeEventListener("transitionend",r),n.parentNode&&n.parentNode.removeChild(n)),t._backdropElement==n&&(t._backdropElement=null),t._config.backdropClass&&t._toggleClasses(n,t._config.backdropClass,!1),clearTimeout(e)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){n.addEventListener("transitionend",r)})),n.style.pointerEvents="none",e=this._ngZone.runOutsideAngular((function(){return setTimeout(r,500)}))}}},{key:"_toggleClasses",value:function(e,t,n){var r=e.classList;RC(t).forEach((function(e){e&&(n?r.add(e):r.remove(e))}))}},{key:"_detachContentWhenStable",value:function(){var e=this;this._ngZone.runOutsideAngular((function(){var t=e._ngZone.onStable.asObservable().pipe(mh(X(e._attachments,e._detachments))).subscribe((function(){e._pane&&e._host&&0!==e._pane.children.length||(e._pane&&e._config.panelClass&&e._toggleClasses(e._pane,e._config.panelClass,!1),e._host&&e._host.parentElement&&(e._previousHostParent=e._host.parentElement,e._previousHostParent.removeChild(e._host)),t.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}},{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}}]),e}(),wS=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new P,this._resizeSubscription=v.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}return _createClass(e,[{key:"attach",value:function(e){var t=this;if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){t._isInitialRender=!0,t.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var e,t=this._originRect,n=this._overlayRect,r=this._viewportRect,i=[],s=!0,o=!1,a=void 0;try{for(var u,l=this._preferredPositions[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value,h=this._getOriginPoint(t,c),f=this._getOverlayPoint(h,n,c),d=this._getOverlayFit(f,n,r,c);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(c,h);this._canFitWithFlexibleDimensions(d,f,r)?i.push({position:c,origin:h,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(h,c)}):(!e||e.overlayFit.visibleArea<d.visibleArea)&&(e={overlayFit:d,overlayPoint:f,originPoint:h,position:c,overlayRect:n})}}catch(C){o=!0,a=C}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}if(i.length){var p=null,v=-1,g=!0,y=!1,m=void 0;try{for(var _,b=i[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var k=_.value,w=k.boundingBoxRect.width*k.boundingBoxRect.height*(k.position.weight||1);w>v&&(v=w,p=k)}}catch(C){y=!0,m=C}finally{try{g||null==b.return||b.return()}finally{if(y)throw m}}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(e.position,e.originPoint);this._applyPosition(e.position,e.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&CS(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}},{key:"withScrollableContainers",value:function(e){return this._scrollables=e,this}},{key:"withPositions",value:function(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(e){return this._viewportMargin=e,this}},{key:"withFlexibleDimensions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=e,this}},{key:"withGrowAfterOpen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=e,this}},{key:"withPush",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=e,this}},{key:"withLockedPosition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=e,this}},{key:"setOrigin",value:function(e){return this._origin=e,this}},{key:"withDefaultOffsetX",value:function(e){return this._offsetX=e,this}},{key:"withDefaultOffsetY",value:function(e){return this._offsetY=e,this}},{key:"withTransformOriginOn",value:function(e){return this._transformOriginSelector=e,this}},{key:"_getOriginPoint",value:function(e,t){var n;if("center"==t.originX)n=e.left+e.width/2;else{var r=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;n="start"==t.originX?r:i}return{x:n,y:"center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}},{key:"_getOverlayPoint",value:function(e,t,n){var r;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,{x:e.x+r,y:e.y+("center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height)}}},{key:"_getOverlayFit",value:function(e,t,n,r){var i=e.x,s=e.y,o=this._getOffset(r,"x"),a=this._getOffset(r,"y");o&&(i+=o),a&&(s+=a);var u=0-s,l=s+t.height-n.height,c=this._subtractOverflows(t.width,0-i,i+t.width-n.width),h=this._subtractOverflows(t.height,u,l),f=c*h;return{visibleArea:f,isCompletelyWithinViewport:t.width*t.height===f,fitsInViewportVertically:h===t.height,fitsInViewportHorizontally:c==t.width}}},{key:"_canFitWithFlexibleDimensions",value:function(e,t,n){if(this._hasFlexibleDimensions){var r=n.bottom-t.y,i=n.right-t.x,s=this._overlayRef.getConfig().minHeight,o=this._overlayRef.getConfig().minWidth,a=e.fitsInViewportHorizontally||null!=o&&o<=i;return(e.fitsInViewportVertically||null!=s&&s<=r)&&a}return!1}},{key:"_pushOverlayOnScreen",value:function(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};var r,i,s=this._viewportRect,o=Math.max(e.x+t.width-s.right,0),a=Math.max(e.y+t.height-s.bottom,0),u=Math.max(s.top-n.top-e.y,0),l=Math.max(s.left-n.left-e.x,0);return this._previousPushAmount={x:r=t.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-n.left-e.x:0,y:i=t.height<=s.height?u||-a:e.y<this._viewportMargin?s.top-n.top-e.y:0},{x:e.x+r,y:e.y+i}}},{key:"_applyPosition",value:function(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){var n=this._getScrollVisibility(),r=new pS(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(e){if(this._transformOriginSelector){var t,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin="".concat(t," ").concat(r)}}},{key:"_calculateBoundingBoxRect",value:function(e,t){var n,r,i,s,o,a,u=this._viewportRect,l=this._isRtl();if("top"===t.overlayY)n=u.height-(r=e.y)+this._viewportMargin;else if("bottom"===t.overlayY)n=u.height-(i=u.height-e.y+2*this._viewportMargin)+this._viewportMargin;else{var c=Math.min(u.bottom-e.y+u.top,e.y),h=this._lastBoundingBoxSize.height;r=e.y-c,(n=2*c)>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-h/2)}if("end"===t.overlayX&&!l||"start"===t.overlayX&&l)a=u.width-e.x+this._viewportMargin,s=e.x-this._viewportMargin;else if("start"===t.overlayX&&!l||"end"===t.overlayX&&l)o=e.x,s=u.right-e.x;else{var f=Math.min(u.right-e.x+u.left,e.x),d=this._lastBoundingBoxSize.width;o=e.x-f,(s=2*f)>d&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.x-d/2)}return{top:r,left:o,bottom:i,right:a,width:s,height:n}}},{key:"_setBoundingBoxStyles",value:function(e,t){var n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=DC(n.height),r.top=DC(n.top),r.bottom=DC(n.bottom),r.width=DC(n.width),r.left=DC(n.left),r.right=DC(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=DC(i)),s&&(r.maxWidth=DC(s))}this._lastBoundingBoxSize=n,CS(this._boundingBox.style,r)}},{key:"_resetBoundingBoxStyles",value:function(){CS(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){CS(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(e,t){var n={};if(this._hasExactPosition()){var r=this._viewportRuler.getViewportScrollPosition();CS(n,this._getExactOverlayY(t,e,r)),CS(n,this._getExactOverlayX(t,e,r))}else n.position="static";var i="",s=this._getOffset(t,"x"),o=this._getOffset(t,"y");s&&(i+="translateX(".concat(s,"px) ")),o&&(i+="translateY(".concat(o,"px)")),n.transform=i.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),CS(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(e,t,n){var r={top:null,bottom:null},i=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));var s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=s,"bottom"===e.overlayY?r.bottom="".concat(this._document.documentElement.clientHeight-(i.y+this._overlayRect.height),"px"):r.top=DC(i.y),r}},{key:"_getExactOverlayX",value:function(e,t,n){var r={left:null,right:null},i=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),"right"==(this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?r.right="".concat(this._document.documentElement.clientWidth-(i.x+this._overlayRect.width),"px"):r.left=DC(i.x),r}},{key:"_getScrollVisibility",value:function(){var e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map((function(e){return e.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:uS(e,n),isOriginOutsideView:aS(e,n),isOverlayClipped:uS(t,n),isOverlayOutsideView:aS(t,n)}}},{key:"_subtractOverflows",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return e-Math.max(t,0)}),e)}},{key:"_getNarrowedViewportRect",value:function(){var e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}},{key:"_validatePositions",value:function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach((function(e){gS("originX",e.originX),vS("originY",e.originY),gS("overlayX",e.overlayX),vS("overlayY",e.overlayY)}))}},{key:"_addPanelClasses",value:function(e){var t=this;this._pane&&RC(e).forEach((function(e){""!==e&&-1===t._appliedPanelClasses.indexOf(e)&&(t._appliedPanelClasses.push(e),t._pane.classList.add(e))}))}},{key:"_clearPanelClasses",value:function(){var e=this;this._pane&&(this._appliedPanelClasses.forEach((function(t){e._pane.classList.remove(t)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var e=this._origin;if(e instanceof fn)return e.nativeElement.getBoundingClientRect();if(e instanceof HTMLElement)return e.getBoundingClientRect();var t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}},{key:"positions",get:function(){return this._preferredPositions}}]),e}();function CS(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var SS,ES=function(){function e(t,n,r,i,s,o,a){_classCallCheck(this,e),this._preferredPositions=[],this._positionStrategy=new wS(r,i,s,o,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,n)}return _createClass(e,[{key:"attach",value:function(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(e){this._positionStrategy.withScrollableContainers(e)}},{key:"withFallbackPosition",value:function(e,t,n,r){var i=new dS(e,t,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}},{key:"withOffsetX",value:function(e){return this._positionStrategy.withDefaultOffsetX(e),this}},{key:"withOffsetY",value:function(e){return this._positionStrategy.withDefaultOffsetY(e),this}},{key:"withLockedPosition",value:function(e){return this._positionStrategy.withLockedPosition(e),this}},{key:"withPositions",value:function(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(e){return this._positionStrategy.setOrigin(e),this}},{key:"_isRtl",get:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"onPositionChange",get:function(){return this._positionStrategy.positionChanges}},{key:"positions",get:function(){return this._preferredPositions}}]),e}(),xS=function(){function e(){_classCallCheck(this,e),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return _createClass(e,[{key:"attach",value:function(e){var t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}},{key:"left",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}},{key:"right",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}},{key:"width",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}},{key:"height",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}},{key:"centerHorizontally",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(e),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(e),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();e.position=this._cssPosition,e.marginLeft="100%"===n.width?"0":this._leftOffset,e.marginTop="100%"===n.height?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,"100%"===n.width?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems="100%"===n.height?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}}]),e}(),AS=((SS=function(){function e(t,n,r,i){_classCallCheck(this,e),this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=i}return _createClass(e,[{key:"global",value:function(){return new xS}},{key:"connectedTo",value:function(e,t,n){return new ES(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(e){return new wS(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),e}()).ngInjectableDef=ye({factory:function(){return new SS(Be(tS),Be(Ou),Be(zC),Be(bS))},token:SS,providedIn:"root"}),SS),TS=0,FS=function(){function e(t,n,r,i,s,o,a,u,l,c){_classCallCheck(this,e),this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=i,this._keyboardDispatcher=s,this._injector=o,this._ngZone=a,this._document=u,this._directionality=l,this._location=c}return _createClass(e,[{key:"create",value:function(e){var t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),i=new fS(e);return i.direction=i.direction||this._directionality.value,new kS(r,t,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(e){var t=this._document.createElement("div");return t.id="cdk-overlay-".concat(TS++),t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}},{key:"_createHostElement",value:function(){var e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}},{key:"_createPortalOutlet",value:function(e){return this._appRef||(this._appRef=this._injector.get(Ps)),new AC(e,this._componentFactoryResolver,this._appRef,this._injector)}}]),e}(),IS=new Ie("cdk-connected-overlay-scroll-strategy");function PS(e){return function(){return e.scrollStrategies.reposition()}}var OS=function e(){_classCallCheck(this,e)};function RS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ql;return function(n){return n.lift(new DS(e,t))}}var DS=function(){function e(t,n){_classCallCheck(this,e),this.dueTime=t,this.scheduler=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new NS(e,this.dueTime,this.scheduler))}}]),e}(),NS=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(jS,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),t}(m);function jS(e){e.debouncedNext()}var LS,MS=((LS=function(){function e(t){_classCallCheck(this,e),this._platform=t}return _createClass(e,[{key:"isDisabled",value:function(e){return e.hasAttribute("disabled")}},{key:"isVisible",value:function(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}},{key:"isTabbable",value:function(e){if(!this._platform.isBrowser)return!1;var t,n=function(e){try{return e.frameElement}catch(pF){return null}}((t=e).ownerDocument&&t.ownerDocument.defaultView||window);if(n){var r=n&&n.nodeName.toLowerCase();if(-1===BS(n))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===r)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(n))return!1}var i=e.nodeName.toLowerCase(),s=BS(e);if(e.hasAttribute("contenteditable"))return-1!==s;if("iframe"===i)return!1;if("audio"===i){if(!e.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!e.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){var t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&e.tabIndex>=0}},{key:"isFocusable",value:function(e){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){var t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||HS(e))}(e)&&!this.isDisabled(e)&&this.isVisible(e)}}]),e}()).ngInjectableDef=ye({factory:function(){return new LS(Be(zC))},token:LS,providedIn:"root"}),LS);function HS(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;var t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function BS(e){if(!HS(e))return null;var t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}var VS,US,KS,zS,qS,WS=function(){function e(t,n,r,i){var s=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this._element=t,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=function(){return s.focusLastTabbableElement()},this.endAnchorListener=function(){return s.focusFirstTabbableElement()},this._enabled=!0,o||this.attachAnchors()}return _createClass(e,[{key:"destroy",value:function(){var e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null}},{key:"attachAnchors",value:function(){var e=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular((function(){e._startAnchor||(e._startAnchor=e._createAnchor(),e._startAnchor.addEventListener("focus",e.startAnchorListener)),e._endAnchor||(e._endAnchor=e._createAnchor(),e._endAnchor.addEventListener("focus",e.endAnchorListener))})),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusInitialElement())}))}))}},{key:"focusFirstTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusFirstTabbableElement())}))}))}},{key:"focusLastTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusLastTabbableElement())}))}))}},{key:"_getRegionBoundary",value:function(e){for(var t=this._element.querySelectorAll("[cdk-focus-region-".concat(e,"], ")+"[cdkFocusRegion".concat(e,"], ")+"[cdk-focus-".concat(e,"]")),n=0;n<t.length;n++)t[n].hasAttribute("cdk-focus-".concat(e))?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(e,"', ")+"use 'cdkFocusRegion".concat(e,"' instead. The deprecated ")+"attribute will be removed in 8.0.0.",t[n]):t[n].hasAttribute("cdk-focus-region-".concat(e))&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(e,"', ")+"use 'cdkFocusRegion".concat(e,"' instead. The deprecated attribute ")+"will be removed in 8.0.0.",t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return e?(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),st()&&!this._checker.isFocusable(e)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",e),e.focus(),!0):this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var e=this._getRegionBoundary("start");return e&&e.focus(),!!e}},{key:"focusLastTabbableElement",value:function(){var e=this._getRegionBoundary("end");return e&&e.focus(),!!e}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}},{key:"_getLastTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=t.length-1;n>=0;n--){var r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}},{key:"_createAnchor",value:function(){var e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}},{key:"_toggleAnchorTabIndex",value:function(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}},{key:"_executeOnStable",value:function(e){this._ngZone.isStable?e():this._ngZone.onStable.asObservable().pipe(cc(1)).subscribe(e)}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}}]),e}(),GS=((VS=function(){function e(t,n,r){_classCallCheck(this,e),this._checker=t,this._ngZone=n,this._document=r}return _createClass(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new WS(e,this._checker,this._ngZone,this._document,t)}}]),e}()).ngInjectableDef=ye({factory:function(){return new VS(Be(MS),Be(fs),Be(Ou))},token:VS,providedIn:"root"}),VS),ZS=new Ie("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),QS=new Ie("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),$S=((US=function(){function e(t,n,r,i){_classCallCheck(this,e),this._ngZone=n,this._defaultOptions=i,this._document=r,this._liveElement=t||this._createLiveElement()}return _createClass(e,[{key:"announce",value:function(e){for(var t,n,r,i=this,s=this._defaultOptions,o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return 1===a.length&&"number"==typeof a[0]?r=a[0]:(n=(t=_slicedToArray(a,2))[0],r=t[1]),this.clear(),clearTimeout(this._previousTimeout),n||(n=s&&s.politeness?s.politeness:"polite"),null==r&&s&&(r=s.duration),this._liveElement.setAttribute("aria-live",n),this._ngZone.runOutsideAngular((function(){return new Promise((function(t){clearTimeout(i._previousTimeout),i._previousTimeout=setTimeout((function(){i._liveElement.textContent=e,t(),"number"==typeof r&&(i._previousTimeout=setTimeout((function(){return i.clear()}),r))}),100)}))}))}},{key:"clear",value:function(){this._liveElement&&(this._liveElement.textContent="")}},{key:"ngOnDestroy",value:function(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}},{key:"_createLiveElement",value:function(){for(var e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}]),e}()).ngInjectableDef=ye({factory:function(){return new US(Be(ZS,8),Be(fs),Be(Ou),Be(QS,8))},token:US,providedIn:"root"}),US),JS=650,YS=WC({passive:!0,capture:!0}),XS=((KS=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._ngZone=t,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=function(){r._lastTouchTarget=null,r._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(){r._lastTouchTarget||r._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=function(e){null!=r._touchTimeoutId&&clearTimeout(r._touchTimeoutId),r._lastTouchTarget=e.composedPath?e.composedPath()[0]:e.target,r._touchTimeoutId=setTimeout((function(){return r._lastTouchTarget=null}),JS)},this._windowFocusListener=function(){r._windowFocused=!0,r._windowFocusTimeoutId=setTimeout((function(){return r._windowFocused=!1}))}}return _createClass(e,[{key:"monitor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._platform.isBrowser)return Qu(null);var r=NC(e);if(this._elementInfo.has(r)){var i=this._elementInfo.get(r);return i.checkChildren=n,i.subject.asObservable()}var s={unlisten:function(){},checkChildren:n,subject:new P};this._elementInfo.set(r,s),this._incrementMonitoredElementCount();var o=function(e){return t._onFocus(e,r)},a=function(e){return t._onBlur(e,r)};return this._ngZone.runOutsideAngular((function(){r.addEventListener("focus",o,!0),r.addEventListener("blur",a,!0)})),s.unlisten=function(){r.removeEventListener("focus",o,!0),r.removeEventListener("blur",a,!0)},s.subject.asObservable()}},{key:"stopMonitoring",value:function(e){var t=NC(e),n=this._elementInfo.get(t);n&&(n.unlisten(),n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())}},{key:"focusVia",value:function(e,t,n){var r=NC(e);this._setOriginForCurrentEventQueue(t),"function"==typeof r.focus&&r.focus(n)}},{key:"ngOnDestroy",value:function(){var e=this;this._elementInfo.forEach((function(t,n){return e.stopMonitoring(n)}))}},{key:"_toggleClass",value:function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}},{key:"_setClasses",value:function(e,t){this._elementInfo.get(e)&&(this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t))}},{key:"_setOriginForCurrentEventQueue",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){t._origin=e,t._originTimeoutId=setTimeout((function(){return t._origin=null}),1)}))}},{key:"_wasCausedByTouch",value:function(e){var t=e.target;return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(e,t){var n=this._elementInfo.get(t);if(n&&(n.checkChildren||t===e.target)){var r=this._origin;r||(r=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"),this._setClasses(t,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}}},{key:"_onBlur",value:function(e,t){var n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(e,t){this._ngZone.run((function(){return e.next(t)}))}},{key:"_incrementMonitoredElementCount",value:function(){var e=this;1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular((function(){document.addEventListener("keydown",e._documentKeydownListener,YS),document.addEventListener("mousedown",e._documentMousedownListener,YS),document.addEventListener("touchstart",e._documentTouchstartListener,YS),window.addEventListener("focus",e._windowFocusListener)}))}},{key:"_decrementMonitoredElementCount",value:function(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,YS),document.removeEventListener("mousedown",this._documentMousedownListener,YS),document.removeEventListener("touchstart",this._documentTouchstartListener,YS),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}]),e}()).ngInjectableDef=ye({factory:function(){return new KS(Be(fs),Be(zC))},token:KS,providedIn:"root"}),KS),eE=function(){function e(t){_classCallCheck(this,e),this.total=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new tE(e,this.total))}}]),e}(),tE=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=n,r.count=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){++this.count>this.total&&this.destination.next(e)}}]),t}(m),nE=new Set,rE=((qS=function(){function e(t){_classCallCheck(this,e),this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):iE}return _createClass(e,[{key:"matchMedia",value:function(e){return this._platform.WEBKIT&&function(e){if(!nE.has(e))try{zS||((zS=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(zS)),zS.sheet&&(zS.sheet.insertRule("@media ".concat(e," {.fx-query-test{ }}"),0),nE.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}]),e}()).ngInjectableDef=ye({factory:function(){return new qS(Be(zC))},token:qS,providedIn:"root"}),qS);function iE(e){return{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}var sE,oE=((sE=function(){function e(t,n){_classCallCheck(this,e),this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new P}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(e){var t=this;return aE(RC(e)).some((function(e){return t._registerQuery(e).mql.matches}))}},{key:"observe",value:function(e){var t=this,n=Xv(aE(RC(e)).map((function(e){return t._registerQuery(e).observable})));return(n=cg(n.pipe(cc(1)),n.pipe((function(e){return e.lift(new eE(1))}),RS(0)))).pipe(U((function(e){var t={matches:!1,breakpoints:{}};return e.forEach((function(e){t.matches=t.matches||e.matches,t.breakpoints[e.query]=e.matches})),t})))}},{key:"_registerQuery",value:function(e){var t=this;if(this._queries.has(e))return this._queries.get(e);var n=this._mediaMatcher.matchMedia(e),r={observable:new E((function(e){var r=function(n){return t._zone.run((function(){return e.next(n)}))};return n.addListener(r),function(){n.removeListener(r)}})).pipe(hg(n),U((function(t){return{query:e,matches:t.matches}})),mh(this._destroySubject)),mql:n};return this._queries.set(e,r),r}}]),e}()).ngInjectableDef=ye({factory:function(){return new sE(Be(rE),Be(fs))},token:sE,providedIn:"root"}),sE);function aE(e){return e.map((function(e){return e.split(",")})).reduce((function(e,t){return e.concat(t)})).map((function(e){return e.trim()}))}var uE,lE,cE="(max-width: 599.99px) and (orientation: portrait)",hE=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._overlayRef=n,this._afterDismissed=new P,this._afterOpened=new P,this._onAction=new P,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe((function(){return r.dismiss()})),t._onExit.subscribe((function(){return r._finishDismiss()}))}return _createClass(e,[{key:"dismiss",value:function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}},{key:"dismissWithAction",value:function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}},{key:"closeWithAction",value:function(){this.dismissWithAction()}},{key:"_dismissAfter",value:function(e){var t=this;this._durationTimeoutId=setTimeout((function(){return t.dismiss()}),e)}},{key:"_open",value:function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}},{key:"_finishDismiss",value:function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}},{key:"afterDismissed",value:function(){return this._afterDismissed.asObservable()}},{key:"afterOpened",value:function(){return this.containerInstance._onEnter}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),e}(),fE=new Ie("MatSnackBarData"),dE=function e(){_classCallCheck(this,e),this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"},pE=function(){function e(t,n){_classCallCheck(this,e),this.snackBarRef=t,this.data=n}return _createClass(e,[{key:"action",value:function(){this.snackBarRef.dismissWithAction()}},{key:"hasAction",get:function(){return!!this.data.action}}]),e}(),vE=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._ngZone=e,s._elementRef=n,s._changeDetectorRef=r,s.snackBarConfig=i,s._destroyed=!1,s._onExit=new P,s._onEnter=new P,s._animationState="void",s._role="assertive"!==i.politeness||i.announcementMessage?"off"===i.politeness?null:"status":"alert",s}return _inherits(t,e),_createClass(t,[{key:"attachComponentPortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}},{key:"onAnimationEnd",value:function(e){var t=e.fromState,n=e.toState;if(("void"===n&&"void"!==t||"hidden"===n)&&this._completeExit(),"visible"===n){var r=this._onEnter;this._ngZone.run((function(){r.next(),r.complete()}))}}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){return this._animationState="hidden",this._onExit}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._completeExit()}},{key:"_completeExit",value:function(){var e=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(cc(1)).subscribe((function(){e._onExit.next(),e._onExit.complete()}))}},{key:"_applySnackBarClasses",value:function(){var e=this._elementRef.nativeElement,t=this.snackBarConfig.panelClass;t&&(Array.isArray(t)?t.forEach((function(t){return e.classList.add(t)})):e.classList.add(t)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}},{key:"_assertNotAttached",value:function(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}]),t}(xC),gE=function e(){_classCallCheck(this,e)},yE=new Ie("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new dE}}),mE=((uE=function(){function e(t,n,r,i,s,o){_classCallCheck(this,e),this._overlay=t,this._live=n,this._injector=r,this._breakpointObserver=i,this._parentSnackBar=s,this._defaultConfig=o,this._snackBarRefAtThisLevel=null}return _createClass(e,[{key:"openFromComponent",value:function(e,t){return this._attach(e,t)}},{key:"openFromTemplate",value:function(e,t){return this._attach(e,t)}},{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=Object.assign({},this._defaultConfig,n);return r.data={message:e,action:t},r.announcementMessage||(r.announcementMessage=e),this.openFromComponent(pE,r)}},{key:"dismiss",value:function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}},{key:"ngOnDestroy",value:function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}},{key:"_attachSnackBarContainer",value:function(e,t){var n=new IC(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[dE,t]])),r=new SC(vE,t.viewContainerRef,n),i=e.attach(r);return i.instance.snackBarConfig=t,i.instance}},{key:"_attach",value:function(e,t){var n=Object.assign({},new dE,this._defaultConfig,t),r=this._createOverlay(n),i=this._attachSnackBarContainer(r,n),s=new hE(i,r);if(e instanceof Nn){var o=new EC(e,null,{$implicit:n.data,snackBarRef:s});s.instance=i.attachTemplatePortal(o)}else{var a=this._createInjector(n,s),u=new SC(e,void 0,a),l=i.attachComponentPortal(u);s.instance=l.instance}return this._breakpointObserver.observe(cE).pipe(mh(r.detachments())).subscribe((function(e){var t=r.overlayElement.classList;e.matches?t.add("mat-snack-bar-handset"):t.remove("mat-snack-bar-handset")})),this._animateSnackBar(s,n),this._openedSnackBarRef=s,this._openedSnackBarRef}},{key:"_animateSnackBar",value:function(e,t){var n=this;e.afterDismissed().subscribe((function(){n._openedSnackBarRef==e&&(n._openedSnackBarRef=null),t.announcementMessage&&n._live.clear()})),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe((function(){e.containerInstance.enter()})),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),t.duration&&t.duration>0&&e.afterOpened().subscribe((function(){return e._dismissAfter(t.duration)})),t.announcementMessage&&this._live.announce(t.announcementMessage,t.politeness)}},{key:"_createOverlay",value:function(e){var t=new fS;t.direction=e.direction;var n=this._overlay.position().global(),r="rtl"===e.direction,i="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!r||"end"===e.horizontalPosition&&r,s=!i&&"center"!==e.horizontalPosition;return i?n.left("0"):s?n.right("0"):n.centerHorizontally(),"top"===e.verticalPosition?n.top("0"):n.bottom("0"),t.positionStrategy=n,this._overlay.create(t)}},{key:"_createInjector",value:function(e,t){return new IC(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[hE,t],[fE,e.data]]))}},{key:"_openedSnackBarRef",get:function(){var e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}}]),e}()).ngInjectableDef=ye({factory:function(){return new uE(Be(FS),Be($S),Be(Pe),Be(oE),Be(uE,12),Be(yE))},token:uE,providedIn:gE}),uE),_E=new Ie("cdk-dir-doc",{providedIn:"root",factory:function(){return Ve(Ou)}}),bE=((lE=function(){function e(t){if(_classCallCheck(this,e),this.value="ltr",this.change=new Ni,t){var n=t.documentElement?t.documentElement.dir:null,r=(t.body?t.body.dir:null)||n;this.value="ltr"===r||"rtl"===r?r:"ltr"}}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}()).ngInjectableDef=ye({factory:function(){return new lE(Be(_E,8))},token:lE,providedIn:"root"}),lE),kE=function e(){_classCallCheck(this,e)},wE=new mn("8.2.3"),CE=new mn("8.2.3"),SE=new Ie("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),EE=function(){function e(t,n){_classCallCheck(this,e),this._sanityChecksEnabled=t,this._hammerLoader=n,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _createClass(e,[{key:"_areChecksEnabled",value:function(){return this._sanityChecksEnabled&&st()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var e=this._window;return e&&(e.__karma__||e.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._document&&this._document.body&&"function"==typeof getComputedStyle){var e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);var t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}}},{key:"_checkCdkVersionMatch",value:function(){CE.full!==wE.full&&console.warn("The Angular Material version ("+CE.full+") does not match the Angular CDK version ("+wE.full+").\nPlease ensure the versions of these two packages exactly match.")}},{key:"_checkHammerIsAvailable",value:function(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}]),e}();try{"undefined"!=typeof Intl}catch(pF){!1}var xE=function(){var e={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return e[e.FADING_IN]="FADING_IN",e[e.VISIBLE]="VISIBLE",e[e.FADING_OUT]="FADING_OUT",e[e.HIDDEN]="HIDDEN",e}(),AE=function(){function e(t,n,r){_classCallCheck(this,e),this._renderer=t,this.element=n,this.config=r,this.state=xE.HIDDEN}return _createClass(e,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),e}(),TE={enterDuration:450,exitDuration:400},FE=800,IE=WC({passive:!0}),PE=function(){function e(t,n,r,i){var s=this;_classCallCheck(this,e),this._target=t,this._ngZone=n,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._onMousedown=function(e){var t=function(e){return 0===e.buttons}(e),n=s._lastTouchStartEvent&&Date.now()<s._lastTouchStartEvent+FE;s._target.rippleDisabled||t||n||(s._isPointerDown=!0,s.fadeInRipple(e.clientX,e.clientY,s._target.rippleConfig))},this._onTouchStart=function(e){if(!s._target.rippleDisabled){s._lastTouchStartEvent=Date.now(),s._isPointerDown=!0;for(var t=e.changedTouches,n=0;n<t.length;n++)s.fadeInRipple(t[n].clientX,t[n].clientY,s._target.rippleConfig)}},this._onPointerUp=function(){s._isPointerDown&&(s._isPointerDown=!1,s._activeRipples.forEach((function(e){!e.config.persistent&&(e.state===xE.VISIBLE||e.config.terminateOnPointerUp&&e.state===xE.FADING_IN)&&e.fadeOut()})))},i.isBrowser&&(this._containerElement=NC(r),this._triggerEvents.set("mousedown",this._onMousedown).set("mouseup",this._onPointerUp).set("mouseleave",this._onPointerUp).set("touchstart",this._onTouchStart).set("touchend",this._onPointerUp).set("touchcancel",this._onPointerUp))}return _createClass(e,[{key:"fadeInRipple",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign({},TE,r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);var o=r.radius||function(e,t,n){var r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,u=t-i.top,l=s.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left="".concat(a-o,"px"),c.style.top="".concat(u-o,"px"),c.style.height="".concat(2*o,"px"),c.style.width="".concat(2*o,"px"),c.style.backgroundColor=r.color||null,c.style.transitionDuration="".concat(l,"ms"),this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";var h=new AE(this,c,r);return h.state=xE.FADING_IN,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone((function(){var e=h===n._mostRecentTransientRipple;h.state=xE.VISIBLE,r.persistent||e&&n._isPointerDown||h.fadeOut()}),l),h}},{key:"fadeOutRipple",value:function(e){var t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),t){var n=e.element,r=Object.assign({},TE,e.config.animation);n.style.transitionDuration="".concat(r.exitDuration,"ms"),n.style.opacity="0",e.state=xE.FADING_OUT,this._runTimeoutOutsideZone((function(){e.state=xE.HIDDEN,n.parentNode.removeChild(n)}),r.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach((function(e){return e.fadeOut()}))}},{key:"setupTriggerEvents",value:function(e){var t=this,n=NC(e);n&&n!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular((function(){t._triggerEvents.forEach((function(e,t){n.addEventListener(t,e,IE)}))})),this._triggerElement=n)}},{key:"_runTimeoutOutsideZone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular((function(){return setTimeout(e,t)}))}},{key:"_removeTriggerEvents",value:function(){var e=this;this._triggerElement&&this._triggerEvents.forEach((function(t,n){e._triggerElement.removeEventListener(n,t,IE)}))}}]),e}(),OE=new Ie("mat-ripple-global-options"),RE=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this._elementRef=t,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new PE(this,n,t,r),"NoopAnimations"===s&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}return _createClass(e,[{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign({},this.rippleConfig,e))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}}]),e}(),DE=function e(){_classCallCheck(this,e)},NE="accent",jE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],LE=function(e){function t(e,n,r){var i;_classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._focusMonitor=n,i._animationMode=r,i.isRoundButton=i._hasHostAttributes("mat-fab","mat-mini-fab"),i.isIconButton=i._hasHostAttributes("mat-icon-button");var s=!0,o=!1,a=void 0;try{for(var u,l=jE[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;i._hasHostAttributes(c)&&i._getHostElement().classList.add(c)}}catch(h){o=!0,a=h}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}return e.nativeElement.classList.add("mat-button-base"),i._focusMonitor.monitor(i._elementRef,!0),i.isRoundButton&&(i.color=NE),i}return _inherits(t,e),_createClass(t,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),e,t)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e._getHostElement().hasAttribute(t)}))}}]),t}(function(e,t){return function(e){function n(){var e,r;_classCallCheck(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(n)).call.apply(e,[this].concat(s)))).color=t,r}return _inherits(n,e),_createClass(n,[{key:"color",get:function(){return this._color},set:function(e){var n=e||t;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),n&&this._elementRef.nativeElement.classList.add("mat-".concat(n)),this._color=n)}}]),n}(e)}(function(e){return function(e){function t(){var e,n;_classCallCheck(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(i))))._disabled=!1,n}return _inherits(t,e),_createClass(t,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=PC(e)}}]),t}(e)}(function(e){function t(){var e,n;_classCallCheck(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(i))))._disableRipple=!1,n}return _inherits(t,e),_createClass(t,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(e){this._disableRipple=PC(e)}}]),t}((function e(t){_classCallCheck(this,e),this._elementRef=t}))))),ME=function e(){_classCallCheck(this,e)};function HE(){return"undefined"!=typeof process}function BE(e){switch(e.length){case 0:return new _C;case 1:return e[0];default:return new bC(e)}}function VE(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=[],a=[],u=-1,l=null;if(r.forEach((function(e){var n=e.offset,r=n==u,c=r&&l||{};Object.keys(e).forEach((function(n){var r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case kC:a=i[n];break;case vC:a=s[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}c[r]=a})),r||a.push(c),l=c,u=n})),o.length){throw new Error("Unable to animate due to the following errors:".concat("\n - ").concat(o.join("\n - ")))}return a}function UE(e,t,n,r){switch(t){case"start":e.onStart((function(){return r(n&&KE(n,"start",e))}));break;case"done":e.onDone((function(){return r(n&&KE(n,"done",e))}));break;case"destroy":e.onDestroy((function(){return r(n&&KE(n,"destroy",e))}))}}function KE(e,t,n){var r=n.totalTime,i=zE(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),s=e._data;return null!=s&&(i._data=s),i}function zE(e,t,n,r){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",totalTime:arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,disabled:!!(arguments.length>6?arguments[6]:void 0)}}function qE(e,t,n){var r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function WE(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var GE=function(e,t){return!1},ZE=function(e,t){return!1},QE=function(e,t,n){return[]},$E=HE();($E||"undefined"!=typeof Element)&&(GE=function(e,t){return e.contains(t)},ZE=function(){if($E||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,n){return t.apply(e,[n])}:ZE}(),QE=function(e,t,n){var r=[];if(n)r.push.apply(r,_toConsumableArray(e.querySelectorAll(t)));else{var i=e.querySelector(t);i&&r.push(i)}return r});var JE=null,YE=!1;function XE(e){JE||(JE=("undefined"!=typeof document?document.body:null)||{},YE=!!JE.style&&"WebkitAppearance"in JE.style);var t=!0;return JE.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(t=e in JE.style)&&YE&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in JE.style),t}var ex=ZE,tx=GE,nx=QE;function rx(e){var t={};return Object.keys(e).forEach((function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]})),t}var ix=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return XE(e)}},{key:"matchesElement",value:function(e,t){return ex(e,t)}},{key:"containsElement",value:function(e,t){return tx(e,t)}},{key:"query",value:function(e,t,n){return nx(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return n||""}},{key:"animate",value:function(e,t,n,r,i){arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6];return new _C(n,r)}}]),e}(),sx=function(){var e=function e(){_classCallCheck(this,e)};return e.NOOP=new ix,e}(),ox=1e3;function ax(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ux(parseFloat(t[1]),t[2])}function ux(e,t){switch(t){case"s":return e*ox;default:return e}}function lx(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var r,i=0,s="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};r=ux(parseFloat(o[1]),o[2]);var a=o[3];null!=a&&(i=ux(parseFloat(a),o[4]));var u=o[5];u&&(s=u)}else r=e;if(!n){var l=!1,c=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&t.splice(c,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:r,delay:i,easing:s}}(e,t,n)}function cx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach((function(n){t[n]=e[n]})),t}function hx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var r in e)n[r]=e[r];else cx(e,n);return n}function fx(e,t,n){return n?t+":"+n+";":""}function dx(e){for(var t="",n=0;n<e.style.length;n++){var r=e.style.item(n);t+=fx(0,r,e.style.getPropertyValue(r))}for(var i in e.style)e.style.hasOwnProperty(i)&&!i.startsWith("_")&&(t+=fx(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[i]));e.setAttribute("style",t)}function px(e,t,n){e.style&&(Object.keys(t).forEach((function(r){var i=wx(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]})),HE()&&dx(e))}function vx(e,t){e.style&&(Object.keys(t).forEach((function(t){var n=wx(t);e.style[n]=""})),HE()&&dx(e))}function gx(e){return Array.isArray(e)?1==e.length?e[0]:gC(e):e}var yx=new RegExp("".concat("{{","\\s*(.+?)\\s*}}"),"g");function mx(e){var t=[];if("string"==typeof e){for(var n,r=e.toString();n=yx.exec(r);)t.push(n[1]);yx.lastIndex=0}return t}function _x(e,t,n){var r=e.toString(),i=r.replace(yx,(function(e,r){var i=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()}));return i==r?e:i}function bx(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var kx=/-+([a-z0-9])/g;function wx(e){return e.replace(kx,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()}))}function Cx(e,t){return 0===e||0===t}function Sx(e,t,n){var r=Object.keys(n);if(r.length&&t.length){var i=t[0],s=[];if(r.forEach((function(e){i.hasOwnProperty(e)||s.push(e),i[e]=n[e]})),s.length)for(var o=function(){var n=t[a];s.forEach((function(t){n[t]=xx(e,t)}))},a=1;a<t.length;a++)o()}return t}function Ex(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #".concat(t.type))}}function xx(e,t){return window.getComputedStyle(e)[t]}var Ax="*";var Tx=new Set(["true","1"]),Fx=new Set(["false","0"]);function Ix(e,t){var n=Tx.has(e)||Fx.has(e),r=Tx.has(t)||Fx.has(t);return function(i,s){var o=e==Ax||e==i,a=t==Ax||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?Tx.has(e):Fx.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?Tx.has(t):Fx.has(t)),o&&a}}var Px=new RegExp("s*".concat(":self","s*,?"),"g");function Ox(e,t,n){return new Rx(e).build(t,n)}var Rx=function(){function e(t){_classCallCheck(this,e),this._driver=t}return _createClass(e,[{key:"build",value:function(e,t){var n=new Dx(t);return this._resetContextStyleTimingState(n),Ex(this,gx(e),n)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var n=this,r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach((function(e){if(n._resetContextStyleTimingState(t),0==e.type){var a=e,u=a.name;u.toString().split(/\s*,\s*/).forEach((function(e){a.name=e,s.push(n.visitState(a,t))})),a.name=u}else if(1==e.type){var l=n.visitTransition(e,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(e,t){var n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){var i=new Set,s=r||{};if(n.styles.forEach((function(e){if(Nx(e)){var t=e;Object.keys(t).forEach((function(e){mx(t[e]).forEach((function(e){s.hasOwnProperty(e)||i.add(e)}))}))}})),i.size){var o=bx(i.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(o.join(", ")))}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var n,r,i,s=Ex(this,gx(e.animation),t);return{type:1,matchers:(n=e.expr,r=t.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(e){return function(e,t,n){if(":"==e[0]){var r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(e,'" is not supported')),t;var s=i[1],o=i[2],a=i[3];t.push(Ix(s,a)),"<"!=o[0]||s==Ax&&a==Ax||t.push(Ix(a,s))}(e,i,r)})):i.push(n),i),animation:s,queryCount:t.queryCount,depCount:t.depCount,options:jx(e.options)}}},{key:"visitSequence",value:function(e,t){var n=this;return{type:2,steps:e.steps.map((function(e){return Ex(n,e,t)})),options:jx(e.options)}}},{key:"visitGroup",value:function(e,t){var n=this,r=t.currentTime,i=0,s=e.steps.map((function(e){t.currentTime=r;var s=Ex(n,e,t);return i=Math.max(i,t.currentTime),s}));return t.currentTime=i,{type:3,steps:s,options:jx(e.options)}}},{key:"visitAnimate",value:function(e,t){var n,r=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return Lx(lx(e,t).duration,0,"");var r=e;if(r.split(/\s+/).some((function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)}))){var i=Lx(0,0,"");return i.dynamic=!0,i.strValue=r,i}return Lx((n=n||lx(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;var i=e.styles?e.styles:yC({});if(5==i.type)n=this.visitKeyframes(i,t);else{var s=e.styles,o=!1;if(!s){o=!0;var a={};r.easing&&(a.easing=r.easing),s=yC(a)}t.currentTime+=r.duration+r.delay;var u=this.visitStyle(s,t);u.isEmptyStep=o,n=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}},{key:"_makeStyleAst",value:function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach((function(e){"string"==typeof e?e==vC?n.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):n.push(e)})):n.push(e.styles);var r=!1,i=null;return n.forEach((function(e){if(Nx(e)){var t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(var s in t)if(t[s].toString().indexOf("{{")>=0){r=!0;break}}})),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(e,t){var n=this,r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach((function(e){"string"!=typeof e&&Object.keys(e).forEach((function(r){if(n._driver.validateStyleProperty(r)){var o,a,u,l,c,h=t.collectedStyles[t.currentQuerySelector],f=h[r],d=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(s,'ms" and "').concat(i,'ms"')),d=!1),s=f.startTime),d&&(h[r]={startTime:s,endTime:i}),t.options&&(o=e[r],a=t.options,u=t.errors,l=a.params||{},(c=mx(o)).length&&c.forEach((function(e){l.hasOwnProperty(e)||u.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))})))}else t.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(e,t){var n=this,r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,s=[],o=!1,a=!1,u=0,l=e.steps.map((function(e){var r=n._makeStyleAst(e,t),l=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach((function(e){if(Nx(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}}));else if(Nx(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(r.styles),c=0;return null!=l&&(i++,c=r.offset=l),a=a||c<0||c>1,o=o||c<u,u=c,s.push(c),r}));a&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");var c=e.steps.length,h=0;i>0&&i<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));var f=c-1,d=t.currentTime,p=t.currentAnimateTimings,v=p.duration;return l.forEach((function(e,i){var o=h>0?i==f?1:h*i:s[i],a=o*v;t.currentTime=d+p.delay+a,p.duration=a,n._validateStyleAst(e,t),e.offset=o,r.styles.push(e)})),r}},{key:"visitReference",value:function(e,t){return{type:8,animation:Ex(this,gx(e.animation),t),options:jx(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:jx(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:jx(e.options)}}},{key:"visitQuery",value:function(e,t){var n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;var i=_slicedToArray(function(e){var t=!!e.split(/\s*,\s*/).find((function(e){return":self"==e}));return t&&(e=e.replace(Px,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(e){return".ng-trigger-"+e.substr(1)})).replace(/:animating/g,".ng-animating"),t]}(e.selector),2),s=i[0],o=i[1];t.currentQuerySelector=n.length?n+" "+s:s,qE(t.collectedStyles,t.currentQuerySelector,{});var a=Ex(this,gx(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:jx(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:lx(e.timings,t.errors,!0);return{type:12,animation:Ex(this,gx(e.animation),t),timings:n,options:null}}}]),e}(),Dx=function e(t){_classCallCheck(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Nx(e){return!Array.isArray(e)&&"object"==typeof e}function jx(e){var t;return e?(e=cx(e)).params&&(e.params=(t=e.params)?cx(t):null):e={},e}function Lx(e,t,n){return{duration:e,delay:t,easing:n}}function Mx(e,t,n,r,i,s){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,subTimeline:arguments.length>7&&void 0!==arguments[7]&&arguments[7]}}var Hx=function(){function e(){_classCallCheck(this,e),this._map=new Map}return _createClass(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var n,r=this._map.get(e);r||this._map.set(e,r=[]),(n=r).push.apply(n,_toConsumableArray(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),Bx=new RegExp(":enter","g"),Vx=new RegExp(":leave","g");function Ux(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new Kx).buildKeyframes(e,t,n,r,i,s,o,a,u,l)}var Kx=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"buildKeyframes",value:function(e,t,n,r,i,s,o,a,u){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new Hx;var c=new qx(e,t,u,r,i,l,[]);c.options=a,c.currentTimeline.setStyles([s],null,c.errors,a),Ex(this,n,c);var h=c.timelines.filter((function(e){return e.containsAnimation()}));if(h.length&&Object.keys(o).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([o],null,c.errors,a)}return h.length?h.map((function(e){return e.buildKeyframes()})):[Mx(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var n=t.subInstructions.consume(t.element);if(n){var r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,n){var r=t.currentTimeline.currentTime,i=null!=n.duration?ax(n.duration):null,s=null!=n.delay?ax(n.delay):null;return 0!==i&&e.forEach((function(e){var n=t.appendInstructionToTimeline(e,i,s);r=Math.max(r,n.duration+n.delay)})),r}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),Ex(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var n=this,r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&((i=t.createSubContext(s)).transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=zx);var o=ax(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach((function(e){return Ex(n,e,i)})),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var n=this,r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?ax(e.options.delay):0;e.steps.forEach((function(o){var a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ex(n,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)})),r.forEach((function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)})),t.transformIntoNewTimeline(i),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var n=e.strValue;return lx(t.params?_x(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach((function(e){s.forwardTime((e.offset||0)*i),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()})),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+i),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var n=this,r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ax(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zx);var o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;var u=null;a.forEach((function(r,i){t.currentQueryIndex=i;var a=t.createSubContext(e.options,r);s&&a.delayNextStep(s),r===t.element&&(u=a.currentTimeline),Ex(n,e.animation,a),a.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,a.currentTimeline.currentTime)})),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var n=t.parentContext,r=t.currentTimeline,i=e.timings,s=Math.abs(i.duration),o=s*(t.currentQueryTotal-1),a=s*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}var u=t.currentTimeline;a&&u.delayNextStep(a);var l=u.currentTime;Ex(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}]),e}(),zx={},qx=function(){function e(t,n,r,i,s,o,a,u){_classCallCheck(this,e),this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Wx(this._driver,n,0),a.push(this.currentTimeline)}return _createClass(e,[{key:"updateOptions",value:function(e,t){var n=this;if(e){var r=e,i=this.options;null!=r.duration&&(i.duration=ax(r.duration)),null!=r.delay&&(i.delay=ax(r.delay));var s=r.params;if(s){var o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach((function(e){t&&o.hasOwnProperty(e)||(o[e]=_x(s[e],o,n.errors))}))}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach((function(e){n[e]=t[e]}))}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,s=new e(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=zx,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,n){var r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Gx(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,n,r,i,s){var o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(Bx,"."+this._enterClassName)).replace(Vx,"."+this._leaveClassName);var a=this._driver.query(this.element,e,1!=n);0!==n&&(a=n<0?a.slice(a.length+n,a.length):a.slice(0,n)),o.push.apply(o,_toConsumableArray(a))}return i||0!=o.length||s.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),o}},{key:"params",get:function(){return this.options.params}}]),e}(),Wx=function(){function e(t,n,r,i){_classCallCheck(this,e),this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach((function(e){t._backFill[e]=t._globalTimelineStyles[e]||vC,t._currentKeyframe[e]=vC})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,n,r){var i=this;t&&(this._previousKeyframe.easing=t);var s=r&&r.params||{},o=function(e,t){var n,r={};return e.forEach((function(e){"*"===e?(n=n||Object.keys(t)).forEach((function(e){r[e]=vC})):hx(e,!1,r)})),r}(e,this._globalTimelineStyles);Object.keys(o).forEach((function(e){var t=_x(o[e],s,n);i._pendingStyles[e]=t,i._localTimelineStyles.hasOwnProperty(e)||(i._backFill[e]=i._globalTimelineStyles.hasOwnProperty(e)?i._globalTimelineStyles[e]:vC),i._updateStyle(e,t)}))}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){e._currentKeyframe[n]=t[n]})),Object.keys(this._localTimelineStyles).forEach((function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])})))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach((function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach((function(n){var r=t._styleSummary[n],i=e._styleSummary[n];(!r||i.time>r.time)&&t._updateStyle(n,i.value)}))}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach((function(s,o){var a=hx(s,!0);Object.keys(a).forEach((function(e){var r=a[e];r==kC?t.add(e):r==vC&&n.add(e)})),r||(a.offset=o/e.duration),i.push(a)}));var s=t.size?bx(t.values()):[],o=n.size?bx(n.values()):[];if(r){var a=i[0],u=cx(a);a.offset=0,u.offset=1,i=[a,u]}return Mx(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}}]),e}(),Gx=function(e){function t(e,n,r,i,s,o){var a,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,o.delay))).element=n,a.keyframes=r,a.preStyleProps=i,a.postStyleProps=s,a._stretchStartingKeyframe=u,a.timings={duration:o.duration,delay:o.delay,easing:o.easing},a}return _inherits(t,e),_createClass(t,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,n=t.delay,r=t.duration,i=t.easing;if(this._stretchStartingKeyframe&&n){var s=[],o=r+n,a=n/o,u=hx(e[0],!1);u.offset=0,s.push(u);var l=hx(e[0],!1);l.offset=Zx(a),s.push(l);for(var c=e.length-1,h=1;h<=c;h++){var f=hx(e[h],!1);f.offset=Zx((n+f.offset*r)/o),s.push(f)}r=o,n=0,i="",e=s}return Mx(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),t}(Wx);function Zx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,t-1);return Math.round(e*n)/n}var Qx,$x,Jx=function e(){_classCallCheck(this,e)},Yx=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"normalizePropertyName",value:function(e,t){return wx(e)}},{key:"normalizeStyleValue",value:function(e,t,n,r){var i="",s=n.toString().trim();if(Xx[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&r.push("Please provide a CSS unit value for ".concat(e,":").concat(n))}return s+i}}]),t}(Jx),Xx=(Qx="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),$x={},Qx.forEach((function(e){return $x[e]=!0})),$x);function eA(e,t,n,r,i,s,o,a,u,l,c,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:f}}var tA={},nA=function(){function e(t,n,r){_classCallCheck(this,e),this._triggerName=t,this.ast=n,this._stateStyles=r}return _createClass(e,[{key:"match",value:function(e,t,n,r){return function(e,t,n,r,i){return e.some((function(e){return e(t,n,r,i)}))}(this.ast.matchers,e,t,n,r)}},{key:"buildStyles",value:function(e,t,n){var r=this._stateStyles["*"],i=this._stateStyles[e],s=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):s}},{key:"build",value:function(e,t,n,r,i,s,o,a,u,l){var c=[],h=this.ast.options&&this.ast.options.params||tA,f=this.buildStyles(n,o&&o.params||tA,c),d=a&&a.params||tA,p=this.buildStyles(r,d,c),v=new Set,g=new Map,y=new Map,m="void"===r,_={params:Object.assign({},h,d)},b=l?[]:Ux(e,t,this.ast.animation,i,s,f,p,_,u,c),k=0;if(b.forEach((function(e){k=Math.max(e.duration+e.delay,k)})),c.length)return eA(t,this._triggerName,n,r,m,f,p,[],[],g,y,k,c);b.forEach((function(e){var n=e.element,r=qE(g,n,{});e.preStyleProps.forEach((function(e){return r[e]=!0}));var i=qE(y,n,{});e.postStyleProps.forEach((function(e){return i[e]=!0})),n!==t&&v.add(n)}));var w=bx(v.values());return eA(t,this._triggerName,n,r,m,f,p,b,w,g,y,k)}}]),e}(),rA=function(){function e(t,n){_classCallCheck(this,e),this.styles=t,this.defaultParams=n}return _createClass(e,[{key:"buildStyles",value:function(e,t){var n={},r=cx(this.defaultParams);return Object.keys(e).forEach((function(t){var n=e[t];null!=n&&(r[t]=n)})),this.styles.styles.forEach((function(e){if("string"!=typeof e){var i=e;Object.keys(i).forEach((function(e){var s=i[e];s.length>1&&(s=_x(s,r,t)),n[e]=s}))}})),n}}]),e}(),iA=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.name=t,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(e){r.states[e.name]=new rA(e.style,e.options&&e.options.params||{})})),sA(this.states,"true","1"),sA(this.states,"false","0"),n.transitions.forEach((function(e){r.transitionFactories.push(new nA(t,e,r.states))})),this.fallbackTransition=new nA(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(e,[{key:"matchTransition",value:function(e,t,n,r){return this.transitionFactories.find((function(i){return i.match(e,t,n,r)}))||null}},{key:"matchStyles",value:function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}},{key:"containsQueries",get:function(){return this.ast.queryCount>0}}]),e}();function sA(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var oA=new Hx,aA=function(){function e(t,n,r){_classCallCheck(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _createClass(e,[{key:"register",value:function(e,t){var n=[],r=Ox(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[e]=r}},{key:"_buildPlayer",value:function(e,t,n){var r=e.element,i=VE(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=[],o=this._animations[e],a=new Map;if(o?(n=Ux(this._driver,t,o,"ng-enter","ng-leave",{},{},i,oA,s)).forEach((function(e){var t=qE(a,e.element,{});e.postStyleProps.forEach((function(e){return t[e]=null}))})):(s.push("The requested animation doesn't exist or has already been destroyed"),n=[]),s.length)throw new Error("Unable to create the animation due to the following errors: ".concat(s.join("\n")));a.forEach((function(e,t){Object.keys(e).forEach((function(n){e[n]=r._driver.computeStyle(t,n,vC)}))}));var u=BE(n.map((function(e){var t=a.get(e.element);return r._buildPlayer(e,{},t)})));return this._playersById[e]=u,u.onDestroy((function(){return r.destroy(e)})),this.players.push(u),u}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by ".concat(e));return t}},{key:"listen",value:function(e,t,n,r){var i=zE(t,"","","");return UE(this._getPlayer(e),n,i,r),function(){}}},{key:"command",value:function(e,t,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,r[0]||{});else this.register(e,r[0])}}]),e}(),uA=[],lA={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cA={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hA="__ng_removed",fA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,e),this.namespaceId=n;var r,i=t&&t.hasOwnProperty("value");if(this.value=null!=(r=i?t.value:t)?r:null,i){var s=cx(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}return _createClass(e,[{key:"absorbOptions",value:function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach((function(e){null==n[e]&&(n[e]=t[e])}))}}},{key:"params",get:function(){return this.options.params}}]),e}(),dA=new fA("void"),pA=function(){function e(t,n,r){_classCallCheck(this,e),this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,wA(n,this._hostClassName)}return _createClass(e,[{key:"listen",value:function(e,t,n,r){var i,s=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(t,'" is not supported!'));var o=qE(this._elementListeners,e,[]),a={name:t,phase:n,callback:r};o.push(a);var u=qE(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(wA(e,"ng-trigger"),wA(e,"ng-trigger-"+t),u[t]=dA),function(){s._engine.afterFlush((function(){var e=o.indexOf(a);e>=0&&o.splice(e,1),s._triggers[t]||delete u[t]}))}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=this._getTrigger(t),o=new gA(this.id,t,e),a=this._engine.statesByElement.get(e);a||(wA(e,"ng-trigger"),wA(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,a={}));var u=a[t],l=new fA(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),a[t]=l,u||(u=dA),"void"===l.value||u.value!==l.value){var c=qE(this._engine.playersByElement,e,[]);c.forEach((function(e){e.namespaceId==r.id&&e.triggerName==t&&e.queued&&e.destroy()}));var h=s.matchTransition(u.value,l.value,e,l.params),f=!1;if(!h){if(!i)return;h=s.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:u,toState:l,player:o,isFallbackTransition:f}),f||(wA(e,"ng-animate-queued"),o.onStart((function(){CA(e,"ng-animate-queued")}))),o.onDone((function(){var t=r.players.indexOf(o);t>=0&&r.players.splice(t,1);var n=r._engine.playersByElement.get(e);if(n){var i=n.indexOf(o);i>=0&&n.splice(i,1)}})),this.players.push(o),c.push(o),o}if(!function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var s=n[i];if(!t.hasOwnProperty(s)||e[s]!==t[s])return!1}return!0}(u.params,l.params)){var d=[],p=s.matchStyles(u.value,u.params,d),v=s.matchStyles(l.value,l.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush((function(){vx(e,p),px(e,v)}))}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach((function(t,n){delete t[e]})),this._elementListeners.forEach((function(n,r){t._elementListeners.set(r,n.filter((function(t){return t.name!=e})))}))}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach((function(e){return e.destroy()})),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._engine.driver.query(e,".ng-trigger",!0).forEach((function(e){if(!e[hA]){var r=n._engine.fetchNamespacesByElement(e);r.size?r.forEach((function(n){return n.triggerLeaveAnimation(e,t,!1,!0)})):n.clearElementCache(e)}}))}},{key:"triggerLeaveAnimation",value:function(e,t,n,r){var i=this,s=this._engine.statesByElement.get(e);if(s){var o=[];if(Object.keys(s).forEach((function(t){if(i._triggers[t]){var n=i.trigger(e,t,"void",r);n&&o.push(n)}})),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&BE(o).onDone((function(){return i._engine.processLeaveNode(e)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,n=this._elementListeners.get(e);if(n){var r=new Set;n.forEach((function(n){var i=n.name;if(!r.has(i)){r.add(i);var s=t._triggers[i].fallbackTransition,o=t._engine.statesByElement.get(e)[i]||dA,a=new fA("void"),u=new gA(t.id,i,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(e,t){var n=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),!this.triggerLeaveAnimation(e,t,!0)){var i=!1;if(r.totalAnimations){var s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else for(var o=e;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}this.prepareLeaveAnimationListeners(e),i?r.markElementAsRemoved(this.id,e,!1,t):(r.afterFlush((function(){return n.clearElementCache(e)})),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}},{key:"insertNode",value:function(e,t){wA(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,n=[];return this._queue.forEach((function(r){var i=r.player;if(!i.destroyed){var s=r.element,o=t._elementListeners.get(s);o&&o.forEach((function(t){if(t.name==r.triggerName){var n=zE(s,r.triggerName,r.fromState.value,r.toState.value);n._data=e,UE(r.player,t.phase,n,t.callback)}})),i.markedForDestroy?t._engine.afterFlush((function(){i.destroy()})):n.push(r)}})),this._queue=[],n.sort((function(e,n){var r=e.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:t._engine.driver.containsElement(e.element,n.element)?1:-1}))}},{key:"destroy",value:function(e){this.players.forEach((function(e){return e.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),!!this._queue.find((function(t){return t.element===e}))||t}}]),e}(),vA=function(){function e(t,n,r){_classCallCheck(this,e),this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return _createClass(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"createNamespace",value:function(e,t){var n=new pA(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}},{key:"_balanceNamespaceList",value:function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}},{key:"registerTrigger",value:function(e,t,n){var r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush((function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);t>=0&&n._namespaceList.splice(t,1)})),this.afterFlushAnimationsDone((function(){return r.destroy(t)}))}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var s=n[r[i]].namespaceId;if(s){var o=this._fetchNamespace(s);o&&t.add(o)}}return t}},{key:"trigger",value:function(e,t,n,r){if(yA(t)){var i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}},{key:"insertNode",value:function(e,t,n,r){if(yA(t)){var i=t[hA];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),wA(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),CA(e,"ng-animate-disabled"))}},{key:"removeNode",value:function(e,t,n,r){if(yA(t)){var i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){var s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}}else this._onRemovalComplete(t,r)}},{key:"markElementAsRemoved",value:function(e,t,n,r){this.collectedLeaveElements.push(t),t[hA]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,n,r,i){return yA(t)?this._fetchNamespace(e).listen(t,n,r,i):function(){}}},{key:"_buildInstruction",value:function(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}},{key:"destroyInnerAnimations",value:function(e){var t=this,n=this.driver.query(e,".ng-trigger",!0);n.forEach((function(e){return t.destroyActiveAnimationsForElement(e)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,".ng-animating",!0)).forEach((function(e){return t.finishActiveQueriedAnimationOnElement(e)}))}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach((function(e){e.queued?e.markedForDestroy=!0:e.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach((function(e){return e.finish()}))}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise((function(t){if(e.players.length)return BE(e.players).onDone((function(){return t()}));t()}))}},{key:"processLeaveNode",value:function(e){var t=this,n=e[hA];if(n&&n.setForRemoval){if(e[hA]=lA,n.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach((function(e){t.markElementAsDisabled(e,!1)}))}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(t,n){return e._balanceNamespaceList(t,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)wA(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(var s=0;s<i.length;s++)i[s]()}}else for(var o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(e){return e()})),this._flushFns=[],this._whenQuietFns.length){var a=this._whenQuietFns;this._whenQuietFns=[],n.length?BE(n).onDone((function(){a.forEach((function(e){return e()}))})):a.forEach((function(e){return e()}))}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(e.join("\n")))}},{key:"_flushAnimations",value:function(e,t){var n=this,r=new Hx,i=[],s=new Map,o=[],a=new Map,u=new Map,l=new Map,c=new Set;this.disabledNodes.forEach((function(e){c.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),r=0;r<t.length;r++)c.add(t[r])}));var h=this.bodyNode,f=Array.from(this.statesByElement.keys()),d=bA(f,this.collectedEnterElements),p=new Map,v=0;d.forEach((function(e,t){var n="ng-enter"+v++;p.set(t,n),e.forEach((function(e){return wA(e,n)}))}));for(var g=[],y=new Set,m=new Set,_=0;_<this.collectedLeaveElements.length;_++){var b=this.collectedLeaveElements[_],k=b[hA];k&&k.setForRemoval&&(g.push(b),y.add(b),k.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach((function(e){return y.add(e)})):m.add(b))}var w=new Map,C=bA(f,Array.from(y));C.forEach((function(e,t){var n="ng-leave"+v++;w.set(t,n),e.forEach((function(e){return wA(e,n)}))})),e.push((function(){d.forEach((function(e,t){var n=p.get(t);e.forEach((function(e){return CA(e,n)}))})),C.forEach((function(e,t){var n=w.get(t);e.forEach((function(e){return CA(e,n)}))})),g.forEach((function(e){n.processLeaveNode(e)}))}));for(var S=[],E=[],x=this._namespaceList.length-1;x>=0;x--)this._namespaceList[x].drainQueuedTransitions(t).forEach((function(e){var t=e.player,s=e.element;if(S.push(t),n.collectedEnterElements.length){var c=s[hA];if(c&&c.setForMove)return void t.destroy()}var f=!h||!n.driver.containsElement(h,s),d=w.get(s),v=p.get(s),g=n._buildInstruction(e,r,v,d,f);if(!g.errors||!g.errors.length)return f?(t.onStart((function(){return vx(s,g.fromStyles)})),t.onDestroy((function(){return px(s,g.toStyles)})),void i.push(t)):e.isFallbackTransition?(t.onStart((function(){return vx(s,g.fromStyles)})),t.onDestroy((function(){return px(s,g.toStyles)})),void i.push(t)):(g.timelines.forEach((function(e){return e.stretchStartingKeyframe=!0})),r.append(s,g.timelines),o.push({instruction:g,player:t,element:s}),g.queriedElements.forEach((function(e){return qE(a,e,[]).push(t)})),g.preStyleProps.forEach((function(e,t){var n=Object.keys(e);if(n.length){var r=u.get(t);r||u.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))}})),void g.postStyleProps.forEach((function(e,t){var n=Object.keys(e),r=l.get(t);r||l.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))})));E.push(g)}));if(E.length){var A=[];E.forEach((function(e){A.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach((function(e){return A.push("- ".concat(e,"\n"))}))})),S.forEach((function(e){return e.destroy()})),this.reportError(A)}var T=new Map,F=new Map;o.forEach((function(e){var t=e.element;r.has(t)&&(F.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,T))})),i.forEach((function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach((function(e){qE(T,t,[]).push(e),e.destroy()}))}));var I=g.filter((function(e){return EA(e,u,l)})),P=new Map;_A(P,this.driver,m,l,vC).forEach((function(e){EA(e,u,l)&&I.push(e)}));var O=new Map;d.forEach((function(e,t){_A(O,n.driver,new Set(e),u,kC)})),I.forEach((function(e){var t=P.get(e),n=O.get(e);P.set(e,Object.assign({},t,n))}));var R=[],D=[],N={};o.forEach((function(e){var t=e.element,o=e.player,a=e.instruction;if(r.has(t)){if(c.has(t))return o.onDestroy((function(){return px(t,a.toStyles)})),o.disabled=!0,o.overrideTotalTime(a.totalTime),void i.push(o);var u=N;if(F.size>1){for(var l=t,h=[];l=l.parentNode;){var f=F.get(l);if(f){u=f;break}h.push(l)}h.forEach((function(e){return F.set(e,u)}))}var d=n._buildAnimation(o.namespaceId,a,T,s,O,P);if(o.setRealPlayer(d),u===N)R.push(o);else{var p=n.playersByElement.get(u);p&&p.length&&(o.parentPlayer=BE(p)),i.push(o)}}else vx(t,a.fromStyles),o.onDestroy((function(){return px(t,a.toStyles)})),D.push(o),c.has(t)&&i.push(o)})),D.forEach((function(e){var t=s.get(e.element);if(t&&t.length){var n=BE(t);e.setRealPlayer(n)}})),i.forEach((function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()}));for(var j=0;j<g.length;j++){var L=g[j],M=L[hA];if(CA(L,"ng-leave"),!M||!M.hasAnimation){var H=[];if(a.size){var B=a.get(L);B&&B.length&&H.push.apply(H,_toConsumableArray(B));for(var V=this.driver.query(L,".ng-animating",!0),U=0;U<V.length;U++){var K=a.get(V[U]);K&&K.length&&H.push.apply(H,_toConsumableArray(K))}}var z=H.filter((function(e){return!e.destroyed}));z.length?SA(this,L,z):this.processLeaveNode(L)}}return g.length=0,R.forEach((function(e){n.players.push(e),e.onDone((function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)})),e.play()})),R}},{key:"elementContainsData",value:function(e,t){var n=!1,r=t[hA];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,n,r,i){var s=[];if(t){var o=this.playersByQueriedElement.get(e);o&&(s=o)}else{var a=this.playersByElement.get(e);if(a){var u=!i||"void"==i;a.forEach((function(e){e.queued||(u||e.triggerName==r)&&s.push(e)}))}}return(n||r)&&(s=s.filter((function(e){return!(n&&n!=e.namespaceId||r&&r!=e.triggerName)}))),s}},{key:"_beforeAnimationBuild",value:function(e,t,n){var r=this,i=t.element,s=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:t.triggerName,a=!0,u=!1,l=void 0;try{for(var c,h=function(){var e=c.value.element,a=e!==i,u=qE(n,e,[]);r._getPreviousPlayers(e,a,s,o,t.toState).forEach((function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),u.push(e)}))},f=t.timelines[Symbol.iterator]();!(a=(c=f.next()).done);a=!0)h()}catch(d){u=!0,l=d}finally{try{a||null==f.return||f.return()}finally{if(u)throw l}}vx(i,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,n,r,i,s){var o=this,a=t.triggerName,u=t.element,l=[],c=new Set,h=new Set,f=t.timelines.map((function(t){var f=t.element;c.add(f);var d=f[hA];if(d&&d.removedBeforeQueried)return new _C(t.duration,t.delay);var p,v,g=f!==u,y=(p=(n.get(f)||uA).map((function(e){return e.getRealPlayer()})),v=[],function e(t,n){for(var r=0;r<t.length;r++){var i=t[r];i instanceof bC?e(i.players,n):n.push(i)}}(p,v),v).filter((function(e){return!!e.element&&e.element===f})),m=i.get(f),_=s.get(f),b=VE(0,o._normalizer,0,t.keyframes,m,_),k=o._buildPlayer(t,b,y);if(t.subTimeline&&r&&h.add(f),g){var w=new gA(e,a,f);w.setRealPlayer(k),l.push(w)}return k}));l.forEach((function(e){qE(o.playersByQueriedElement,e.element,[]).push(e),e.onDone((function(){return function(e,t,n){var r;if(e instanceof Map){if(r=e.get(t)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){var s=r.indexOf(n);r.splice(s,1)}0==r.length&&delete e[t]}return r}(o.playersByQueriedElement,e.element,e)}))})),c.forEach((function(e){return wA(e,"ng-animating")}));var d=BE(f);return d.onDestroy((function(){c.forEach((function(e){return CA(e,"ng-animating")})),px(u,t.toStyles)})),h.forEach((function(e){qE(r,e,[]).push(d)})),d}},{key:"_buildPlayer",value:function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new _C(e.duration,e.delay)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach((function(t){t.players.forEach((function(t){t.queued&&e.push(t)}))})),e}}]),e}(),gA=function(){function e(t,n,r){_classCallCheck(this,e),this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new _C,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach((function(n){t._queuedCallbacks[n].forEach((function(t){return UE(e,n,void 0,t)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart((function(){return n.triggerCallback("start")})),e.onDone((function(){return t.finish()})),e.onDestroy((function(){return t.destroy()}))}},{key:"_queueEvent",value:function(e,t){qE(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function yA(e){return e&&1===e.nodeType}function mA(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function _A(e,t,n,r,i){var s=[];n.forEach((function(e){return s.push(mA(e))}));var o=[];r.forEach((function(n,r){var s={};n.forEach((function(e){var n=s[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r[hA]=cA,o.push(r))})),e.set(r,s)}));var a=0;return n.forEach((function(e){return mA(e,s[a++])})),o}function bA(e,t){var n=new Map;if(e.forEach((function(e){return n.set(e,[])})),0==t.length)return n;var r=new Set(t),i=new Map;return t.forEach((function(e){var t=function e(t){if(!t)return 1;var s=i.get(t);if(s)return s;var o=t.parentNode;return s=n.has(o)?o:r.has(o)?1:e(o),i.set(t,s),s}(e);1!==t&&n.get(t).push(e)})),n}var kA="$$classes";function wA(e,t){if(e.classList)e.classList.add(t);else{var n=e[kA];n||(n=e[kA]={}),n[t]=!0}}function CA(e,t){if(e.classList)e.classList.remove(t);else{var n=e[kA];n&&delete n[t]}}function SA(e,t,n){BE(n).onDone((function(){return e.processLeaveNode(t)}))}function EA(e,t,n){var r=n.get(e);if(!r)return!1;var i=t.get(e);return i?r.forEach((function(e){return i.add(e)})):t.set(e,r),n.delete(e),!0}var xA=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.bodyNode=t,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new vA(t,n,r),this._timelineEngine=new aA(t,n,r),this._transitionEngine.onRemovalComplete=function(e,t){return i.onRemovalComplete(e,t)}}return _createClass(e,[{key:"registerTrigger",value:function(e,t,n,r,i){var s=e+"-"+r,o=this._triggerCache[s];if(!o){var a=[],u=Ox(this._driver,i,a);if(a.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(a.join("\n - ")));o=function(e,t){return new iA(e,t)}(r,u),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,r,o)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}},{key:"onRemove",value:function(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,t,n,r){if("@"==n.charAt(0)){var i=_slicedToArray(WE(n),2),s=i[0],o=i[1];this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}},{key:"listen",value:function(e,t,n,r,i){if("@"==n.charAt(0)){var s=_slicedToArray(WE(n),2),o=s[0],a=s[1];return this._timelineEngine.listen(o,t,a,i)}return this._transitionEngine.listen(e,t,n,r,i)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}}]),e}();function AA(e,t){var n=null,r=null;return Array.isArray(t)&&t.length?(n=FA(t[0]),t.length>1&&(r=FA(t[t.length-1]))):t&&(n=FA(t)),n||r?new TA(e,n,r):null}var TA=function(){var e=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;var i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}return _createClass(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&px(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(px(this._element,this._initialStyles),this._endStyles&&(px(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(vx(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vx(this._element,this._endStyles),this._endStyles=null),px(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function FA(e){for(var t=null,n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];IA(i)&&((t=t||{})[i]=e[i])}return t}function IA(e){return"display"===e||"position"===e}var PA="animation",OA="animationend",RA=function(){function e(t,n,r,i,s,o,a){var u=this;_classCallCheck(this,e),this._element=t,this._name=n,this._duration=r,this._delay=i,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return u._handleCallback(e)}}return _createClass(e,[{key:"apply",value:function(){var e,t,n;e=this._element,t="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=HA(e,"").trim()).length&&(function(e,t){for(var n=0;n<e.length;n++)e.charAt(n)}(n),t="".concat(n,", ").concat(t)),MA(e,"",t),LA(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){DA(this._element,this._name,"paused")}},{key:"resume",value:function(){DA(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=NA(this._element,this._name);this._position=e*this._duration,MA(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),LA(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var e,t,n,r;this._destroyed||(this._destroyed=!0,this.finish(),e=this._element,t=this._name,n=HA(e,"").split(","),(r=jA(n,t))>=0&&(n.splice(r,1),MA(e,"",n.join(","))))}}]),e}();function DA(e,t,n){MA(e,"PlayState",n,NA(e,t))}function NA(e,t){var n=HA(e,"");return n.indexOf(",")>0?jA(n.split(","),t):jA([n],t)}function jA(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function LA(e,t,n){n?e.removeEventListener(OA,t):e.addEventListener(OA,t)}function MA(e,t,n,r){var i=PA+t;if(null!=r){var s=e.style[i];if(s.length){var o=s.split(",");o[r]=n,n=o.join(",")}}e.style[i]=n}function HA(e,t){return e.style[PA+t]}var BA="linear",VA=function(){function e(t,n,r,i,s,o,a,u){_classCallCheck(this,e),this.element=t,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=a,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||BA,this.totalTime=i+s,this._buildStyler()}return _createClass(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new RA(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return e.finish()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(r){"offset"!=r&&(t[r]=n?e._finalStyles[r]:xx(e.element,r))}))}this.currentSnapshot=t}}]),e}(),UA=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).element=e,r._startingStyles={},r.__initialized=!1,r._styles=rx(n),r}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(t){e._startingStyles[t]=e.element.style[t]})),_get(_getPrototypeOf(t.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(t){return e.element.style.setProperty(t,e._styles[t])})),_get(_getPrototypeOf(t.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)})),this._startingStyles=null,_get(_getPrototypeOf(t.prototype),"destroy",this).call(this))}}]),t}(_C),KA=function(){function e(){_classCallCheck(this,e),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return XE(e)}},{key:"matchesElement",value:function(e,t){return ex(e,t)}},{key:"containsElement",value:function(e,t){return tx(e,t)}},{key:"query",value:function(e,t,n){return nx(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,n){n=n.map((function(e){return rx(e)}));var r="@keyframes ".concat(t," {\n"),i="";n.forEach((function(e){i=" ";var t=parseFloat(e.offset);r+="".concat(i).concat(100*t,"% {\n"),i+=" ",Object.keys(e).forEach((function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(t,": ").concat(n,";\n"))}})),r+="".concat(i,"}\n")})),r+="}\n";var s=document.createElement("style");return s.innerHTML=r,s}},{key:"animate",value:function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;o&&this._notifyFaultyScrubber();var a=s.filter((function(e){return e instanceof VA})),u={};Cx(n,r)&&a.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return u[e]=t[e]}))}));var l=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach((function(e){Object.keys(e).forEach((function(n){"offset"!=n&&"easing"!=n&&(t[n]=e[n])}))})),t}(t=Sx(e,t,u));if(0==n)return new UA(e,l);var c="".concat("gen_css_kf_").concat(this._count++),h=this.buildKeyframeElement(e,c,t);document.querySelector("head").appendChild(h);var f=AA(e,t),d=new VA(e,t,c,n,r,i,l,f);return d.onDestroy((function(){var e;(e=h).parentNode.removeChild(e)})),d}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),e}(),zA=function(){function e(t,n,r,i){_classCallCheck(this,e),this.element=t,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return e._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,n){return e.animate(t,n)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:xx(e.element,n))})),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"totalTime",get:function(){return this._delay+this._duration}}]),e}(),qA=function(){function e(){_classCallCheck(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(WA().toString()),this._cssKeyframesDriver=new KA}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return XE(e)}},{key:"matchesElement",value:function(e,t){return ex(e,t)}},{key:"containsElement",value:function(e,t){return tx(e,t)}},{key:"query",value:function(e,t,n){return nx(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,s);var a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);var u={},l=s.filter((function(e){return e instanceof zA}));Cx(n,r)&&l.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return u[e]=t[e]}))}));var c=AA(e,t=Sx(e,t=t.map((function(e){return hx(e,!1)})),u));return new zA(e,t,a,c)}}]),e}();function WA(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var GA=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._nextAnimationId=0,r._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ze.None,styles:[],data:{animation:[]}}),r}return _inherits(t,e),_createClass(t,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?gC(e):e;return $A(this._renderer,null,t,"register",[n]),new ZA(t,this._renderer)}}]),t}(dC),ZA=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._id=e,r._renderer=n,r}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t){return new QA(this._id,e,t||{},this._renderer)}}]),t}(pC),QA=function(){function e(t,n,r,i){_classCallCheck(this,e),this.id=t,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _createClass(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $A(this._renderer,this.element,this.id,e,n)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){return 0}}]),e}();function $A(e,t,n,r,i){return e.setProperty(t,"@@".concat(n,":").concat(r),i)}var JA=function(){function e(t,n,r){_classCallCheck(this,e),this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return _createClass(e,[{key:"createRenderer",value:function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var i=this._rendererCache.get(r);return i||(i=new YA("",r,this.engine),this._rendererCache.set(r,i)),i}var s=t.id,o=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(o,e),t.data.animation.forEach((function(t){return n.engine.registerTrigger(s,o,e,t.name,t)})),new XA(this,o,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then((function(){e._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(e,t,n){var r=this;e>=0&&e<this._microtaskId?this._zone.run((function(){return t(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){r._zone.run((function(){r._animationCallbacksBuffer.forEach((function(e){var t=_slicedToArray(e,2);(0,t[0])(t[1])})),r._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([t,n]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}(),YA=function(){function e(t,n,r){_classCallCheck(this,e),this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return _createClass(e,[{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}},{key:"removeChild",value:function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}},{key:"data",get:function(){return this.delegate.data}}]),e}(),XA=function(e){function t(e,n,r,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n,r,i))).factory=e,s.namespaceId=n,s}return _inherits(t,e),_createClass(t,[{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){var r,i,s=this;if("@"==t.charAt(0)){var o,a=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),u=t.substr(1),l="";return"@"!=u.charAt(0)&&(i=(r=u).indexOf("."),u=(o=_slicedToArray([r.substring(0,i),r.substr(i+1)],2))[0],l=o[1]),this.engine.listen(this.namespaceId,a,u,l,(function(e){s.factory.scheduleListenerCallback(e._data||-1,n,e)}))}return this.delegate.listen(e,t,n)}}]),t}(YA),eT=function(e){function t(e,n,r){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e.body,n,r))}return _inherits(t,e),t}(xA);function tT(){return"function"==typeof WA()?new qA:new KA}function nT(){return new Yx}function rT(e,t,n){return new JA(e,t,n)}var iT=new Ie("AnimationModuleType"),sT=function e(){_classCallCheck(this,e)},oT=nr({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function aT(e){return go(2,[to(671088640,1,{ripple:0}),(e()(),$s(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),oo(null,0),(e()(),$s(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),fi(4,212992,[[1,4]],0,RE,[fn,fs,zC,[2,OE],[2,iT]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(e()(),$s(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],(function(e,t){var n=t.component;e(t,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())}),(function(e,t){var n=t.component;e(t,3,0,n.isRoundButton||n.isIconButton,Xr(t,4).unbounded)}))}var uT=nr({encapsulation:2,styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}@media (-ms-high-contrast:active){.mat-snack-bar-container{border:solid 1px}}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"void, hidden",styles:{type:6,styles:{transform:"scale(0.8)",opacity:0},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)",opacity:1},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void, * => hidden",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"75ms cubic-bezier(0.4, 0.0, 1, 1)"},options:null}],options:{}}]}});function lT(e){return go(0,[(e()(),Qs(0,null,null,0))],null,null)}function cT(e){return go(0,[to(402653184,1,{_portalOutlet:0}),(e()(),Qs(16777216,null,null,1,null,lT)),fi(2,212992,[[1,4]],0,TC,[un,Ln],{portal:[0,"portal"]},null)],(function(e,t){e(t,2,0,"")}),null)}var hT=Ur("snack-bar-container",vE,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"snack-bar-container",[["class","mat-snack-bar-container"]],[[1,"role",0],[40,"@state",0]],[["component","@state.done"]],(function(e,t,n){var r=!0;return"component:@state.done"===t&&(r=!1!==Xr(e,1).onAnimationEnd(n)&&r),r}),cT,uT)),fi(1,180224,null,0,vE,[fs,fn,Rt,dE],null,null)],null,(function(e,t){e(t,0,0,Xr(t,1)._role,Xr(t,1)._animationState)}))}),{},{},[]),fT=nr({encapsulation:2,styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}"],data:{}});function dT(e){return go(0,[(e()(),$s(0,0,null,null,3,"div",[["class","mat-simple-snackbar-action"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.action()&&r),r}),aT,oT)),fi(2,180224,null,0,LE,[fn,XS,[2,iT]],null,null),(e()(),fo(3,0,["",""]))],null,(function(e,t){var n=t.component;e(t,1,0,Xr(t,2).disabled||null,"NoopAnimations"===Xr(t,2)._animationMode),e(t,3,0,n.data.action)}))}function pT(e){return go(2,[(e()(),$s(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""])),(e()(),Qs(16777216,null,null,1,null,dT)),fi(3,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.component.hasAction)}),(function(e,t){e(t,1,0,t.component.data.message)}))}var vT=Ur("simple-snack-bar",pE,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"simple-snack-bar",[["class","mat-simple-snackbar"]],null,null,null,pT,fT)),fi(1,49152,null,0,pE,[hE,fE],null,null)],null,null)}),{},{},[]);function gT(e){throw Error("A drawer was already declared for 'position=\"".concat(e,"\"'"))}var yT=new Ie("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),mT=function(e){function t(e,n,r,i,s){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,r,i,s)))._changeDetectorRef=e,o._container=n,o}return _inherits(t,e),_createClass(t,[{key:"ngAfterContentInit",value:function(){var e=this;this._container._contentMarginChanges.subscribe((function(){e._changeDetectorRef.markForCheck()}))}}]),t}(XC),_T=function(){function e(t,n,r,i,s,o){var a=this;_classCallCheck(this,e),this._elementRef=t,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=i,this._ngZone=s,this._doc=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._autoFocus=!0,this._animationStarted=new P,this._animationEnd=new P,this._animationState="void",this.openedChange=new Ni(!0),this._destroyed=new P,this.onPositionChanged=new Ni,this._modeChanged=new P,this._opened=!1,this.openedChange.subscribe((function(e){e?(a._doc&&(a._elementFocusedBeforeDrawerWasOpened=a._doc.activeElement),a._isFocusTrapEnabled&&a._focusTrap&&a._trapFocus()):a._restoreFocus()})),this._ngZone.runOutsideAngular((function(){Yk(a._elementRef.nativeElement,"keydown").pipe(Ju((function(e){return e.keyCode===nS&&!a.disableClose&&!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.some((function(t){return e[t]})):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}(e)})),mh(a._destroyed)).subscribe((function(e){return a._ngZone.run((function(){a.close(),e.stopPropagation(),e.preventDefault()}))}))})),this._animationEnd.pipe(kh((function(e,t){return e.fromState===t.fromState&&e.toState===t.toState}))).subscribe((function(e){var t=e.fromState,n=e.toState;(0===n.indexOf("open")&&"void"===t||"void"===n&&0===t.indexOf("open"))&&a.openedChange.emit(a._opened)}))}return _createClass(e,[{key:"_trapFocus",value:function(){var e=this;this.autoFocus&&this._focusTrap.focusInitialElementWhenReady().then((function(t){t||"function"!=typeof e._elementRef.nativeElement.focus||e._elementRef.nativeElement.focus()}))}},{key:"_restoreFocus",value:function(){if(this.autoFocus){var e=this._doc&&this._doc.activeElement;e&&this._elementRef.nativeElement.contains(e)&&(this._elementFocusedBeforeDrawerWasOpened instanceof HTMLElement?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null}}},{key:"ngAfterContentInit",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}},{key:"ngAfterContentChecked",value:function(){this._platform.isBrowser&&(this._enableAnimations=!0)}},{key:"ngOnDestroy",value:function(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(e){return this.toggle(!0,e)}},{key:"close",value:function(){return this.toggle(!1)}},{key:"toggle",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"program";return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=n):(this._animationState="void",this._restoreFocus()),this._updateFocusTrapState(),new Promise((function(t){e.openedChange.pipe(cc(1)).subscribe((function(e){return t(e?"open":"close")}))}))}},{key:"_updateFocusTrapState",value:function(){this._focusTrap&&(this._focusTrap.enabled=this._isFocusTrapEnabled)}},{key:"_animationStartListener",value:function(e){this._animationStarted.next(e)}},{key:"_animationDoneListener",value:function(e){this._animationEnd.next(e)}},{key:"position",get:function(){return this._position},set:function(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}},{key:"disableClose",get:function(){return this._disableClose},set:function(e){this._disableClose=PC(e)}},{key:"autoFocus",get:function(){return this._autoFocus},set:function(e){this._autoFocus=PC(e)}},{key:"_openedStream",get:function(){return this.openedChange.pipe(Ju((function(e){return e})),U((function(){})))}},{key:"openedStart",get:function(){return this._animationStarted.pipe(Ju((function(e){return e.fromState!==e.toState&&0===e.toState.indexOf("open")})),U((function(){})))}},{key:"_closedStream",get:function(){return this.openedChange.pipe(Ju((function(e){return!e})),U((function(){})))}},{key:"closedStart",get:function(){return this._animationStarted.pipe(Ju((function(e){return e.fromState!==e.toState&&"void"===e.toState})),U((function(){})))}},{key:"_isFocusTrapEnabled",get:function(){return this.opened&&"side"!==this.mode}},{key:"opened",get:function(){return this._opened},set:function(e){this.toggle(PC(e))}},{key:"_width",get:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}}]),e}(),bT=function(){function e(t,n,r,i,s){var o=this,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6?arguments[6]:void 0;_classCallCheck(this,e),this._dir=t,this._element=n,this._ngZone=r,this._changeDetectorRef=i,this._animationMode=u,this.backdropClick=new Ni,this._destroyed=new P,this._doCheckSubject=new P,this._contentMargins={left:null,right:null},this._contentMarginChanges=new P,t&&t.change.pipe(mh(this._destroyed)).subscribe((function(){o._validateDrawers(),o.updateContentMargins()})),s.change().pipe(mh(this._destroyed)).subscribe((function(){return o.updateContentMargins()})),this._autosize=a}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this._drawers.changes.pipe(hg(null)).subscribe((function(){e._validateDrawers(),e._drawers.forEach((function(t){e._watchDrawerToggle(t),e._watchDrawerPosition(t),e._watchDrawerMode(t)})),(!e._drawers.length||e._isDrawerOpen(e._start)||e._isDrawerOpen(e._end))&&e.updateContentMargins(),e._changeDetectorRef.markForCheck()})),this._doCheckSubject.pipe(RS(10),mh(this._destroyed)).subscribe((function(){return e.updateContentMargins()}))}},{key:"ngOnDestroy",value:function(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(){this._drawers.forEach((function(e){return e.open()}))}},{key:"close",value:function(){this._drawers.forEach((function(e){return e.close()}))}},{key:"updateContentMargins",value:function(){var e=this,t=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._width;else if("push"==this._left.mode){var r=this._left._width;t+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._width;else if("push"==this._right.mode){var i=this._right._width;n+=i,t-=i}n=n||null,(t=t||null)===this._contentMargins.left&&n===this._contentMargins.right||(this._contentMargins={left:t,right:n},this._ngZone.run((function(){return e._contentMarginChanges.next(e._contentMargins)})))}},{key:"ngDoCheck",value:function(){var e=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular((function(){return e._doCheckSubject.next()}))}},{key:"_watchDrawerToggle",value:function(e){var t=this;e._animationStarted.pipe(Ju((function(e){return e.fromState!==e.toState})),mh(this._drawers.changes)).subscribe((function(e){"open-instant"!==e.toState&&"NoopAnimations"!==t._animationMode&&t._element.nativeElement.classList.add("mat-drawer-transition"),t.updateContentMargins(),t._changeDetectorRef.markForCheck()})),"side"!==e.mode&&e.openedChange.pipe(mh(this._drawers.changes)).subscribe((function(){return t._setContainerClass(e.opened)}))}},{key:"_watchDrawerPosition",value:function(e){var t=this;e&&e.onPositionChanged.pipe(mh(this._drawers.changes)).subscribe((function(){t._ngZone.onMicrotaskEmpty.asObservable().pipe(cc(1)).subscribe((function(){t._validateDrawers()}))}))}},{key:"_watchDrawerMode",value:function(e){var t=this;e&&e._modeChanged.pipe(mh(X(this._drawers.changes,this._destroyed))).subscribe((function(){t.updateContentMargins(),t._changeDetectorRef.markForCheck()}))}},{key:"_setContainerClass",value:function(e){var t=this._element.nativeElement.classList,n="mat-drawer-container-has-open";e?t.add(n):t.remove(n)}},{key:"_validateDrawers",value:function(){var e=this;this._start=this._end=null,this._drawers.forEach((function(t){"end"==t.position?(null!=e._end&&gT("end"),e._end=t):(null!=e._start&&gT("start"),e._start=t)})),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}},{key:"_isPushed",value:function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}},{key:"_onBackdropClicked",value:function(){this.backdropClick.emit(),this._closeModalDrawer()}},{key:"_closeModalDrawer",value:function(){var e=this;[this._start,this._end].filter((function(t){return t&&!t.disableClose&&e._canHaveBackdrop(t)})).forEach((function(e){return e.close()}))}},{key:"_isShowingBackdrop",value:function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}},{key:"_canHaveBackdrop",value:function(e){return"side"!==e.mode||!!this._backdropOverride}},{key:"_isDrawerOpen",value:function(e){return null!=e&&e.opened}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"autosize",get:function(){return this._autosize},set:function(e){this._autosize=PC(e)}},{key:"hasBackdrop",get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(e){this._backdropOverride=null==e?null:PC(e)}},{key:"scrollable",get:function(){return this._userContent||this._content}}]),e}(),kT=function(e){function t(e,n,r,i,s){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,r,i,s))}return _inherits(t,e),t}(mT),wT=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments)))._fixedInViewport=!1,e._fixedTopGap=0,e._fixedBottomGap=0,e}return _inherits(t,e),_createClass(t,[{key:"fixedInViewport",get:function(){return this._fixedInViewport},set:function(e){this._fixedInViewport=PC(e)}},{key:"fixedTopGap",get:function(){return this._fixedTopGap},set:function(e){this._fixedTopGap=OC(e)}},{key:"fixedBottomGap",get:function(){return this._fixedBottomGap},set:function(e){this._fixedBottomGap=OC(e)}}]),t}(_T),CT=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(bT),ST=function e(){_classCallCheck(this,e)},ET=nr({encapsulation:2,styles:[],data:{}});function xT(e){return go(2,[oo(null,0)],null,null)}var AT=nr({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"none",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{"box-shadow":"none",visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function TT(e){return go(2,[(e()(),$s(0,0,null,null,1,"div",[["class","mat-drawer-inner-container"]],null,null,null,null,null)),oo(null,0)],null,null)}var FT=nr({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}@media (-ms-high-contrast:active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media (-ms-high-contrast:active){.mat-drawer.mat-drawer-end,[dir=rtl] .mat-drawer{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}"],data:{}});function IT(e){return go(0,[(e()(),$s(0,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component._onBackdropClicked()&&r),r}),null,null))],null,(function(e,t){e(t,0,0,t.component._isShowingBackdrop())}))}function PT(e){return go(0,[(e()(),$s(0,0,null,null,3,"mat-sidenav-content",[["cdkScrollable",""],["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,xT,ET)),fi(1,212992,null,0,XC,[fn,YC,fs,[2,bE]],null,null),fi(2,1294336,null,0,kT,[Rt,CT,fn,YC,fs],null,null),oo(0,2)],(function(e,t){e(t,1,0),e(t,2,0)}),(function(e,t){e(t,0,0,Xr(t,2)._container._contentMargins.left,Xr(t,2)._container._contentMargins.right)}))}function OT(e){return go(2,[to(671088640,1,{_userContent:0}),(e()(),Qs(16777216,null,null,1,null,IT)),fi(2,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),oo(null,0),oo(null,1),(e()(),Qs(16777216,null,null,1,null,PT)),fi(6,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.hasBackdrop),e(t,6,0,!n._content)}),null)}var RT=nr({encapsulation:0,styles:[[".app-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.mobile-nav[_ngcontent-%COMP%]{display:flex;align-items:center}button#open-navidation[_ngcontent-%COMP%]::after, button#open-navidation[_ngcontent-%COMP%]::before{background-color:unset}"]],data:{}});function DT(e){return go(0,[(e()(),$s(0,0,null,null,67,"nav",[["class","mdc-list"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,0,"hr",[["class","mdc-list-divider"]],null,null,null,null,null)),(e()(),$s(2,0,null,null,5,"a",[["class","mdc-list-item"],["routerLink","focus"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(3,671744,[[4,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(4,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,3,{links:1}),to(603979776,4,{linksWithHrefs:1}),(e()(),fo(-1,null,[" Jetzt "])),(e()(),$s(8,0,null,null,5,"a",[["class","mdc-list-item"],["routerLink","planner"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,9).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(9,671744,[[6,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(10,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,5,{links:1}),to(603979776,6,{linksWithHrefs:1}),(e()(),fo(-1,null,[" Planungsansicht "])),(e()(),$s(14,0,null,null,0,"hr",[["class","mdc-list-divider"]],null,null,null,null,null)),(e()(),$s(15,0,null,null,1,"h6",[["class","mdc-list-group__subheader"]],null,null,null,null,null)),(e()(),fo(-1,null,["Einstellungen"])),(e()(),$s(17,0,null,null,7,"a",[["class","mdc-list-item"],["routerLink","me"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,18).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(18,671744,[[8,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(19,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,7,{links:1}),to(603979776,8,{linksWithHrefs:1}),(e()(),$s(22,0,null,null,1,"i",[["class","material-icons mdc-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["settings"])),(e()(),fo(-1,null,[" \xdcbersicht "])),(e()(),$s(25,0,null,null,7,"a",[["class","mdc-list-item"],["routerLink","calendar/configure"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,26).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(26,671744,[[10,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(27,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,9,{links:1}),to(603979776,10,{linksWithHrefs:1}),(e()(),$s(30,0,null,null,1,"i",[["class","material-icons mdc-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["event"])),(e()(),fo(-1,null,[" Kalendereinstellungen "])),(e()(),$s(33,0,null,null,7,"a",[["class","mdc-list-item"],["routerLink","notifications"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,34).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(34,671744,[[12,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(35,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,11,{links:1}),to(603979776,12,{linksWithHrefs:1}),(e()(),$s(38,0,null,null,1,"i",[["class","material-icons mdc-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["notifications"])),(e()(),fo(-1,null,[" Benachrichtigseinstellungen "])),(e()(),$s(41,0,null,null,0,"hr",[["class","mdc-list-divider"]],null,null,null,null,null)),(e()(),$s(42,0,null,null,1,"h6",[["class","mdc-list-group__subheader"]],null,null,null,null,null)),(e()(),fo(-1,null,["Tools"])),(e()(),$s(44,0,null,null,7,"a",[["class","mdc-list-item"],["routerLink","/device/12345/log"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,45).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(45,671744,[[14,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(46,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,13,{links:1}),to(603979776,14,{linksWithHrefs:1}),(e()(),$s(49,0,null,null,1,"i",[["class","material-icons mdc-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["list"])),(e()(),fo(-1,null,[" Log "])),(e()(),$s(52,0,null,null,7,"a",[["class","mdc-list-item"],["routerLink","/calendar/view"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,53).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(53,671744,[[16,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(54,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,15,{links:1}),to(603979776,16,{linksWithHrefs:1}),(e()(),$s(57,0,null,null,1,"i",[["class","material-icons mdc-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["event"])),(e()(),fo(-1,null,[" Kalender-Debugger "])),(e()(),$s(60,0,null,null,7,"a",[["class","mdc-list-item"],["routerLink","/account-debugger"],["routerLinkActive","mdc-list-item--activated"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==Xr(e,61).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==(i.mobileQuery.matches&&Xr(e.parent,5).close())&&r),r}),null,null)),fi(61,671744,[[18,4]],0,z_,[U_,Rm,Sa],{routerLink:[0,"routerLink"]},null),fi(62,1720320,null,2,W_,[U_,fn,gn,[2,K_],[2,z_]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,17,{links:1}),to(603979776,18,{linksWithHrefs:1}),(e()(),$s(65,0,null,null,1,"i",[["class","material-icons mdc-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["account_circle"])),(e()(),fo(-1,null,[" Account-Debugger "]))],(function(e,t){e(t,3,0,"focus"),e(t,4,0,"mdc-list-item--activated"),e(t,9,0,"planner"),e(t,10,0,"mdc-list-item--activated"),e(t,18,0,"me"),e(t,19,0,"mdc-list-item--activated"),e(t,26,0,"calendar/configure"),e(t,27,0,"mdc-list-item--activated"),e(t,34,0,"notifications"),e(t,35,0,"mdc-list-item--activated"),e(t,45,0,"/device/12345/log"),e(t,46,0,"mdc-list-item--activated"),e(t,53,0,"/calendar/view"),e(t,54,0,"mdc-list-item--activated"),e(t,61,0,"/account-debugger"),e(t,62,0,"mdc-list-item--activated")}),(function(e,t){e(t,2,0,Xr(t,3).target,Xr(t,3).href),e(t,8,0,Xr(t,9).target,Xr(t,9).href),e(t,17,0,Xr(t,18).target,Xr(t,18).href),e(t,25,0,Xr(t,26).target,Xr(t,26).href),e(t,33,0,Xr(t,34).target,Xr(t,34).href),e(t,44,0,Xr(t,45).target,Xr(t,45).href),e(t,52,0,Xr(t,53).target,Xr(t,53).href),e(t,60,0,Xr(t,61).target,Xr(t,61).href)}))}function NT(e){return go(0,[(e()(),$s(0,0,null,null,5,"div",[["class","mobile-nav"]],null,null,null,null,null)),(e()(),$s(1,0,null,null,2,"button",[["aria-hidden","true"],["aria-label","Navigation \xf6ffnen"],["class","mdc-icon-button"],["id","open-navidation"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e.parent,5).toggle()&&r),r}),null,null)),(e()(),$s(2,0,null,null,1,"i",[["class","material-icons mdc-icon-button__icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["menu"])),(e()(),$s(4,0,null,null,1,"span",[["class","mdc-typography--headline5"]],null,null,null,null,null)),(e()(),fo(5,null,["",""]))],null,(function(e,t){e(t,5,0,t.component.pageTitle)}))}function jT(e){return go(0,[(e()(),$s(0,0,null,null,19,"mat-sidenav-container",[["class","app-container mat-drawer-container mat-sidenav-container"]],[[2,"mat-drawer-container-explicit-backdrop",null]],null,null,OT,FT)),fi(1,1490944,null,2,CT,[[2,bE],fn,fs,Rt,tS,yT,[2,iT]],{hasBackdrop:[0,"hasBackdrop"]},null),to(603979776,1,{_drawers:1}),to(603979776,2,{_content:0}),(e()(),$s(4,0,null,0,8,"mat-sidenav",[["class","mat-drawer mat-sidenav"],["tabIndex","-1"]],[[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-drawer-opened",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"],[40,"@transform",0]],[["component","@transform.start"],["component","@transform.done"]],(function(e,t,n){var r=!0;return"component:@transform.start"===t&&(r=!1!==Xr(e,5)._animationStartListener(n)&&r),"component:@transform.done"===t&&(r=!1!==Xr(e,5)._animationDoneListener(n)&&r),r}),TT,AT)),fi(5,3325952,[[1,4],["sidenav",4]],0,wT,[fn,GS,XS,zC,fs,[2,Ou]],{mode:[0,"mode"],opened:[1,"opened"]},null),(e()(),$s(6,0,null,0,6,"aside",[["class","mdc-drawer"]],null,null,null,null,null)),(e()(),$s(7,0,null,null,2,"div",[["class","mdc-drawer__header"]],null,null,null,null,null)),(e()(),$s(8,0,null,null,1,"h3",[["class","mdc-drawer__title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Digit"])),(e()(),$s(10,0,null,null,2,"div",[["class","mdv-drawer__content"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,DT)),fi(12,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),$s(13,0,null,1,6,"mat-sidenav-content",[["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,xT,ET)),fi(14,1294336,[[2,4]],0,kT,[Rt,CT,fn,YC,fs],null,null),(e()(),Qs(16777216,null,0,1,null,NT)),fi(16,16384,null,0,mu,[Ln,Nn],{ngIf:[0,"ngIf"]},null),(e()(),$s(17,0,null,0,2,"main",[],null,null,null,null,null)),(e()(),$s(18,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),fi(19,212992,null,0,Q_,[Z_,Ln,un,[8,null],Rt],null,null)],(function(e,t){var n=t.component;e(t,1,0,n.mobileQuery.matches),e(t,5,0,n.mobileQuery.matches?"over":"side",!n.mobileQuery.matches&&n.isLoggedIn),e(t,12,0,n.isLoggedIn),e(t,14,0),e(t,16,0,n.mobileQuery.matches),e(t,19,0)}),(function(e,t){e(t,0,0,Xr(t,1)._backdropOverride),e(t,4,0,null,"end"===Xr(t,5).position,"over"===Xr(t,5).mode,"push"===Xr(t,5).mode,"side"===Xr(t,5).mode,Xr(t,5).opened,Xr(t,5).fixedInViewport,Xr(t,5).fixedInViewport?Xr(t,5).fixedTopGap:null,Xr(t,5).fixedInViewport?Xr(t,5).fixedBottomGap:null,Xr(t,5)._animationState),e(t,13,0,Xr(t,14)._container._contentMargins.left,Xr(t,14)._container._contentMargins.right)}))}var LT,MT,HT,BT,VT,UT=Ur("app-root",Jv,(function(e){return go(0,[(e()(),$s(0,0,null,null,1,"app-root",[],null,null,null,jT,RT)),fi(1,180224,null,0,Jv,[Uc,U_,Rt,rE,gf],null,null)],null,null)}),{},{},[]),KT=function(){function e(t){_classCallCheck(this,e),this.oauthService=t}return _createClass(e,[{key:"intercept",value:function(e,t){return(e.url.startsWith(Uu)||e.url.startsWith(Vu)||e.url.startsWith(zu)||e.url.startsWith(Wu))&&this.oauthService.hasValidAccessToken()&&(e=e.clone({setHeaders:{Authorization:"Bearer ".concat(this.oauthService.getAccessToken())}})),t.handle(e)}}]),e}(),zT=function(){function e(t,n,r){_classCallCheck(this,e),this.path=t,this.queryParams=n,this.extras=r}return _createClass(e,null,[{key:"type",get:function(){return"[Router] Navigate"}}]),e}(),qT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";_classCallCheck(this,e),this.routerState=t,this.event=n,this.trigger=r}return _createClass(e,null,[{key:"type",get:function(){return"[Router] RouterNavigation"}}]),e}(),WT=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";_classCallCheck(this,e),this.routerState=t,this.storeState=n,this.event=r,this.trigger=i}return _createClass(e,null,[{key:"type",get:function(){return"[Router] RouterCancel"}}]),e}(),GT=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";_classCallCheck(this,e),this.routerState=t,this.storeState=n,this.event=r,this.trigger=i}return _createClass(e,null,[{key:"type",get:function(){return"[Router] RouterError"}}]),e}(),ZT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";_classCallCheck(this,e),this.routerState=t,this.event=n,this.trigger=r}return _createClass(e,null,[{key:"type",get:function(){return"[Router] RouterDataResolved"}}]),e}(),QT=function e(){_classCallCheck(this,e)},$T=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"serialize",value:function(e){return{root:this.serializeRoute(e.root),url:e.url}}},{key:"serializeRoute",value:function(e){var t=this,n=e.children.map((function(e){return t.serializeRoute(e)}));return{url:e.url,params:e.params,queryParams:e.queryParams,fragment:e.fragment,data:e.data,outlet:e.outlet,component:null,routeConfig:null,root:null,parent:null,firstChild:n[0],children:n,pathFromRoot:null,paramMap:e.paramMap,queryParamMap:e.queryParamMap,toString:e.toString}}}]),e}(),JT=(MT=LT=function(){function e(t,n,r,i,s,o,a){_classCallCheck(this,e),this._store=t,this._router=n,this._serializer=r,this._ngZone=i,this._urlSerializer=s,this._locationStrategy=o,this._location=a,this._trigger="none",this._routerState=null,this._storeState=null,this._lastRoutesRecognized=null,this.setUpStoreListener(),this.setUpRouterEventsListener(),this.checkInitialNavigationOnce()}return _createClass(e,[{key:"navigate",value:function(e,t){var n=this;return this._ngZone.run((function(){return n._router.navigate(t.path,Object.assign({queryParams:t.queryParams},t.extras))}))}},{key:"angularRouterAction",value:function(e,t){e.setState(Object.assign({},e.getState(),{trigger:t.trigger,state:t.routerState,navigationId:t.event.id}))}},{key:"setUpStoreListener",value:function(){var e=this;this._store.select(LT).subscribe((function(t){e.navigateIfNeeded(t)}))}},{key:"setUpRouterEventsListener",value:function(){var e=this;this._router.events.subscribe((function(t){t instanceof xy?e.navigationStart():t instanceof Iy?e._lastRoutesRecognized=t:t instanceof Oy&&t.shouldActivate?e.guardsCheckEnd(t):t instanceof Dy?e.dispatchRouterDataResolved(t):t instanceof Ty?(e.dispatchRouterCancel(t),e.reset()):t instanceof Fy?(e.dispatchRouterError(t),e.reset()):t instanceof Ay&&e.reset()}))}},{key:"navigationStart",value:function(){this._routerState=this._serializer.serialize(this._router.routerState.snapshot),"none"!==this._trigger&&(this._storeState=this._store.selectSnapshot(LT))}},{key:"shouldDispatchRouterNavigation",value:function(){return!this._storeState||"store"!==this._trigger}},{key:"navigateIfNeeded",value:function(e){var t=this;!this._storeState||!this._storeState.state||!e||"router"===e.trigger||this._router.url===this._storeState.state.url||(this._trigger="store",this._ngZone.run((function(){t._router.navigateByUrl(t._storeState.state.url)})))}},{key:"dispatchRouterNavigation",value:function(){var e=this._serializer.serialize(this._lastRoutesRecognized.state);this.dispatchRouterAction(new qT(e,new Iy(this._lastRoutesRecognized.id,this._lastRoutesRecognized.url,this._lastRoutesRecognized.urlAfterRedirects,e),this._trigger))}},{key:"dispatchRouterCancel",value:function(e){this.dispatchRouterAction(new WT(this._routerState,this._storeState,e,this._trigger)),this.reset()}},{key:"dispatchRouterError",value:function(e){this.dispatchRouterAction(new GT(this._routerState,this._storeState,new Fy(e.id,e.url,"".concat(e)),this._trigger))}},{key:"dispatchRouterAction",value:function(e){this._trigger="router";try{this._store.dispatch(e)}finally{this._trigger="none"}}},{key:"guardsCheckEnd",value:function(e){this._routerState=this._serializer.serialize(e.state),this.shouldDispatchRouterNavigation()&&this.dispatchRouterNavigation()}},{key:"dispatchRouterDataResolved",value:function(e){var t=this._serializer.serialize(e.state);this.dispatchRouterAction(new ZT(t,e,this._trigger))}},{key:"reset",value:function(){this._trigger="none",this._storeState=null,this._routerState=null}},{key:"checkInitialNavigationOnce",value:function(){var e=this;oh()||this._router.events.pipe(bc((function(e){return e instanceof Iy}))).subscribe((function(t){var n=t.url,r=e._location.normalize(e._locationStrategy.path(!0)),i=e._urlSerializer.parse(r);e._urlSerializer.serialize(i)!==n&&e._router.navigateByUrl(r)}))}}],[{key:"state",value:function(e){return e&&e.state}},{key:"url",value:function(e){return e&&e.state&&e.state.url}}]),e}(),Nl([Sf(zT),jl("design:type",Function),jl("design:paramtypes",[Object,zT]),jl("design:returntype",void 0)],MT.prototype,"navigate",null),Nl([Sf([qT,GT,WT,ZT]),jl("design:type",Function),jl("design:paramtypes",[Object,Object]),jl("design:returntype",void 0)],MT.prototype,"angularRouterAction",null),Nl([Tf(),jl("design:type",Function),jl("design:paramtypes",[Object]),jl("design:returntype",void 0)],MT,"state",null),Nl([Tf(),jl("design:type",Function),jl("design:paramtypes",[Object]),jl("design:returntype",Object)],MT,"url",null),LT=Nl([Ef({name:"router",defaults:{state:void 0,navigationId:void 0,trigger:"none"}})],MT)),YT=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(){return{ngModule:e,providers:[{provide:QT,useClass:$T}]}}}]),e}(),XT=function(){function e(t,n){_classCallCheck(this,e),this.oauthService=t,this.router=n}return _createClass(e,[{key:"canActivate",value:function(e,t){return!!this.oauthService.hasValidAccessToken()||(this.router.navigate(["login"],{queryParamsHandling:"merge"}),!1)}}]),e}(),eF={title:"Log"},tF=function e(){_classCallCheck(this,e)},nF={title:"Kalendereinstellungen"},rF={title:"Kalender-Debugger"},iF=function e(){_classCallCheck(this,e)},sF={title:"Einstellungen: \xdcbersicht"},oF={title:"Account-Debugger"},aF={title:"Benachrichtigungseinstellungen"},uF={title:"Jetzt"},lF={title:"Planungsansicht"},cF=function e(){_classCallCheck(this,e)},hF=function e(){_classCallCheck(this,e)},fF=function e(){_classCallCheck(this,e)},dF=new ka(Gu,[Jv],(function(e){return function(e){for(var t={},n=[],r=!1,i=0;i<e.length;i++){var s=e[i];s.token===Nt&&!0===s.value&&(r=!0),1073741824&s.flags&&n.push(s.token),s.index=i,t[Yn(s.token)]=s}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([Nr(512,un,ln,[[8,[_b,Sb,Ek,Pk,Vk,Zk,vw,ww,Bw,uC,fC,hT,vT,UT]],[3,un],ze]),Nr(4352,Gi,"de",[]),Nr(4608,lu,cu,[Gi,[2,uu]]),Nr(4608,xl,Al,[Ou,zi,Sl]),Nr(4608,Tl,Tl,[xl,El]),Nr(5120,Fc,Qc,[]),Nr(4608,wl,wl,[]),Nr(6144,kl,null,[wl]),Nr(4608,Cl,Cl,[kl]),Nr(6144,tl,null,[Cl]),Nr(4608,el,Fl,[tl,Lt]),Nr(4608,gl,gl,[el]),Nr(4608,Oc,Gc,[]),Nr(4608,Dc,Dc,[]),Nr(5120,Tc,Zc,[]),Nr(4608,Vc,$c,[]),Nr(135680,Uc,Uc,[fs,gl,[2,Fc],[2,Oc],[2,Hc],Dc,Tc,[2,Vc]]),Nr(4608,zc,qc,[]),Nr(5120,ml,(function(e,t,n,r,i,s){return[e,new Wc(t,n,r,i),new KT(s)]}),[Tl,Fc,Uc,zc,[2,Kc],Uc]),Nr(4608,Vb,Vb,[]),Nr(4608,If,If,[gl]),Nr(5120,Fi,Gs,[fs]),Nr(5120,Bi,Vi,[]),Nr(5120,In,qs,[]),Nr(5120,Pn,Ws,[]),Nr(4608,py,vy,[Ou]),Nr(6144,Tt,null,[py]),Nr(4608,ay,ly,[]),Nr(5120,Dg,(function(e,t,n,r,i,s,o,a){return[new sy(e,t,n),new dy(r),new cy(i,s,o,a)]}),[Ou,fs,zi,Ou,Ou,ay,Wi,[2,uy]]),Nr(4608,Ng,Ng,[Dg,fs]),Nr(135680,Mg,Mg,[Ou]),Nr(4608,qg,qg,[Ng,Mg,Bi]),Nr(5120,sx,tT,[]),Nr(5120,Jx,nT,[]),Nr(4608,xA,eT,[Ou,sx,Jx]),Nr(5120,pn,rT,[qg,xA,fs]),Nr(6144,Lg,null,[Mg]),Nr(4608,bs,bs,[fs]),Nr(5120,Rm,fb,[U_]),Nr(4608,X_,X_,[]),Nr(6144,J_,null,[X_]),Nr(135680,eb,eb,[U_,Rs,ns,Lt,J_]),Nr(4608,Y_,Y_,[]),Nr(5120,tb,ab,[U_,Mu,nb]),Nr(5120,gb,vb,[db]),Nr(5120,qi,(function(e,t){return[e,Cf.appBootstrapListenerFactory(t)]}),[gb,ah]),Nr(4608,dC,GA,[pn,Ou]),Nr(4608,FS,FS,[hS,bS,un,AS,_S,Lt,fs,Ou,bE,[2,xa]]),Nr(5120,IS,PS,[FS]),Nr(4608,QT,$T,[]),Nr(4608,JT,JT,[gf,U_,QT,fs,hm,Sa,xa]),Nr(5120,tw,aw,[iw,zi]),Nr(4608,nw,nw,[tw]),Nr(4608,rw,rw,[tw]),Nr(4608,Xh,Xh,[Yh,Jh]),Nr(4608,Ff,Ff,[gl]),Nr(4608,Kp,Kp,[gl]),Nr(4608,$v,$v,[Ff,If,Kp,Uc,gl,mE]),Nr(4608,rC,rC,[]),Nr(6144,ch,null,[uf]),Nr(6144,hh,null,[cf]),Nr(4608,XT,XT,[Uc,U_]),Nr(4608,Qk,Qk,[gl]),Nr(1073742336,Pu,Pu,[]),Nr(1024,rb,lb,[[3,U_]]),Nr(1024,nt,Cy,[]),Nr(1024,Es,(function(){return[sb()]}),[]),Nr(512,db,db,[Lt]),Nr(256,sw,"ngsw-worker.js",[]),Nr(256,iw,{enabled:!0},[]),Nr(1024,Mi,(function(e,t,n,r,i,s){return[(o=e,Pg("probe",Rg),Pg("coreTokens",Object.assign({},Og,(o||[]).reduce((function(e,t){return e[t.name]=t.token,e}),{}))),function(){return Rg}),pb(t),ow(n,r,i,s)];var o}),[[2,Es],db,Lt,sw,iw,zi]),Nr(512,Hi,Hi,[[2,Mi]]),Nr(131584,Ps,Ps,[fs,Wi,Lt,nt,un,Hi]),Nr(512,hm,fm,[]),Nr(512,Z_,Z_,[]),Nr(256,nb,{},[]),Nr(1024,Sa,ub,[wa,[2,Ea],nb]),Nr(512,xa,xa,[Sa,wa]),Nr(512,ns,ns,[]),Nr(512,Rs,js,[ns,[2,Ds]]),Nr(1024,N_,(function(){return[[{path:"device/:id",children:[{path:"log",component:bb,data:eF}],canActivate:[XT]}],[{path:"calendar",children:[{path:"configure",component:gk,data:nF},{path:"view",component:xk,data:rF}],canActivate:[XT]}],[{path:"",redirectTo:"focus",pathMatch:"full"},{path:"me",component:Ok,canActivate:[XT],data:sF},{path:"account-debugger",component:Uk,canActivate:[XT],data:oF},{path:"notifications",component:Jk,canActivate:[XT],data:aF},{path:"login",component:gw},{path:"focus",component:Sw,canActivate:[XT],data:uF},{path:"focus/:id/fix-route",component:iC},{path:"planner",component:lC,canActivate:[XT],data:lF},{path:"**",redirectTo:"login"}]]}),[]),Nr(1024,U_,hb,[Ps,hm,Z_,xa,Lt,Rs,ns,N_,nb,[2,L_],[2,R_]]),Nr(1073742336,ob,ob,[[2,rb],[2,U_]]),Nr(1073742336,tF,tF,[]),Nr(1073742336,Il,Il,[]),Nr(1073742336,Pl,Pl,[]),Nr(1073742336,hF,hF,[]),Nr(1073742336,iF,iF,[]),Nr(1073742336,pk,pk,[]),Nr(1073742336,vk,vk,[]),Nr(1073742336,fF,fF,[]),Nr(1073742336,Zs,Zs,[Ps]),Nr(1073742336,Sy,Sy,[[3,Sy]]),Nr(1073742336,cF,cF,[]),Nr(1073742336,sT,sT,[]),Nr(1073742336,kE,kE,[]),Nr(1073742336,EE,EE,[[2,SE],[2,uy]]),Nr(1073742336,qC,qC,[]),Nr(1073742336,eS,eS,[]),Nr(1073742336,ST,ST,[]),Nr(1073742336,FC,FC,[]),Nr(1073742336,OS,OS,[]),Nr(1073742336,DE,DE,[]),Nr(1073742336,ME,ME,[]),Nr(1073742336,gE,gE,[]),Nr(1073742336,Jc,Jc,[]),Nr(256,Cf.ROOT_OPTIONS,{},[]),Nr(1024,Nh,Cf.ngxsConfigFactory,[Cf.ROOT_OPTIONS]),Nr(512,Yh,Yh,[]),Nr(512,nf,nf,[]),Nr(512,ef,ef,[]),Nr(512,tf,tf,[[3,tf],[2,Fh]]),Nr(512,Lh,xh,[fs,zi]),Nr(512,Jh,Jh,[Lh]),Nr(512,rf,rf,[nt,Yh,nf,tf,ef,Jh]),Nr(256,Ph,st,[]),Nr(256,Ih,oh,[]),Nr(512,sf,sf,[Ph,Ih]),Nr(512,of,of,[sf,Nh]),Nr(512,af,af,[ef,rf,Nh,of]),Nr(512,uf,uf,[af]),Nr(1024,uh,Cf.getInitialState,[]),Nr(512,cf,cf,[Lt,Nh,[3,cf],Yh,nf,uf,[2,uh]]),Nr(512,gf,gf,[ef,af,Nh,Jh,[2,uh]]),Nr(512,yf,yf,[gf,Nh]),Nr(256,Ah,[$v,rC],[]),Nr(512,ah,ah,[]),Nr(512,hf,hf,[af,uf,ah]),Nr(1073742336,kf,kf,[cf,af,gf,yf,[2,Ah],Nh,hf]),Nr(1024,Th,(function(){return[[JT]]}),[]),Nr(1073742336,wf,wf,[gf,af,cf,[2,Th],hf]),Nr(1073742336,YT,YT,[]),Nr(1073742336,uw,uw,[]),Nr(1073742336,Gu,Gu,[]),Nr(256,Sl,"XSRF-TOKEN",[]),Nr(256,El,"X-XSRF-TOKEN",[]),Nr(256,Kc,null,[]),Nr(256,Nt,!0,[]),Nr(256,iT,"BrowserAnimations",[]),Nr(256,Zi,"xlf",[])])}));HT=s.a,"string"!=typeof BT&&(VT=BT,BT=HT[Pi.LocaleId]),BT=BT.toLowerCase().replace(/_/g,"-"),Ii[BT]=HT,VT&&(Ii[BT][Pi.ExtraData]=VT),Bu&&function(){if(it)throw new Error("Cannot enable prod mode after platform setup.");rt=!1}(),wy().bootstrapModuleFactory(dF).catch((function(e){return console.log(e)}))}},[[0,0]]]);